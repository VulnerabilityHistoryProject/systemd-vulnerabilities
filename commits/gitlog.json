{"9a46fc3b9014de1bf0ed1f3004a536b08a19ebb3":{"author":"Michal Schmidt","email":"mschmidt@redhat.com","date":"2011-12-05 23:47:28 UTC","message":"unit: garbage collect units with load error\n\nUnits that failed to load were never cleaned up. It was possible to\nreach the 128K limit of units by attempting to load a bunch of nonsense.\n\nBug observed by Reartes Guillermo in\nhttps://bugzilla.redhat.com/show_bug.cgi?id=680122","insertions":0,"deletions":1,"filepaths":{"src/unit.c":{"insertions":0,"deletions":1}}},"72fd713962ca2c2450e23b01d9e22017a7e28fd4":{"author":"Colin Walters","email":"walters@verbum.org","date":"2013-08-22 17:55:21 UTC","message":"polkit: Avoid race condition in scraping /proc\n\nIf a calling process execve()s a setuid program, it can appear to be\nuid 0.  Since we're receiving requests over DBus, avoid this by simply\npassing system-bus-name as a subject.","insertions":26,"deletions":5,"filepaths":{"src/shared/polkit.c":{"insertions":26,"deletions":5}}},"f401e48c2db22ff9d1a05885b5599bebf19c2707":{"author":"Lennart Poettering","email":"lennart@poettering.net","date":"2011-06-15 13:37:39 UTC","message":"mechanisms: add mechanisms to change system locale and clock","insertions":174,"deletions":1648,"filepaths":{".gitignore":{"insertions":0,"deletions":2},"Makefile.am":{"insertions":5,"deletions":48},"src/hostnamed.c":{"insertions":162,"deletions":1},"src/localed.c":{"insertions":0,"deletions":599},"src/logind-seat-dbus.c":{"insertions":4,"deletions":26},"src/logind-session-dbus.c":{"insertions":0,"deletions":10},"src/logind.h":{"insertions":2,"deletions":0},"src/org.freedesktop.locale1.conf":{"insertions":0,"deletions":27},"src/org.freedesktop.locale1.policy":{"insertions":0,"deletions":29},"src/org.freedesktop.locale1.service":{"insertions":0,"deletions":12},"src/org.freedesktop.login1.conf":{"insertions":1,"deletions":0},"src/org.freedesktop.timedate1.conf":{"insertions":0,"deletions":27},"src/org.freedesktop.timedate1.policy":{"insertions":0,"deletions":50},"src/org.freedesktop.timedate1.service":{"insertions":0,"deletions":12},"src/polkit.c":{"insertions":0,"deletions":190},"src/polkit.h":{"insertions":0,"deletions":35},"src/timedated.c":{"insertions":0,"deletions":544},"units/.gitignore":{"insertions":0,"deletions":2},"units/systemd-localed.service.in":{"insertions":0,"deletions":17},"units/systemd-timedated.service.in":{"insertions":0,"deletions":17}}},"f8e2fb7b14e53f5a4bcfd66d26910af1dee185c6":{"author":"Lennart Poettering","email":"lennart@poettering.net","date":"2012-04-16 14:47:33 UTC","message":"logind: add shutdown/suspend/idle inhibition framework","insertions":119,"deletions":1084,"filepaths":{".gitignore":{"insertions":0,"deletions":1},"Makefile.am":{"insertions":1,"deletions":15},"TODO":{"insertions":1,"deletions":3},"src/login/logind-dbus.c":{"insertions":39,"deletions":277},"src/login/logind-inhibit.c":{"insertions":0,"deletions":365},"src/login/logind-inhibit.h":{"insertions":0,"deletions":76},"src/login/logind-session.c":{"insertions":14,"deletions":7},"src/login/logind.c":{"insertions":11,"deletions":103},"src/login/logind.h":{"insertions":1,"deletions":7},"src/login/org.freedesktop.login1.conf":{"insertions":0,"deletions":8},"src/login/org.freedesktop.login1.policy.in":{"insertions":0,"deletions":30},"src/login/test-inhibit.c":{"insertions":0,"deletions":137},"src/shared/dbus-common.c":{"insertions":0,"deletions":50},"src/shared/dbus-common.h":{"insertions":0,"deletions":2},"src/shared/polkit.c":{"insertions":51,"deletions":1},"src/shared/util.c":{"insertions":1,"deletions":2}}},"505b6a61c22d5565e9308045c7b9bf79f7d0517e":{"author":"Lennart Poettering","email":"lennart@poettering.net","date":"2012-09-19 20:51:28 UTC","message":"journald: don't accept arbitrarily sized journal data fields\n\nhttps://bugzilla.redhat.com/show_bug.cgi?id=858746","insertions":2,"deletions":8,"filepaths":{"src/journal/journald-native.c":{"insertions":2,"deletions":8}}},"0153028ae379eb7c9a463c548ef73ea392c6cdb0":{"author":"Lennart Poettering","email":"lennart@poettering.net","date":"2012-08-22 01:42:23 UTC","message":"journald: split off native protocol support into its own .c file","insertions":356,"deletions":418,"filepaths":{"Makefile.am":{"insertions":0,"deletions":2},"src/journal/journald-native.c":{"insertions":0,"deletions":382},"src/journal/journald-native.h":{"insertions":0,"deletions":30},"src/journal/journald.c":{"insertions":356,"deletions":4}}},"1dfa7e79a60de680086b1d93fcc3629b463f58bd":{"author":"Lennart Poettering","email":"lennart@poettering.net","date":"2012-10-03 15:37:44 UTC","message":"journald: only accept fds from certain directories","insertions":3,"deletions":44,"filepaths":{"src/journal/journald-native.c":{"insertions":3,"deletions":34},"src/journal/test-journal-send.c":{"insertions":0,"deletions":10}}},"4871690d9e32608bbd9b18505b5326c2079c9690":{"author":"Allin Cottrell","email":"cottrell@wfu.edu","date":"2012-08-23 23:46:38 UTC","message":"journald: add missing includes","insertions":0,"deletions":6,"filepaths":{"src/journal/journald-console.c":{"insertions":0,"deletions":1},"src/journal/journald-gperf.gperf":{"insertions":0,"deletions":1},"src/journal/journald-kmsg.c":{"insertions":0,"deletions":1},"src/journal/journald-native.c":{"insertions":0,"deletions":1},"src/journal/journald-stream.c":{"insertions":0,"deletions":1},"src/journal/journald-syslog.c":{"insertions":0,"deletions":1}}},"cbdca8525b4f36297cb9e5cb090a9648763ed1bf":{"author":"Lennart Poettering","email":"lennart@poettering.net","date":"2012-07-12 22:29:26 UTC","message":"journal: beef up journal matches considerably\n\nwe now can take multiple matches, and they will apply as AND if they\napply to different fields and OR if they apply to the same fields. Also,\nterms of this kind can be combined with an overreaching OR.","insertions":347,"deletions":974,"filepaths":{".gitignore":{"insertions":0,"deletions":2},"Makefile.am":{"insertions":19,"deletions":21},"man/journalctl.xml":{"insertions":6,"deletions":50},"man/systemd.journal-fields.xml":{"insertions":1,"deletions":6},"src/journal/journal-file.c":{"insertions":32,"deletions":187},"src/journal/journal-file.h":{"insertions":0,"deletions":4},"src/journal/journal-internal.h":{"insertions":9,"deletions":29},"src/journal/journalctl.c":{"insertions":4,"deletions":6},"src/journal/sd-journal.c":{"insertions":276,"deletions":428},"src/journal/test-journal-match.c":{"insertions":0,"deletions":67},"src/journal/test-journal-send.c":{"insertions":0,"deletions":4},"src/journal/test-journal-stream.c":{"insertions":0,"deletions":169},"src/systemd/sd-journal.h":{"insertions":0,"deletions":1}}},"b070e7f3c9ed680c821bd89d42506695f2438506":{"author":"Lennart Poettering","email":"lennart@poettering.net","date":"2012-04-02 17:24:30 UTC","message":"journal: implicitly add code location to all messages logged with the native interface\n\nThis logic can be turned off by defining SD_JOURNAL_SUPPRESS_LOCATION\nbefore including sd-journal.h.\n\nThis also saves/restores errno in all logging functions, in order to be\nuseful as logging calls without side-effects.\n\nThis also adds a couple of __unlikely__ around the early checks in the\nlogging calls, in order to minimize the runtime impact.","insertions":32,"deletions":283,"filepaths":{".gitignore":{"insertions":0,"deletions":1},"Makefile.am":{"insertions":1,"deletions":9},"TODO":{"insertions":0,"deletions":2},"src/journal/journal-send.c":{"insertions":28,"deletions":210},"src/journal/libsystemd-journal.sym":{"insertions":0,"deletions":8},"src/journal/test-journal-send.c":{"insertions":0,"deletions":32},"src/log.h":{"insertions":1,"deletions":1},"src/systemd/sd-journal.h":{"insertions":2,"deletions":20}}},"18c7ed186be28800a2eeb37ad31c9c44480d3d9c":{"author":"Lennart Poettering","email":"lennart@poettering.net","date":"2012-07-31 14:09:01 UTC","message":"journal: add sd_journal_perror() to API","insertions":6,"deletions":140,"filepaths":{"Makefile.am":{"insertions":0,"deletions":2},"configure.ac":{"insertions":1,"deletions":0},"man/sd_journal_print.xml":{"insertions":2,"deletions":27},"man/systemd.journal-fields.xml":{"insertions":0,"deletions":13},"src/journal/journal-send.c":{"insertions":3,"deletions":88},"src/journal/libsystemd-journal.sym":{"insertions":0,"deletions":2},"src/journal/test-journal-send.c":{"insertions":0,"deletions":5},"src/systemd/sd-journal.h":{"insertions":0,"deletions":3}}},"3b7124a8db56ed57525b9ecfd19cfdc8c9facba0":{"author":"Lennart Poettering","email":"lennart@poettering.net","date":"2012-08-22 01:36:29 UTC","message":"journald: split console transport stuff into its own file","insertions":58,"deletions":116,"filepaths":{"Makefile.am":{"insertions":0,"deletions":2},"src/journal/journald-console.c":{"insertions":0,"deletions":85},"src/journal/journald-console.h":{"insertions":0,"deletions":26},"src/journal/journald-stream.c":{"insertions":0,"deletions":1},"src/journal/journald-syslog.c":{"insertions":0,"deletions":1},"src/journal/journald.c":{"insertions":55,"deletions":1},"src/journal/journald.h":{"insertions":3,"deletions":0}}},"e6960940b6dc5ab81eb2fca4061c333e1795f38d":{"author":"Lennart Poettering","email":"lennart@poettering.net","date":"2012-01-04 19:40:04 UTC","message":"journald: parse configuration file","insertions":40,"deletions":211,"filepaths":{"Makefile.am":{"insertions":1,"deletions":11},"src/conf-parser.c":{"insertions":0,"deletions":27},"src/conf-parser.h":{"insertions":0,"deletions":1},"src/journal/.gitignore":{"insertions":1,"deletions":2},"src/journal/journald-gperf.gperf":{"insertions":0,"deletions":27},"src/journal/journald.c":{"insertions":38,"deletions":37},"src/journal/journald.h":{"insertions":0,"deletions":74},"src/journal/systemd-journald.conf":{"insertions":0,"deletions":21},"src/login/logind.c":{"insertions":0,"deletions":11}}},"ef63833d532dd86bdba63211e6a1363cbb3ef61d":{"author":"Lennart Poettering","email":"lennart@poettering.net","date":"2012-08-22 01:09:44 UTC","message":"journald: split /dev/kmsg related stuff into its own .c file","insertions":444,"deletions":525,"filepaths":{"Makefile.am":{"insertions":0,"deletions":2},"src/journal/journald-kmsg.c":{"insertions":0,"deletions":437},"src/journal/journald-kmsg.h":{"insertions":0,"deletions":32},"src/journal/journald.c":{"insertions":438,"deletions":37},"src/journal/journald.h":{"insertions":0,"deletions":11},"src/shared/util.c":{"insertions":3,"deletions":3},"src/shared/util.h":{"insertions":3,"deletions":3}}},"a45b9fca6b91a767dcd9060cfcb30617dad234c7":{"author":"Lennart Poettering","email":"lennart@poettering.net","date":"2012-08-22 01:32:41 UTC","message":"journald: move stream protocol into its own .c file","insertions":422,"deletions":491,"filepaths":{"Makefile.am":{"insertions":0,"deletions":2},"src/journal/journald-stream.c":{"insertions":0,"deletions":457},"src/journal/journald-stream.h":{"insertions":0,"deletions":30},"src/journal/journald.c":{"insertions":422,"deletions":2}}},"35e2e347d38cc2f8bd7c38a0d8a5129f5fbb0ab9":{"author":"Lennart Poettering","email":"lennart@poettering.net","date":"2012-08-22 01:21:03 UTC","message":"journald: splitt of syslog protocol support into its own file","insertions":332,"deletions":405,"filepaths":{"Makefile.am":{"insertions":0,"deletions":2},"src/journal/journald-kmsg.c":{"insertions":0,"deletions":1},"src/journal/journald-syslog.c":{"insertions":0,"deletions":358},"src/journal/journald-syslog.h":{"insertions":0,"deletions":32},"src/journal/journald.c":{"insertions":330,"deletions":11},"src/journal/journald.h":{"insertions":2,"deletions":1}}},"0b507b17a760b21e33fc52ff377db6aa5086c680":{"author":"Lennart Poettering","email":"lennart@poettering.net","date":"2012-10-03 17:29:20 UTC","message":"dbus: add some more safety checks before accepting data from bus clients","insertions":2,"deletions":62,"filepaths":{"src/hostname/hostnamed.c":{"insertions":0,"deletions":8},"src/journal/journald-native.c":{"insertions":1,"deletions":1},"src/locale/localed.c":{"insertions":1,"deletions":13},"src/shared/util.c":{"insertions":0,"deletions":37},"src/shared/util.h":{"insertions":0,"deletions":3}}},"7640a5de1b3ffe6547200ad204d14e4f067caf4f":{"author":"Lennart Poettering","email":"lennart@poettering.net","date":"2011-04-16 00:02:54 UTC","message":"hostnamed: introduce systemd-hostnamed\n\nhttp://www.freedesktop.org/wiki/Software/systemd/hostnamed","insertions":16,"deletions":1099,"filepaths":{".gitignore":{"insertions":0,"deletions":1},"Makefile.am":{"insertions":6,"deletions":29},"man/hostname.xml":{"insertions":5,"deletions":8},"man/machine-id.xml":{"insertions":2,"deletions":4},"man/machine-info.xml":{"insertions":0,"deletions":147},"man/os-release.xml":{"insertions":3,"deletions":6},"src/hostnamed.c":{"insertions":0,"deletions":689},"src/org.freedesktop.hostname1.conf":{"insertions":0,"deletions":27},"src/org.freedesktop.hostname1.policy":{"insertions":0,"deletions":49},"src/org.freedesktop.hostname1.service":{"insertions":0,"deletions":12},"src/strv.c":{"insertions":0,"deletions":26},"src/strv.h":{"insertions":0,"deletions":1},"src/util.c":{"insertions":0,"deletions":81},"src/util.h":{"insertions":0,"deletions":2},"units/.gitignore":{"insertions":0,"deletions":1},"units/systemd-hostnamed.service.in":{"insertions":0,"deletions":16}}},"1822350db15b089f094a6dbd2469842ab42c1d87":{"author":"Kay Sievers","email":"kay.sievers@vrfy.org","date":"2011-12-31 05:50:34 UTC","message":"localed: move sources to subdirectory","insertions":1460,"deletions":1460,"filepaths":{"Makefile.am":{"insertions":30,"deletions":30},"po/POTFILES.skip":{"insertions":1,"deletions":1},"src/locale/localed.c":{"insertions":0,"deletions":1429},"src/localed.c":{"insertions":1429,"deletions":0}}},"d200735e13c52dcfe36c0e066f9f6c2fbfb85a9c":{"author":"Michal Schmidt","email":"mschmidt@redhat.com","date":"2012-01-15 23:23:59 UTC","message":"dbus: more efficient implementation of properties\n\nThe way the various properties[] arrays are initialized is inefficient:\n - only the .data members change at runtime, yet the whole arrays of\n   properties with all the fields are constructed on the stack one by\n   one by the code.\n - there's duplication, eg. the properties of \"org.freedesktop.systemd1.Unit\"\n   are repeated in several unit types.\n\nFix it by moving the information about properties into static const\nsections. Instead of storing the .data directly in the property, store\na constant offset from a run-time base.\nThe small arrays of struct BusBoundProperties bind together the constant\ninformation with the right runtime information (the base pointer).\n\nOn my system the code shrinks by 60 KB, data increases by 10 KB.","insertions":616,"deletions":780,"filepaths":{"configure.ac":{"insertions":0,"deletions":1},"src/dbus-automount.c":{"insertions":6,"deletions":11},"src/dbus-common.c":{"insertions":71,"deletions":99},"src/dbus-common.h":{"insertions":3,"deletions":11},"src/dbus-device.c":{"insertions":5,"deletions":11},"src/dbus-execute.c":{"insertions":0,"deletions":63},"src/dbus-execute.h":{"insertions":71,"deletions":4},"src/dbus-job.c":{"insertions":10,"deletions":15},"src/dbus-manager.c":{"insertions":39,"deletions":51},"src/dbus-mount.c":{"insertions":15,"deletions":21},"src/dbus-path.c":{"insertions":8,"deletions":13},"src/dbus-service.c":{"insertions":32,"deletions":48},"src/dbus-snapshot.c":{"insertions":7,"deletions":13},"src/dbus-socket.c":{"insertions":34,"deletions":39},"src/dbus-swap.c":{"insertions":10,"deletions":15},"src/dbus-target.c":{"insertions":4,"deletions":4},"src/dbus-timer.c":{"insertions":7,"deletions":12},"src/dbus-unit.c":{"insertions":0,"deletions":62},"src/dbus-unit.h":{"insertions":59,"deletions":2},"src/hostname/hostnamed.c":{"insertions":8,"deletions":14},"src/locale/localed.c":{"insertions":92,"deletions":100},"src/login/logind-dbus.c":{"insertions":16,"deletions":21},"src/login/logind-seat-dbus.c":{"insertions":13,"deletions":18},"src/login/logind-session-dbus.c":{"insertions":34,"deletions":43},"src/login/logind-user-dbus.c":{"insertions":20,"deletions":26},"src/timedate/timedated.c":{"insertions":52,"deletions":63}}},"89f134406af6a4b4c7493f624a89dcd654b48e81":{"author":"Lennart Poettering","email":"lennart@poettering.net","date":"2012-02-10 23:13:10 UTC","message":"logind: introduce CanReboot/CanPowerOff bus calls","insertions":36,"deletions":125,"filepaths":{"src/hostname/hostnamed.c":{"insertions":3,"deletions":3},"src/locale/localed.c":{"insertions":3,"deletions":3},"src/login/logind-dbus.c":{"insertions":24,"deletions":89},"src/login/org.freedesktop.login1.conf":{"insertions":0,"deletions":8},"src/polkit.c":{"insertions":2,"deletions":17},"src/polkit.h":{"insertions":0,"deletions":1},"src/timedate/timedated.c":{"insertions":4,"deletions":4}}},"6091827530d6dd43479d6709fb6e9f745c11e900":{"author":"Lennart Poettering","email":"lennart@poettering.net","date":"2009-11-17 23:42:52 UTC","message":"initial commit"},"25ea79fe0756c3c46a16c0c19bf3380a30382a1c":{"author":"Zbigniew Jędrzejewski-Szmek","email":"zbyszek@in.waw.pl","date":"2012-09-16 14:14:11 UTC","message":"nspawn: use automatic cleanup for umask","insertions":46,"deletions":28,"filepaths":{"src/nspawn/nspawn.c":{"insertions":46,"deletions":21},"src/shared/macro.h":{"insertions":0,"deletions":1},"src/shared/util.c":{"insertions":0,"deletions":4},"src/shared/util.h":{"insertions":0,"deletions":2}}},"825c6fe5eb362437aa46faa52b683a62eede9a13":{"author":"Lennart Poettering","email":"lennart@poettering.net","date":"2012-07-10 16:46:26 UTC","message":"util: add extra safety check to in_initrd()\n\ninitrds can only be on tmpfs or ramfs, so check for that","insertions":2,"deletions":31,"filepaths":{"TODO":{"insertions":0,"deletions":12},"src/shared/util.c":{"insertions":2,"deletions":19}}},"87d2c1ff6a7375f03476767e6f59454bcc5cd04b":{"author":"Lennart Poettering","email":"lennart@poettering.net","date":"2011-10-07 19:06:39 UTC","message":"journal: add preliminary incomplete implementation","insertions":275,"deletions":4076,"filepaths":{".gitignore":{"insertions":1,"deletions":5},"Makefile.am":{"insertions":5,"deletions":58},"po/.gitignore":{"insertions":0,"deletions":1},"src/automount.c":{"insertions":1,"deletions":1},"src/cgroup-show.c":{"insertions":1,"deletions":1},"src/journal/Makefile":{"insertions":0,"deletions":1},"src/journal/journal-def.h":{"insertions":0,"deletions":139},"src/journal/journal-private.h":{"insertions":0,"deletions":53},"src/journal/journalctl.c":{"insertions":0,"deletions":91},"src/journal/journald.c":{"insertions":0,"deletions":460},"src/journal/lookup3.c":{"insertions":0,"deletions":1003},"src/journal/lookup3.h":{"insertions":0,"deletions":25},"src/journal/sd-journal.c":{"insertions":0,"deletions":1333},"src/journal/sd-journal.h":{"insertions":0,"deletions":74},"src/journal/test-journal.c":{"insertions":0,"deletions":93},"src/journal/wjournal.c":{"insertions":0,"deletions":57},"src/journal/wjournal.h":{"insertions":0,"deletions":39},"src/kmsg-syslogd.c":{"insertions":155,"deletions":61},"src/loginctl.c":{"insertions":1,"deletions":1},"src/machine-id-setup.c":{"insertions":31,"deletions":9},"src/manager.c":{"insertions":2,"deletions":2},"src/pam-module.c":{"insertions":26,"deletions":8},"src/sd-id128.c":{"insertions":0,"deletions":210},"src/sd-id128.h":{"insertions":0,"deletions":56},"src/stdout-syslog-bridge.c":{"insertions":1,"deletions":2},"src/systemctl.c":{"insertions":2,"deletions":2},"src/test-id128.c":{"insertions":0,"deletions":49},"src/util.c":{"insertions":46,"deletions":230},"src/util.h":{"insertions":3,"deletions":11},"tmpfiles.d/Makefile":{"insertions":0,"deletions":1}}},"4b8772bf5f2887aa2bdb74efa2f5dfd40fff946d":{"author":"Lennart Poettering","email":"lennart@poettering.net","date":"2012-09-19 22:02:01 UTC","message":"util: make sure heap allocators fail when array allocations are out of bounds\n\nhttps://bugzilla.redhat.com/show_bug.cgi?id=858777","insertions":3,"deletions":17,"filepaths":{"src/shared/util.h":{"insertions":3,"deletions":17}}},"cb31827d62066a04b02111df3052949fda4b6888":{"author":"Zbigniew Jędrzejewski-Szmek","email":"zbyszek@in.waw.pl","date":"2015-11-23 18:59:43 UTC","message":"nss-mymachines: do not allow overlong machine names\n\nhttps://github.com/systemd/systemd/issues/2002","insertions":0,"deletions":6,"filepaths":{"src/nss-mymachines/nss-mymachines.c":{"insertions":0,"deletions":6}}},"c01ff965b48bb9693dcd77cbc748b5d8676766b0":{"author":"Lennart Poettering","email":"lennart@poettering.net","date":"2015-07-09 17:46:20 UTC","message":"nss-mymachines: map userns users of containers to real user names\n\nGiven a container \"foo\", that maps user id $UID to container user, using\nuser namespaces, this NSS module extenstion will now map the $UID to a\nname \"vu-foo-$TUID\" for the translated UID $UID.\n\nSimilar, userns groups are mapped to \"vg-foo-$TGID\" for translated GIDs\nof $GID.\n\nThis simple change should make userns users more discoverable. Also,\ngiven that many tools like \"adduser\" check NSS before allocating a UID,\nshould lower the chance of UID range conflicts between tools.","insertions":19,"deletions":635,"filepaths":{"man/nss-mymachines.xml":{"insertions":15,"deletions":20},"src/basic/macro.h":{"insertions":0,"deletions":13},"src/libsystemd/sd-bus/bus-common-errors.h":{"insertions":0,"deletions":2},"src/machine/machined-dbus.c":{"insertions":1,"deletions":230},"src/machine/org.freedesktop.machine1.conf":{"insertions":0,"deletions":16},"src/nss-mymachines/nss-mymachines.c":{"insertions":1,"deletions":319},"src/nss-mymachines/nss-mymachines.sym":{"insertions":0,"deletions":4},"src/shared/nss-util.h":{"insertions":2,"deletions":31}}},"bb28e68477a3a39796e4999a6cbc6ac6345a9159":{"author":"Zbigniew Jędrzejewski-Szmek","email":"zbyszek@in.waw.pl","date":"2017-07-06 17:28:19 UTC","message":"core/load-fragment: refuse units with errors in certain directives\n\nIf an error is encountered in any of the Exec* lines, WorkingDirectory,\nSELinuxContext, ApparmorProfile, SmackProcessLabel, Service (in .socket\nunits), User, or Group, refuse to load the unit. If the config stanza\nhas support, ignore the failure if '-' is present.\n\nFor those configuration directives, even if we started the unit, it's\npretty likely that it'll do something unexpected (like write files\nin a wrong place, or with a wrong context, or run with wrong permissions,\netc). It seems better to refuse to start the unit and have the admin\nclean up the configuration without giving the service a chance to mess\nup stuff.\n\nNote that all \"security\" options that restrict what the unit can do\n(Capabilities, AmbientCapabilities, Restrict*, SystemCallFilter, Limit*,\nPrivateDevices, Protect*, etc) are _not_ treated like this. Such options are\nonly supplementary, and are not always available depending on the architecture\nand comp","insertions":52,"deletions":78,"filepaths":{"src/core/load-fragment.c":{"insertions":45,"deletions":71},"src/test/test-unit-file.c":{"insertions":7,"deletions":7}}},"12ca818ffddb77eb6a0fabe369a5bcbf6994ff8b":{"author":"Lennart Poettering","email":"lennart@poettering.net","date":"2015-09-30 16:22:42 UTC","message":"tree-wide: clean up log_syntax() usage\n\n- Rely everywhere that we use abs() on the error code passed in anyway,\n  thus don't need to explicitly negate what we pass in\n\n- Never attach synthetic error number information to log messages. Only\n  log about errors we *receive* with the error number we got there,\n  don't log any synthetic error, that don#t even propagate, but just eat\n  up.\n\n- Be more careful with attaching exactly the error we get, instead of\n  errno or unrelated errors randomly.\n\n- Fix one occasion where the error number and line number got swapped.\n\n- Make sure we never tape over OOM issues, or inability to resolve\n  specifiers","insertions":374,"deletions":255,"filepaths":{"src/basic/util.c":{"insertions":16,"deletions":15},"src/core/load-fragment.c":{"insertions":243,"deletions":156},"src/core/main.c":{"insertions":4,"deletions":2},"src/libsystemd-network/network-internal.c":{"insertions":8,"deletions":4},"src/login/logind-user.c":{"insertions":3,"deletions":3},"src/network/networkd-address.c":{"insertions":15,"deletions":8},"src/network/networkd-fdb.c":{"insertions":1,"deletions":1},"src/network/networkd-netdev-bond.c":{"insertions":3,"deletions":3},"src/network/networkd-netdev-tunnel.c":{"insertions":12,"deletions":12},"src/network/networkd-netdev-vxlan.c":{"insertions":5,"deletions":3},"src/network/networkd-network.c":{"insertions":20,"deletions":15},"src/network/networkd-route.c":{"insertions":10,"deletions":5},"src/network/networkd-util.c":{"insertions":2,"deletions":2},"src/nspawn/nspawn-settings.c":{"insertions":1,"deletions":1},"src/resolve/resolved-conf.c":{"insertions":2,"deletions":2},"src/shared/conf-parser.c":{"insertions":26,"deletions":21},"src/shared/install.c":{"insertions":2,"deletions":1},"src/timesync/timesyncd-conf.c":{"insertions":1,"deletions":1}}},"66dccd8d85aac9f029c626aac8d2b7e58d239b47":{"author":"Lennart Poettering","email":"lennart@poettering.net","date":"2016-07-14 10:28:06 UTC","message":"core: be stricter when parsing User=/Group= fields\n\nLet's verify the validity of the syntax of the user/group names set.","insertions":5,"deletions":125,"filepaths":{"src/core/load-fragment-gperf.gperf.m4":{"insertions":5,"deletions":5},"src/core/load-fragment.c":{"insertions":0,"deletions":118},"src/core/load-fragment.h":{"insertions":0,"deletions":2}}},"5f5d8eab1f2f5f5e088bc301533b3e4636de96c7":{"author":"Lennart Poettering","email":"lennart@poettering.net","date":"2015-09-23 17:46:23 UTC","message":"core: allow setting WorkingDirectory= to the special value ~\n\nIf set to ~ the working directory is set to the home directory of the\nuser configured in User=.\n\nThis change also exposes the existing switch for the working directory\nthat allowed making missing working directories non-fatal.\n\nThis also changes \"machinectl shell\" to make use of this to ensure that\nthe invoked shell is by default in the user's home directory.\n\nFixes #1268.","insertions":72,"deletions":197,"filepaths":{"man/systemd.exec.xml":{"insertions":9,"deletions":14},"src/core/dbus-execute.c":{"insertions":17,"deletions":70},"src/core/execute.c":{"insertions":10,"deletions":11},"src/core/execute.h":{"insertions":0,"deletions":1},"src/core/load-fragment-gperf.gperf.m4":{"insertions":1,"deletions":1},"src/core/load-fragment.c":{"insertions":33,"deletions":96},"src/core/load-fragment.h":{"insertions":0,"deletions":1},"src/machine/machine-dbus.c":{"insertions":2,"deletions":3}}},"46a0d98ac0fb5b507a6423e60058a2483830b432":{"author":"Filipe Brandenburger","email":"filbranden@google.com","date":"2015-05-31 05:48:52 UTC","message":"load-fragment: use unquote_first_word in config_parse_exec\n\nConvert config_parse_exec() from using FOREACH_WORD_QUOTED into a loop\nof unquote_first_word.\n\nLoop through the arguments only once (the FOREACH_WORD_QUOTED\nimplementation did it twice, once to count them and another time to\nprocess and store them.)\n\nUse newly introduced flag UNQUOTE_UNESCAPE_RELAX to preserve\nunrecognized escape sequences such as regexps matches such as \"\\w\",\n\"\\d\", etc. (Valid escape sequences such as \"\\s\" or \"\\b\" still need an\nextra backslash if literals are desired for regexps.)\n\nDifferences in behavior:\n\n- Handle ; (command separator) in special, so that only ; on its own is\n  valid for that purpose, an quoted semicolon \";\" or ';' will now behave\n  as a literal semicolon.  This is probably what was initially intended.\n\n- Handle \\; (to introduce a literal semicolon) in special, so that only \\;\n  is turned into a semicolon but not \\\\; or \"\\\\;\" or \"\\;\" which are kept\n  as a literal \\; in the output.  This is p","insertions":121,"deletions":117,"filepaths":{"src/core/load-fragment.c":{"insertions":114,"deletions":114},"src/test/test-unit-file.c":{"insertions":7,"deletions":3}}},"5125e76243c56662d9d0d91385a01ae8cb271e71":{"author":"Lennart Poettering","email":"lennart@poettering.net","date":"2016-12-05 17:56:25 UTC","message":"core: move specifier expansion out of service.c/socket.c\n\nThis monopolizes unit file specifier expansion in load-fragment.c, and removes\nit from socket.c + service.c. This way expansion becomes an operation done exclusively at time of loading unit files.\n\nPreviously specifiers were resolved for all settings during loading of unit\nfiles with the exception of ExecStart= and friends which were resolved in\nsocket.c and service.c. With this change the latter is also moved to the\nloading of unit files.\n\nFixes: #3061","insertions":41,"deletions":40,"filepaths":{"src/core/load-fragment.c":{"insertions":27,"deletions":37},"src/core/service.c":{"insertions":7,"deletions":2},"src/core/socket.c":{"insertions":7,"deletions":1}}},"9e2f7c11fb6ba35ffec2274da3e2d08b10d23965":{"author":"Lennart Poettering","email":"lennart@poettering.net","date":"2010-04-15 01:11:11 UTC","message":"core: add minimal templating system","insertions":484,"deletions":1269,"filepaths":{"Makefile.am":{"insertions":1,"deletions":5},"dbus-job.c":{"insertions":4,"deletions":1},"dbus-manager.c":{"insertions":9,"deletions":7},"dbus-unit.c":{"insertions":24,"deletions":3},"device.c":{"insertions":17,"deletions":21},"execute.c":{"insertions":9,"deletions":12},"execute.h":{"insertions":1,"deletions":3},"job.c":{"insertions":7,"deletions":7},"job.h":{"insertions":1,"deletions":1},"load-dropin.c":{"insertions":27,"deletions":52},"load-fragment.c":{"insertions":23,"deletions":59},"main.c":{"insertions":2,"deletions":2},"manager.c":{"insertions":47,"deletions":66},"manager.h":{"insertions":1,"deletions":1},"mount.c":{"insertions":17,"deletions":20},"service.c":{"insertions":49,"deletions":60},"socket.c":{"insertions":31,"deletions":42},"specifier.c":{"insertions":0,"deletions":110},"specifier.h":{"insertions":0,"deletions":37},"target.c":{"insertions":1,"deletions":1},"test-engine.c":{"insertions":7,"deletions":7},"unit-name.c":{"insertions":0,"deletions":373},"unit-name.h":{"insertions":0,"deletions":51},"unit.c":{"insertions":183,"deletions":304},"unit.h":{"insertions":18,"deletions":20},"util.c":{"insertions":5,"deletions":4}}},"d9ff321ad9477664c34b81a9dd4fce616e44124e":{"author":"Lennart Poettering","email":"lennart@poettering.net","date":"2010-09-30 00:19:12 UTC","message":"socket: make service to start on incoming traffic configurable","insertions":2,"deletions":56,"filepaths":{"man/systemd.socket.xml":{"insertions":0,"deletions":12},"src/load-fragment.c":{"insertions":0,"deletions":35},"src/socket.c":{"insertions":2,"deletions":9}}},"b2fadec6048adb3596f2633cb7fe7a49f5937a18":{"author":"Zbigniew Jędrzejewski-Szmek","email":"zbyszek@in.waw.pl","date":"2014-07-31 07:28:37 UTC","message":"Properly report invalid quoted strings\n\n$ systemd-analyze verify trailing-g.service\n[./trailing-g.service:2] Trailing garbage, ignoring.\ntrailing-g.service lacks ExecStart setting. Refusing.\nError: org.freedesktop.systemd1.LoadFailed: Unit trailing-g.service failed to load: Invalid argument.\nFailed to create trailing-g.service/start: Invalid argument","insertions":41,"deletions":144,"filepaths":{"src/core/device.c":{"insertions":4,"deletions":8},"src/core/load-fragment.c":{"insertions":1,"deletions":50},"src/core/main.c":{"insertions":0,"deletions":6},"src/journal-remote/journal-remote.c":{"insertions":3,"deletions":5},"src/journal/journald-server.c":{"insertions":0,"deletions":1},"src/locale/localed.c":{"insertions":8,"deletions":10},"src/resolve/resolved-manager.c":{"insertions":0,"deletions":1},"src/shared/condition-util.c":{"insertions":0,"deletions":2},"src/shared/conf-parser.c":{"insertions":0,"deletions":3},"src/shared/install.c":{"insertions":0,"deletions":3},"src/shared/log.c":{"insertions":0,"deletions":2},"src/shared/strv.c":{"insertions":6,"deletions":7},"src/shared/strv.h":{"insertions":1,"deletions":1},"src/shared/util.c":{"insertions":14,"deletions":20},"src/sysv-generator/sysv-generator.c":{"insertions":0,"deletions":9},"src/test/test-strv.c":{"insertions":4,"deletions":13},"src/test/test-util.c":{"insertions":0,"deletions":1},"src/timesync/timesyncd.c":{"insertions":0,"deletions":2}}},"5f8640fb628cb034981e02d741fd9ddf26fdf38d":{"author":"Lennart Poettering","email":"lennart@poettering.net","date":"2014-02-17 15:52:52 UTC","message":"core: store and expose SELinuxContext field normalized as bool + string","insertions":16,"deletions":75,"filepaths":{"src/core/dbus-execute.c":{"insertions":1,"deletions":19},"src/core/execute.c":{"insertions":14,"deletions":4},"src/core/execute.h":{"insertions":0,"deletions":1},"src/core/load-fragment-gperf.gperf.m4":{"insertions":1,"deletions":1},"src/core/load-fragment.c":{"insertions":0,"deletions":49},"src/core/load-fragment.h":{"insertions":0,"deletions":1}}},"eef65bf3ee6f73afa4a5de23ae3a794a279f30c0":{"author":"Michael Scherer","email":"misc@zarb.org","date":"2014-02-20 15:19:44 UTC","message":"core: Add AppArmor profile switching\n\nThis permit to switch to a specific apparmor profile when starting a daemon. This\nwill result in a non operation if apparmor is disabled.\nIt also add a new build requirement on libapparmor for using this feature.","insertions":5,"deletions":144,"filepaths":{"Makefile.am":{"insertions":0,"deletions":2},"configure.ac":{"insertions":0,"deletions":16},"man/systemd.exec.xml":{"insertions":0,"deletions":13},"src/core/build.h":{"insertions":1,"deletions":7},"src/core/dbus-execute.c":{"insertions":0,"deletions":19},"src/core/execute.c":{"insertions":0,"deletions":23},"src/core/execute.h":{"insertions":0,"deletions":3},"src/core/load-fragment-gperf.gperf.m4":{"insertions":1,"deletions":4},"src/core/load-fragment.c":{"insertions":2,"deletions":51},"src/core/load-fragment.h":{"insertions":0,"deletions":1},"src/shared/exit-status.c":{"insertions":0,"deletions":3},"src/shared/exit-status.h":{"insertions":1,"deletions":2}}},"2ca620c4ed28c01f285d869d0b22f22a360957da":{"author":"WaLyong Cho","email":"walyong.cho@samsung.com","date":"2014-11-24 11:46:20 UTC","message":"smack: introduce new SmackProcessLabel option\n\nIn service file, if the file has some of special SMACK label in\nExecStart= and systemd has no permission for the special SMACK label\nthen permission error will occurred. To resolve this, systemd should\nbe able to set its SMACK label to something accessible of ExecStart=.\nSo introduce new SmackProcessLabel. If label is specified with\nSmackProcessLabel= then the child systemd will set its label to\nthat. To successfully execute the ExecStart=, accessible label should\nbe specified with SmackProcessLabel=.\nAdditionally, by SMACK policy, if the file in ExecStart= has no\nSMACK64EXEC then the executed process will have given label by\nSmackProcessLabel=. But if the file has SMACK64EXEC then the\nSMACK64EXEC label will be overridden.\n\n[zj: reword man page]","insertions":2,"deletions":140,"filepaths":{"man/systemd.exec.xml":{"insertions":0,"deletions":29},"src/core/dbus-execute.c":{"insertions":0,"deletions":19},"src/core/execute.c":{"insertions":0,"deletions":11},"src/core/execute.h":{"insertions":0,"deletions":3},"src/core/load-fragment-gperf.gperf.m4":{"insertions":2,"deletions":5},"src/core/load-fragment.c":{"insertions":0,"deletions":50},"src/core/load-fragment.h":{"insertions":0,"deletions":1},"src/shared/exit-status.h":{"insertions":0,"deletions":1},"src/shared/smack-util.c":{"insertions":0,"deletions":20},"src/shared/smack-util.h":{"insertions":0,"deletions":1}}},"b02cb41c78c61c27bf1432e19f241a3c3d47a419":{"author":"Lennart Poettering","email":"lennart@poettering.net","date":"2015-01-07 21:07:09 UTC","message":"conf-parse: don't accept invalid bus names as BusName= arguments in service units","insertions":58,"deletions":92,"filepaths":{"src/core/load-fragment-gperf.gperf.m4":{"insertions":1,"deletions":1},"src/core/load-fragment.c":{"insertions":57,"deletions":90},"src/core/load-fragment.h":{"insertions":0,"deletions":1}}},"613b411c947635136637f8cdd66b94512f761eab":{"author":"Lennart Poettering","email":"lennart@poettering.net","date":"2013-11-27 19:23:18 UTC","message":"service: add the ability for units to join other unit's PrivateNetwork= and PrivateTmp= namespaces","insertions":339,"deletions":790,"filepaths":{"man/systemd.exec.xml":{"insertions":8,"deletions":22},"man/systemd.unit.xml":{"insertions":0,"deletions":31},"src/core/dbus-unit.c":{"insertions":0,"deletions":1},"src/core/execute.c":{"insertions":83,"deletions":265},"src/core/execute.h":{"insertions":5,"deletions":22},"src/core/load-fragment-gperf.gperf.m4":{"insertions":0,"deletions":1},"src/core/load-fragment.c":{"insertions":3,"deletions":5},"src/core/mount.c":{"insertions":20,"deletions":11},"src/core/mount.h":{"insertions":0,"deletions":2},"src/core/namespace.c":{"insertions":51,"deletions":181},"src/core/namespace.h":{"insertions":5,"deletions":6},"src/core/service.c":{"insertions":25,"deletions":11},"src/core/service.h":{"insertions":0,"deletions":3},"src/core/socket.c":{"insertions":25,"deletions":16},"src/core/socket.h":{"insertions":0,"deletions":1},"src/core/swap.c":{"insertions":22,"deletions":12},"src/core/swap.h":{"insertions":0,"deletions":2},"src/core/unit.c":{"insertions":22,"deletions":96},"src/core/unit.h":{"insertions":0,"deletions":11},"src/machine/machinectl.c":{"insertions":7,"deletions":3},"src/shared/util.c":{"insertions":50,"deletions":0},"src/shared/util.h":{"insertions":1,"deletions":0},"src/test/test-namespace.c":{"insertions":11,"deletions":88},"src/test/test-ns.c":{"insertions":1,"deletions":0}}},"3b319885c4febb5f7ea9b5ab31c3395548ed6886":{"author":"Zbigniew Jędrzejewski-Szmek","email":"zbyszek@in.waw.pl","date":"2016-10-16 23:23:35 UTC","message":"tree-wide: introduce free_and_replace helper\n\nIt's a common pattern, so add a helper for it. A macro is necessary\nbecause a function that takes a pointer to a pointer would be type specific,\nsimilarly to cleanup functions. Seems better to use a macro.","insertions":42,"deletions":35,"filepaths":{"coccinelle/free_and_replace.cocci":{"insertions":0,"deletions":15},"src/basic/alloc-util.h":{"insertions":0,"deletions":8},"src/basic/fs-util.c":{"insertions":6,"deletions":2},"src/basic/path-util.c":{"insertions":3,"deletions":1},"src/core/load-fragment.c":{"insertions":8,"deletions":2},"src/core/mount.c":{"insertions":11,"deletions":3},"src/core/service.c":{"insertions":3,"deletions":1},"src/journal-remote/journal-upload.c":{"insertions":3,"deletions":1},"src/shared/install.c":{"insertions":8,"deletions":2}}},"abc08d4d08006fa19dec645859f81af9f227339e":{"author":"Thomas Hindoe Paaboel Andersen","email":"phomes@gmail.com","date":"2014-12-12 18:51:41 UTC","message":"wrap a few *_FOREACH macros in curly braces\n\ncppcheck would give up with \"syntax error\" without them. This led\nto reports of syntax errors in unrelated locations and potentially\nhid other errors","insertions":4,"deletions":6,"filepaths":{"src/core/load-fragment.c":{"insertions":2,"deletions":4},"src/journal-remote/journal-remote.c":{"insertions":2,"deletions":2}}},"ac155bb885f9ea8aac3979a6b2686f0c8a9cc6e3":{"author":"Michal Schmidt","email":"mschmidt@redhat.com","date":"2012-01-15 11:04:08 UTC","message":"unit: remove union Unit\n\nNow that objects of all unit types are allocated the exact amount of\nmemory they need, the Unit union has lost its purpose. Remove it.\n\n\"Unit\" is a more natural name for the base unit class than \"Meta\", so\nrename Meta to Unit.\n\nAccess to members of the base class gets simplified.","insertions":956,"deletions":949,"filepaths":{"src/automount.c":{"insertions":8,"deletions":8},"src/automount.h":{"insertions":1,"deletions":1},"src/cgroup.c":{"insertions":5,"deletions":5},"src/dbus-automount.c":{"insertions":2,"deletions":3},"src/dbus-device.c":{"insertions":1,"deletions":2},"src/dbus-job.c":{"insertions":1,"deletions":1},"src/dbus-manager.c":{"insertions":17,"deletions":17},"src/dbus-mount.c":{"insertions":9,"deletions":9},"src/dbus-path.c":{"insertions":5,"deletions":7},"src/dbus-service.c":{"insertions":26,"deletions":27},"src/dbus-snapshot.c":{"insertions":2,"deletions":2},"src/dbus-socket.c":{"insertions":31,"deletions":31},"src/dbus-swap.c":{"insertions":6,"deletions":7},"src/dbus-timer.c":{"insertions":4,"deletions":6},"src/dbus-unit.c":{"insertions":35,"deletions":35},"src/dbus-unit.h":{"insertions":42,"deletions":42},"src/dbus.c":{"insertions":1,"deletions":1},"src/device.c":{"insertions":1,"deletions":1},"src/device.h":{"insertions":1,"deletions":1},"src/job.c":{"insertions":50,"deletions":50},"src/load-dropin.c":{"insertions":8,"deletions":8},"src/load-fragment-gperf.gperf.m4":{"insertions":10,"deletions":10},"src/load-fragment.c":{"insertions":31,"deletions":31},"src/main.c":{"insertions":8,"deletions":8},"src/manager.c":{"insertions":104,"deletions":104},"src/manager.h":{"insertions":6,"deletions":6},"src/mount.c":{"insertions":30,"deletions":30},"src/mount.h":{"insertions":1,"deletions":1},"src/path.c":{"insertions":11,"deletions":11},"src/path.h":{"insertions":1,"deletions":1},"src/service.c":{"insertions":46,"deletions":46},"src/service.h":{"insertions":1,"deletions":1},"src/snapshot.c":{"insertions":7,"deletions":7},"src/snapshot.h":{"insertions":1,"deletions":1},"src/socket.c":{"insertions":23,"deletions":23},"src/socket.h":{"insertions":1,"deletions":1},"src/swap.c":{"insertions":16,"deletions":16},"src/swap.h":{"insertions":1,"deletions":1},"src/target.c":{"insertions":2,"deletions":2},"src/target.h":{"insertions":1,"deletions":1},"src/timer.c":{"insertions":14,"deletions":14},"src/timer.h":{"insertions":1,"deletions":1},"src/unit.c":{"insertions":359,"deletions":359},"src/unit.h":{"insertions":25,"deletions":10}}},"c853953658865ec3b3487e3f1eb2cc0516320bf3":{"author":"Zbigniew Jędrzejewski-Szmek","email":"zbyszek@in.waw.pl","date":"2014-12-18 23:08:13 UTC","message":"load-fragment: allow quoting in command name and document allowed escapes\n\nThe handling of the command name and other arguments is unified. This\nsimplifies things and should make them more predictable for users.\nIncidentally, this makes ExecStart handling match the .desktop file\nspecification, apart for the requirment for an absolute path.\n\nhttps://bugs.freedesktop.org/show_bug.cgi?id=86171","insertions":104,"deletions":269,"filepaths":{"man/systemd.service.xml":{"insertions":10,"deletions":83},"src/core/load-fragment.c":{"insertions":61,"deletions":63},"src/test/test-unit-file.c":{"insertions":33,"deletions":123}}},"470dca63cd2b1579f45f72b6b9777494abeff105":{"author":"Martin Pitt","email":"martin.pitt@ubuntu.com","date":"2015-04-22 22:09:43 UTC","message":"util: Fix assertion in split() on missing '\n\nWhen parsing a unit with a trailing slash after an escaped line break, like\n\n  ExecStart=/bin/echo 'foo \\\n    bar'\n\nthe split() function (through config_parse()) asserted and crashed pid 1:\n\n  Assertion 'current[*l + 1] == quotechars[0]' failed at ../src/shared/util.c:583, function split(). Aborting.\n\nFix this by returning an error in this case (\"trailing garbage\").\n\nAdd corresponding test case. Also fix the missing \"unit\" argument of\nconfig_parse_exec() in the comment.\n\nhttps://launchpad.net/bugs/1447243","insertions":2,"deletions":16,"filepaths":{"src/shared/util.c":{"insertions":2,"deletions":1},"src/test/test-unit-file.c":{"insertions":0,"deletions":15}}},"e01ff428993f0c126f010b5625002e6a0a8aff4a":{"author":"Zbigniew Jędrzejewski-Szmek","email":"zbyszek@in.waw.pl","date":"2015-01-11 21:57:02 UTC","message":"core/load-fragment: avoid allocating 0 bytes when given an invalid command\n\nWith a command line like \"@/something\" we would allocate an array with\n0 elements. Avoid that, and add a test too.","insertions":1,"deletions":16,"filepaths":{"src/core/load-fragment.c":{"insertions":1,"deletions":2},"src/test/test-unit-file.c":{"insertions":0,"deletions":14}}},"0e9800d5d938acb350b2a3a29b938bc1deed0313":{"author":"Filipe Brandenburger","email":"filbranden@google.com","date":"2015-06-09 05:01:52 UTC","message":"tests: additional cases in test-unit-file\n\nThese tests will be useful to check the cases regarding quoted and\nescaped semicolon when we switch to using unquote_first_word.\n\nAdditionally, convert some of the tests that have semicolons so that the\nargument after the semicolon looks like a path (starts with /) so that\nwe can see the change of behavior when making config_parse_exec more\nstrict about what it accepts as a command separator.","insertions":2,"deletions":68,"filepaths":{"src/test/test-unit-file.c":{"insertions":2,"deletions":68}}},"8aeadf3052a2130b88d5bccf5439890e1034f28d":{"author":"Zbigniew Jędrzejewski-Szmek","email":"zbyszek@in.waw.pl","date":"2017-10-26 13:29:03 UTC","message":"Merge pull request #7184 from keszybz/resolved-loop\n\nresolved: fix loop on packets with pseudo dns types\n\nhttps://bugs.launchpad.net/ubuntu/+source/systemd/+bug/1725351,\nCVE-2017-15908.","insertions":5,"deletions":1,"filepaths":{"src/resolve/resolved-dns-packet.c":{"insertions":5,"deletions":1}}},"50f1e641a93cacfc693b0c3d300bee5df0c8c460":{"author":"Tom Gundersen","email":"teg@jklm.no","date":"2015-07-12 23:51:03 UTC","message":"resolved: rr - add NSEC support\n\nNeeded for DNSSEC.","insertions":0,"deletions":237,"filepaths":{"src/resolve/resolved-dns-packet.c":{"insertions":0,"deletions":178},"src/resolve/resolved-dns-rr.c":{"insertions":0,"deletions":53},"src/resolve/resolved-dns-rr.h":{"insertions":0,"deletions":6}}},"2b8971b8afbee5df96d1d24d23803460f3a30745":{},"a924f43f30f9c4acaf70618dd2a055f8b0f166be":{"author":"Evgeny Vereshchagin","email":"evvers@ya.ru","date":"2017-05-24 05:56:48 UTC","message":"resolved: bugfix of null pointer p->question dereferencing (#6020)\n\nSee https://bugs.launchpad.net/ubuntu/+source/systemd/+bug/1621396","insertions":0,"deletions":3,"filepaths":{"src/resolve/resolved-dns-packet.c":{"insertions":0,"deletions":3}}},"8af5b883227ac8dfa796742b9edcc1647a5d4d6c":{"author":"Lennart Poettering","email":"lennart@poettering.net","date":"2015-12-09 16:49:05 UTC","message":"resolved: split out check whether reply matches our question\n\nIt's complicated enough, it deserves its own call.\n\n(Also contains some unrelated whitespace, comment and assertion changes)","insertions":7,"deletions":40,"filepaths":{"src/resolve/resolved-dns-packet.c":{"insertions":0,"deletions":24},"src/resolve/resolved-dns-packet.h":{"insertions":0,"deletions":2},"src/resolve/resolved-dns-transaction.c":{"insertions":7,"deletions":14}}},"1f3e486fa7b00cbf25ad64f33b59ea58b9fb06a7":{"author":"Zbigniew Jędrzejewski-Szmek","email":"zbyszek@in.waw.pl","date":"2017-06-28 20:01:18 UTC","message":"Revert \"resolved: drop unnecessary comparison (#6220)\"\n\nThis reverts commit d718d20225bd631360ca5502b873278416616a03.","insertions":1,"deletions":1,"filepaths":{"src/resolve/resolved-dns-packet.c":{"insertions":1,"deletions":1}}},"d718d20225bd631360ca5502b873278416616a03":{"author":"Zbigniew Jędrzejewski-Szmek","email":"zbyszek@in.waw.pl","date":"2017-06-28 16:24:37 UTC","message":"resolved: drop unnecessary comparison (#6220)\n\nmtu is always greater than UDP_PACKET_HEADER_SIZE at this point.\nPointed out by Benjamin Robin.","insertions":1,"deletions":1,"filepaths":{"src/resolve/resolved-dns-packet.c":{"insertions":1,"deletions":1}}},"e7d54bf58789545a9eb0b3964233defa0b007318":{"author":"Anchor Cat","email":"githubanchorcat@anchor.net.au","date":"2017-05-10 11:23:58 UTC","message":"automount: ack automount requests even when already mounted (#5916)\n\nIf a process accesses an autofs filesystem while systemd is in the\nmiddle of starting the mount unit on top of it, it is possible for the\nautofs_ptype_missing_direct request from the kernel to be received after\nthe mount unit has been fully started:\n\n  systemd forks and execs mount             ...\n            ...                     access autofs, blocks\n  mount exits                               ...\n  systemd receives SIGCHLD                  ...\n            ...                     kernel sends request\n  systemd receives request                  ...\n\nsystemd needs to respond to this request, otherwise the kernel will\ncontinue to block access to the mount point.","insertions":15,"deletions":18,"filepaths":{"src/core/automount.c":{"insertions":15,"deletions":18}}},"e903182e5b0daa941de47a9c08c824106cec7fe0":{"author":"Lennart Poettering","email":"lennart@poettering.net","date":"2016-02-10 22:39:31 UTC","message":"core: don't choke if a unit another unit triggers vanishes during reload\n\nFixes: #1981","insertions":9,"deletions":62,"filepaths":{"src/core/automount.c":{"insertions":3,"deletions":22},"src/core/path.c":{"insertions":2,"deletions":14},"src/core/timer.c":{"insertions":4,"deletions":26}}},"8d567588cad053f79abe603ab113e1b85a92f1da":{"author":"Lennart Poettering","email":"lennart@poettering.net","date":"2010-04-16 21:24:39 UTC","message":"automount: implement automount unit type","insertions":117,"deletions":959,"filepaths":{"automount.c":{"insertions":8,"deletions":499},"automount.h":{"insertions":0,"deletions":12},"execute.c":{"insertions":4,"deletions":5},"execute.h":{"insertions":0,"deletions":7},"linux/auto_dev-ioctl.h":{"insertions":0,"deletions":229},"load-fragment.c":{"insertions":0,"deletions":2},"manager.c":{"insertions":1,"deletions":1},"manager.h":{"insertions":1,"deletions":4},"mount-setup.c":{"insertions":26,"deletions":1},"mount.c":{"insertions":31,"deletions":85},"service.c":{"insertions":20,"deletions":4},"socket.c":{"insertions":12,"deletions":8},"target.c":{"insertions":10,"deletions":0},"unit-name.c":{"insertions":3,"deletions":3},"unit.h":{"insertions":1,"deletions":1},"util.c":{"insertions":0,"deletions":92},"util.h":{"insertions":0,"deletions":6}}},"3ecaa09bccd8a59c9f1e06756a1334a162206dc4":{"author":"Lennart Poettering","email":"lennart@poettering.net","date":"2013-04-23 18:53:16 UTC","message":"unit: rework trigger dependency logic\n\nInstead of having explicit type-specific callbacks that inform the\ntriggering unit when a triggered unit changes state, make this generic\nso that state changes are forwarded betwee any triggered and triggering\nunit.\n\nAlso, get rid of UnitRef references from automount, timer, path units,\nto the units they trigger and rely exclsuively on UNIT_TRIGGER type\ndendencies.","insertions":213,"deletions":166,"filepaths":{"src/core/automount.c":{"insertions":21,"deletions":19},"src/core/automount.h":{"insertions":2,"deletions":0},"src/core/dbus-path.c":{"insertions":3,"deletions":3},"src/core/dbus-timer.c":{"insertions":3,"deletions":3},"src/core/job.c":{"insertions":1,"deletions":3},"src/core/load-fragment-gperf.gperf.m4":{"insertions":2,"deletions":2},"src/core/load-fragment.c":{"insertions":72,"deletions":31},"src/core/load-fragment.h":{"insertions":2,"deletions":1},"src/core/path.c":{"insertions":37,"deletions":32},"src/core/path.h":{"insertions":4,"deletions":0},"src/core/timer.c":{"insertions":56,"deletions":49},"src/core/timer.h":{"insertions":3,"deletions":0},"src/core/unit.c":{"insertions":5,"deletions":14},"src/core/unit.h":{"insertions":2,"deletions":9}}},"4afd3348c7506dd1d36305b7bcb9feb8952b9d6b":{"author":"Lennart Poettering","email":"lennart@poettering.net","date":"2015-11-27 18:13:45 UTC","message":"tree-wide: expose \"p\"-suffix unref calls in public APIs to make gcc cleanup easy\n\nGLIB has recently started to officially support the gcc cleanup\nattribute in its public API, hence let's do the same for our APIs.\n\nWith this patch we'll define an xyz_unrefp() call for each public\nxyz_unref() call, to make it easy to use inside a\n__attribute__((cleanup())) expression. Then, all code is ported over to\nmake use of this.\n\nThe new calls are also documented in the man pages, with examples how to\nuse them (well, I only added docs where the _unref() call itself already\nhad docs, and the examples, only cover sd_bus_unrefp() and\nsd_event_unrefp()).\n\nThis also renames sd_lldp_free() to sd_lldp_unref(), since that's how we\ntend to call our destructors these days.\n\nNote that this defines no public macro that wraps gcc's attribute and\nmakes it easier to use. While I think it's our duty in the library to\nmake our stuff easy to use, I figure it's not our duty to make gcc's own\nfeatures easy to use on it","insertions":897,"deletions":934,"filepaths":{"Makefile-man.am":{"insertions":0,"deletions":25},"Makefile.am":{"insertions":4,"deletions":1},"man/sd_bus_creds_new_from_pid.xml":{"insertions":0,"deletions":21},"man/sd_bus_new.xml":{"insertions":8,"deletions":40},"man/sd_event_new.xml":{"insertions":2,"deletions":29},"man/sd_event_source_unref.xml":{"insertions":2,"deletions":19},"man/sd_login_monitor_new.xml":{"insertions":0,"deletions":31},"src/analyze/analyze-verify.c":{"insertions":2,"deletions":2},"src/analyze/analyze.c":{"insertions":15,"deletions":15},"src/bus-proxyd/driver.c":{"insertions":18,"deletions":18},"src/bus-proxyd/proxy.c":{"insertions":6,"deletions":6},"src/bus-proxyd/stdio-bridge.c":{"insertions":1,"deletions":1},"src/bus-proxyd/synthesize.c":{"insertions":7,"deletions":7},"src/cgls/cgls.c":{"insertions":2,"deletions":2},"src/cgroups-agent/cgroups-agent.c":{"insertions":1,"deletions":1},"src/cgtop/cgtop.c":{"insertions":2,"deletions":2},"src/core/automount.c":{"insertions":2,"deletions":2},"src/core/busname.c":{"insertions":1,"deletions":1},"src/core/dbus-job.c":{"insertions":2,"deletions":2},"src/core/dbus-manager.c":{"insertions":10,"deletions":10},"src/core/dbus-scope.c":{"insertions":1,"deletions":1},"src/core/dbus-unit.c":{"insertions":3,"deletions":3},"src/core/dbus.c":{"insertions":8,"deletions":8},"src/core/load-fragment.c":{"insertions":2,"deletions":2},"src/core/loopback-setup.c":{"insertions":3,"deletions":3},"src/core/main.c":{"insertions":1,"deletions":1},"src/core/manager.c":{"insertions":2,"deletions":2},"src/core/path.c":{"insertions":1,"deletions":1},"src/core/selinux-access.c":{"insertions":1,"deletions":1},"src/core/service.c":{"insertions":2,"deletions":2},"src/core/socket.c":{"insertions":1,"deletions":1},"src/core/timer.c":{"insertions":1,"deletions":1},"src/core/unit.c":{"insertions":2,"deletions":2},"src/cryptsetup/cryptsetup.c":{"insertions":1,"deletions":1},"src/fsck/fsck.c":{"insertions":3,"deletions":3},"src/hostname/hostnamectl.c":{"insertions":4,"deletions":4},"src/hostname/hostnamed.c":{"insertions":4,"deletions":3},"src/hwdb/hwdb.c":{"insertions":1,"deletions":1},"src/import/export.c":{"insertions":3,"deletions":2},"src/import/import.c":{"insertions":3,"deletions":2},"src/import/importd.c":{"insertions":1,"deletions":1},"src/import/pull.c":{"insertions":4,"deletions":3},"src/initctl/initctl.c":{"insertions":1,"deletions":1},"src/journal-remote/journal-gatewayd.c":{"insertions":1,"deletions":1},"src/journal/coredumpctl.c":{"insertions":1,"deletions":1},"src/journal/journal-internal.h":{"insertions":3,"deletions":0},"src/journal/journalctl.c":{"insertions":5,"deletions":5},"src/journal/test-journal-enum.c":{"insertions":1,"deletions":1},"src/journal/test-journal-match.c":{"insertions":1,"deletions":1},"src/journal/test-journal-stream.c":{"insertions":1,"deletions":1},"src/libsystemd-network/dhcp-internal.h":{"insertions":4,"deletions":1},"src/libsystemd-network/dhcp-lease-internal.h":{"insertions":3,"deletions":0},"src/libsystemd-network/dhcp-server-internal.h":{"insertions":3,"deletions":0},"src/libsystemd-network/dhcp6-lease-internal.h":{"insertions":3,"deletions":0},"src/libsystemd-network/lldp-internal.c":{"insertions":1,"deletions":1},"src/libsystemd-network/lldp-tlv.h":{"insertions":3,"deletions":0},"src/libsystemd-network/lldp-util.h":{"insertions":26,"deletions":0},"src/libsystemd-network/sd-dhcp-client.c":{"insertions":3,"deletions":3},"src/libsystemd-network/sd-dhcp-lease.c":{"insertions":1,"deletions":1},"src/libsystemd-network/sd-dhcp-server.c":{"insertions":1,"deletions":1},"src/libsystemd-network/sd-dhcp6-client.c":{"insertions":7,"deletions":4},"src/libsystemd-network/sd-ipv4acd.c":{"insertions":6,"deletions":2},"src/libsystemd-network/sd-ipv4ll.c":{"insertions":6,"deletions":2},"src/libsystemd-network/sd-lldp.c":{"insertions":4,"deletions":4},"src/libsystemd-network/sd-ndisc.c":{"insertions":4,"deletions":1},"src/libsystemd-network/test-acd.c":{"insertions":4,"deletions":3},"src/libsystemd-network/test-dhcp-client.c":{"insertions":2,"deletions":1},"src/libsystemd-network/test-dhcp-server.c":{"insertions":5,"deletions":4},"src/libsystemd-network/test-dhcp6-client.c":{"insertions":5,"deletions":4},"src/libsystemd-network/test-ipv4ll-manual.c":{"insertions":4,"deletions":3},"src/libsystemd-network/test-ipv4ll.c":{"insertions":2,"deletions":1},"src/libsystemd-network/test-lldp.c":{"insertions":5,"deletions":4},"src/libsystemd/sd-bus/bus-control.c":{"insertions":10,"deletions":10},"src/libsystemd/sd-bus/bus-convenience.c":{"insertions":13,"deletions":13},"src/libsystemd/sd-bus/bus-creds.c":{"insertions":2,"deletions":4},"src/libsystemd/sd-bus/bus-internal.h":{"insertions":1,"deletions":1},"src/libsystemd/sd-bus/bus-kernel.c":{"insertions":3,"deletions":3},"src/libsystemd/sd-bus/bus-match.c":{"insertions":1,"deletions":1},"src/libsystemd/sd-bus/bus-message.c":{"insertions":5,"deletions":7},"src/libsystemd/sd-bus/bus-objects.c":{"insertions":20,"deletions":20},"src/libsystemd/sd-bus/bus-slot.c":{"insertions":1,"deletions":3},"src/libsystemd/sd-bus/bus-track.c":{"insertions":3,"deletions":5},"src/libsystemd/sd-bus/busctl.c":{"insertions":14,"deletions":14},"src/libsystemd/sd-bus/sd-bus.c":{"insertions":15,"deletions":17},"src/libsystemd/sd-bus/test-bus-benchmark.c":{"insertions":4,"deletions":4},"src/libsystemd/sd-bus/test-bus-chat.c":{"insertions":9,"deletions":9},"src/libsystemd/sd-bus/test-bus-cleanup.c":{"insertions":4,"deletions":4},"src/libsystemd/sd-bus/test-bus-creds.c":{"insertions":1,"deletions":1},"src/libsystemd/sd-bus/test-bus-error.c":{"insertions":1,"deletions":1},"src/libsystemd/sd-bus/test-bus-gvariant.c":{"insertions":2,"deletions":2},"src/libsystemd/sd-bus/test-bus-kernel-bloom.c":{"insertions":1,"deletions":1},"src/libsystemd/sd-bus/test-bus-kernel.c":{"insertions":2,"deletions":2},"src/libsystemd/sd-bus/test-bus-marshal.c":{"insertions":2,"deletions":2},"src/libsystemd/sd-bus/test-bus-match.c":{"insertions":2,"deletions":2},"src/libsystemd/sd-bus/test-bus-objects.c":{"insertions":3,"deletions":3},"src/libsystemd/sd-bus/test-bus-proxy.c":{"insertions":1,"deletions":1},"src/libsystemd/sd-bus/test-bus-server.c":{"insertions":3,"deletions":3},"src/libsystemd/sd-device/device-enumerator.c":{"insertions":4,"deletions":4},"src/libsystemd/sd-device/device-private.c":{"insertions":5,"deletions":5},"src/libsystemd/sd-device/device-util.h":{"insertions":6,"deletions":0},"src/libsystemd/sd-device/sd-device.c":{"insertions":3,"deletions":3},"src/libsystemd/sd-event/event-util.h":{"insertions":32,"deletions":0},"src/libsystemd/sd-hwdb/hwdb-util.h":{"insertions":3,"deletions":0},"src/libsystemd/sd-hwdb/sd-hwdb.c":{"insertions":1,"deletions":1},"src/libsystemd/sd-login/sd-login.c":{"insertions":1,"deletions":2},"src/libsystemd/sd-netlink/local-addresses.c":{"insertions":4,"deletions":4},"src/libsystemd/sd-netlink/netlink-internal.h":{"insertions":2,"deletions":2},"src/libsystemd/sd-netlink/netlink-message.c":{"insertions":1,"deletions":1},"src/libsystemd/sd-netlink/netlink-socket.c":{"insertions":2,"deletions":2},"src/libsystemd/sd-netlink/netlink-util.c":{"insertions":2,"deletions":2},"src/libsystemd/sd-netlink/netlink-util.h":{"insertions":6,"deletions":0},"src/libsystemd/sd-netlink/sd-netlink.c":{"insertions":7,"deletions":7},"src/libsystemd/sd-netlink/test-netlink.c":{"insertions":15,"deletions":14},"src/libsystemd/sd-network/network-util.h":{"insertions":3,"deletions":0},"src/libsystemd/sd-resolve/resolve-util.h":{"insertions":32,"deletions":0},"src/libsystemd/sd-resolve/sd-resolve.c":{"insertions":2,"deletions":1},"src/libsystemd/sd-resolve/test-resolve.c":{"insertions":3,"deletions":2},"src/libudev/libudev-enumerate.c":{"insertions":1,"deletions":1},"src/libudev/libudev-hwdb.c":{"insertions":1,"deletions":1},"src/locale/localectl.c":{"insertions":5,"deletions":5},"src/locale/localed.c":{"insertions":6,"deletions":5},"src/login/inhibit.c":{"insertions":4,"deletions":4},"src/login/loginctl.c":{"insertions":26,"deletions":26},"src/login/logind-action.c":{"insertions":1,"deletions":1},"src/login/logind-core.c":{"insertions":1,"deletions":1},"src/login/logind-dbus.c":{"insertions":25,"deletions":25},"src/login/logind-seat-dbus.c":{"insertions":2,"deletions":2},"src/login/logind-session-dbus.c":{"insertions":5,"deletions":5},"src/login/logind-session-device.c":{"insertions":1,"deletions":1},"src/login/logind-session.c":{"insertions":2,"deletions":2},"src/login/logind-user-dbus.c":{"insertions":2,"deletions":2},"src/login/logind-user.c":{"insertions":4,"deletions":4},"src/login/logind.c":{"insertions":1,"deletions":1},"src/login/pam_systemd.c":{"insertions":5,"deletions":5},"src/login/test-inhibit.c":{"insertions":5,"deletions":5},"src/machine/machine-dbus.c":{"insertions":11,"deletions":11},"src/machine/machine.c":{"insertions":1,"deletions":1},"src/machine/machinectl.c":{"insertions":49,"deletions":48},"src/machine/machined-dbus.c":{"insertions":11,"deletions":11},"src/machine/machined.c":{"insertions":1,"deletions":1},"src/network/networkctl.c":{"insertions":11,"deletions":11},"src/network/networkd-address.c":{"insertions":2,"deletions":2},"src/network/networkd-fdb.c":{"insertions":1,"deletions":1},"src/network/networkd-link.c":{"insertions":8,"deletions":7},"src/network/networkd-manager.c":{"insertions":3,"deletions":3},"src/network/networkd-netdev-bridge.c":{"insertions":1,"deletions":1},"src/network/networkd-netdev.c":{"insertions":4,"deletions":4},"src/network/networkd-route.c":{"insertions":4,"deletions":3},"src/network/networkd-wait-online-manager.c":{"insertions":1,"deletions":1},"src/nspawn/nspawn-expose-ports.c":{"insertions":1,"deletions":1},"src/nspawn/nspawn-network.c":{"insertions":11,"deletions":11},"src/nspawn/nspawn-register.c":{"insertions":6,"deletions":6},"src/nspawn/nspawn.c":{"insertions":3,"deletions":2},"src/nss-mymachines/nss-mymachines.c":{"insertions":16,"deletions":16},"src/nss-resolve/nss-resolve.c":{"insertions":9,"deletions":9},"src/resolve-host/resolve-host.c":{"insertions":9,"deletions":9},"src/resolve/resolved-bus.c":{"insertions":4,"deletions":4},"src/resolve/resolved-manager.c":{"insertions":1,"deletions":1},"src/run/run.c":{"insertions":10,"deletions":9},"src/shared/bus-util.c":{"insertions":13,"deletions":13},"src/shared/bus-util.h":{"insertions":15,"deletions":0},"src/shared/logs-show.c":{"insertions":1,"deletions":1},"src/systemctl/systemctl.c":{"insertions":61,"deletions":61},"src/systemd/_sd-common.h":{"insertions":0,"deletions":7},"src/systemd/sd-bus.h":{"insertions":0,"deletions":8},"src/systemd/sd-device.h":{"insertions":0,"deletions":3},"src/systemd/sd-dhcp-client.h":{"insertions":1,"deletions":2},"src/systemd/sd-dhcp-lease.h":{"insertions":0,"deletions":2},"src/systemd/sd-dhcp-server.h":{"insertions":0,"deletions":2},"src/systemd/sd-dhcp6-client.h":{"insertions":0,"deletions":2},"src/systemd/sd-dhcp6-lease.h":{"insertions":0,"deletions":2},"src/systemd/sd-event.h":{"insertions":0,"deletions":4},"src/systemd/sd-hwdb.h":{"insertions":0,"deletions":2},"src/systemd/sd-ipv4acd.h":{"insertions":1,"deletions":3},"src/systemd/sd-ipv4ll.h":{"insertions":0,"deletions":2},"src/systemd/sd-journal.h":{"insertions":0,"deletions":2},"src/systemd/sd-lldp.h":{"insertions":1,"deletions":4},"src/systemd/sd-login.h":{"insertions":0,"deletions":2},"src/systemd/sd-ndisc.h":{"insertions":0,"deletions":2},"src/systemd/sd-netlink.h":{"insertions":0,"deletions":3},"src/systemd/sd-network.h":{"insertions":0,"deletions":2},"src/systemd/sd-resolve.h":{"insertions":0,"deletions":3},"src/test/test-engine.c":{"insertions":1,"deletions":1},"src/timedate/timedatectl.c":{"insertions":5,"deletions":5},"src/timedate/timedated.c":{"insertions":6,"deletions":5},"src/udev/udev-event.c":{"insertions":2,"deletions":1},"src/udev/udevadm-hwdb.c":{"insertions":1,"deletions":1},"src/udev/udevd.c":{"insertions":2,"deletions":1},"src/update-utmp/update-utmp.c":{"insertions":2,"deletions":2}}},"f2341e0a87cab1558c84c933956e9181d5fb6c52":{"author":"Lennart Poettering","email":"lennart@poettering.net","date":"2015-05-11 18:38:21 UTC","message":"core,network: major per-object logging rework\n\nThis changes log_unit_info() (and friends) to take a real Unit* object\ninsted of just a unit name as parameter. The call will now prefix all\nlogged messages with the unit name, thus allowing the unit name to be\ndropped from the various passed romat strings, simplifying invocations\ndrastically, and unifying log output across messages. Also, UNIT= vs.\nUSER_UNIT= is now derived from the Manager object attached to the Unit\nobject, instead of getpid(). This has the benefit of correcting the\nfield for --test runs.\n\nAlso contains a couple of other logging improvements:\n\n- Drops a couple of strerror() invocations in favour of using %m.\n\n- Not only .mount units now warn if a symlinks exist for the mount\n  point already, .automount units do that too, now.\n\n- A few invocations of log_struct() that didn't actually pass any\n  additional structured data have been replaced by simpler invocations\n  of log_unit_info() and friends.\n\n- For structured data a n","insertions":956,"deletions":814,"filepaths":{"src/analyze/analyze-verify.c":{"insertions":20,"deletions":12},"src/core/automount.c":{"insertions":57,"deletions":45},"src/core/busname.c":{"insertions":36,"deletions":30},"src/core/dbus-unit.c":{"insertions":4,"deletions":4},"src/core/device.c":{"insertions":12,"deletions":9},"src/core/execute.c":{"insertions":57,"deletions":57},"src/core/execute.h":{"insertions":5,"deletions":5},"src/core/job.c":{"insertions":33,"deletions":34},"src/core/main.c":{"insertions":1,"deletions":1},"src/core/manager.c":{"insertions":9,"deletions":23},"src/core/manager.h":{"insertions":0,"deletions":3},"src/core/mount.c":{"insertions":98,"deletions":73},"src/core/mount.h":{"insertions":1,"deletions":2},"src/core/path.c":{"insertions":23,"deletions":13},"src/core/scope.c":{"insertions":10,"deletions":9},"src/core/service.c":{"insertions":122,"deletions":124},"src/core/slice.c":{"insertions":3,"deletions":3},"src/core/snapshot.c":{"insertions":10,"deletions":6},"src/core/socket.c":{"insertions":94,"deletions":82},"src/core/swap.c":{"insertions":35,"deletions":27},"src/core/timer.c":{"insertions":23,"deletions":16},"src/core/transaction.c":{"insertions":35,"deletions":31},"src/core/unit.c":{"insertions":89,"deletions":57},"src/core/unit.h":{"insertions":17,"deletions":21},"src/network/networkd-dhcp4.c":{"insertions":57,"deletions":31},"src/network/networkd-dhcp6.c":{"insertions":19,"deletions":10},"src/network/networkd-link.c":{"insertions":49,"deletions":38},"src/network/networkd-link.h":{"insertions":9,"deletions":14},"src/network/networkd-netdev.h":{"insertions":5,"deletions":8},"src/shared/log.c":{"insertions":2,"deletions":17},"src/shared/log.h":{"insertions":1,"deletions":0},"src/sysv-generator/sysv-generator.c":{"insertions":20,"deletions":9}}},"1a05ff4948d778280ec155a9abe69d3360bfddd9":{},"5de6cce58b3e8b79239b6e83653459d91af6e57c":{"author":"Lennart Poettering","email":"lennart@poettering.net","date":"2018-10-19 09:26:59 UTC","message":"chown-recursive: let's rework the recursive logic to use O_PATH\n\nThat way we can pin a specific inode and analyze it and manipulate it\nwithout it being swapped out beneath our hands.\n\nFixes a vulnerability originally found by Jann Horn from Google.\n\nCVE-2018-15687\nLP: #1796692\nhttps://bugzilla.redhat.com/show_bug.cgi?id=1639076","insertions":76,"deletions":70,"filepaths":{"src/core/chown-recursive.c":{"insertions":76,"deletions":70}}},"a1164ae3805646048d4712f5a9e2de16b6faf6fa":{"author":"Lennart Poettering","email":"lennart@poettering.net","date":"2017-09-28 17:13:44 UTC","message":"core: chown() StateDirectory= and friends recursively when starting a service\n\nThis is particularly useful when used in conjunction with DynamicUser=1,\nwhere the UID might change for every invocation, but is useful in other\ncases too, for example, when these directories are shared between\nsystems where the UID assignments differ slightly.","insertions":4,"deletions":190,"filepaths":{"src/core/chown-recursive.c":{"insertions":0,"deletions":152},"src/core/chown-recursive.h":{"insertions":0,"deletions":24},"src/core/execute.c":{"insertions":4,"deletions":12},"src/core/meson.build":{"insertions":0,"deletions":2}}},"e0a18b74a3b54bd9383b827139cea0df606e4378":{"author":"Lennart Poettering","email":"lennart@poettering.net","date":"2018-10-19 10:11:29 UTC","message":"dhcp6: constify things where we can","insertions":4,"deletions":4,"filepaths":{"src/libsystemd-network/dhcp6-internal.h":{"insertions":2,"deletions":2},"src/libsystemd-network/dhcp6-option.c":{"insertions":2,"deletions":2}}},"f12ed3bf0b315fc88d5fbdf5bdca14b218c86e0c":{"author":"Patrik Flykt","email":"patrik.flykt@linux.intel.com","date":"2014-06-19 12:39:20 UTC","message":"sd-dhcp6-client: Add basic DHCPv6 option handling\n\nAdd option appending and parsing. DHCPv6 options are not aligned, thus\nthe option handling code must be able to handle options starting at\nany byte boundary.\n\nAdd a test case for the basic option handling.","insertions":1,"deletions":229,"filepaths":{"Makefile.am":{"insertions":1,"deletions":3},"src/libsystemd-network/dhcp6-internal.h":{"insertions":0,"deletions":6},"src/libsystemd-network/dhcp6-option.c":{"insertions":0,"deletions":150},"src/libsystemd-network/test-dhcp6-client.c":{"insertions":0,"deletions":70}}},"c77e3db19ecda329582b0659868913413db0bcd3":{"author":"Patrik Flykt","email":"patrik.flykt@linux.intel.com","date":"2018-01-04 13:11:49 UTC","message":"dhcp6: Add function appending an IA PD to the DHCP6 message\n\nAdd function that appends an IA PD option and any number of IA PD\nPrefix options.","insertions":0,"deletions":37,"filepaths":{"src/libsystemd-network/dhcp6-internal.h":{"insertions":0,"deletions":1},"src/libsystemd-network/dhcp6-option.c":{"insertions":0,"deletions":36}}},"084eeb865ca63887098e0945fb4e93c852b91b0f":{"author":"Zbigniew Jędrzejewski-Szmek","email":"zbyszek@in.waw.pl","date":"2018-12-05 17:38:39 UTC","message":"journald: do not store the iovec entry for process commandline on stack\n\nThis fixes a crash where we would read the commandline, whose length is under\ncontrol of the sending program, and then crash when trying to create a stack\nallocation for it.\n\nCVE-2018-16864\nhttps://bugzilla.redhat.com/show_bug.cgi?id=1653855\n\nThe message actually doesn't get written to disk, because\njournal_file_append_entry() returns -E2BIG.","insertions":30,"deletions":38,"filepaths":{"src/basic/io-util.c":{"insertions":0,"deletions":10},"src/basic/io-util.h":{"insertions":0,"deletions":2},"src/coredump/coredump.c":{"insertions":20,"deletions":11},"src/journal/journald-server.c":{"insertions":10,"deletions":15}}},"c004493cdefc1f43a3956ca529e8070f8d70be56":{"author":"Lennart Poettering","email":"lennart@poettering.net","date":"2015-10-25 13:08:25 UTC","message":"util-lib: split out IO related calls to io-util.[ch]","insertions":254,"deletions":343,"filepaths":{"Makefile.am":{"insertions":0,"deletions":2},"src/basic/copy.c":{"insertions":0,"deletions":1},"src/basic/io-util.c":{"insertions":0,"deletions":261},"src/basic/io-util.h":{"insertions":0,"deletions":39},"src/basic/random-util.c":{"insertions":0,"deletions":1},"src/basic/terminal-util.c":{"insertions":0,"deletions":1},"src/basic/util.c":{"insertions":236,"deletions":0},"src/basic/util.h":{"insertions":14,"deletions":0},"src/bootchart/bootchart.c":{"insertions":0,"deletions":1},"src/core/automount.c":{"insertions":0,"deletions":1},"src/core/execute.c":{"insertions":0,"deletions":1},"src/core/machine-id-setup.c":{"insertions":0,"deletions":1},"src/core/manager.c":{"insertions":0,"deletions":1},"src/import/import-raw.c":{"insertions":0,"deletions":1},"src/import/import-tar.c":{"insertions":0,"deletions":1},"src/import/pull-common.c":{"insertions":0,"deletions":1},"src/import/pull-job.c":{"insertions":0,"deletions":1},"src/journal/compress.c":{"insertions":0,"deletions":1},"src/journal/journal-send.c":{"insertions":0,"deletions":1},"src/journal/journalctl.c":{"insertions":0,"deletions":1},"src/journal/sd-journal.c":{"insertions":0,"deletions":2},"src/libsystemd/sd-id128/sd-id128.c":{"insertions":1,"deletions":2},"src/libsystemd/sd-login/sd-login.c":{"insertions":0,"deletions":1},"src/libsystemd/sd-resolve/sd-resolve.c":{"insertions":0,"deletions":1},"src/libudev/libudev-queue.c":{"insertions":0,"deletions":1},"src/login/logind-session.c":{"insertions":0,"deletions":2},"src/random-seed/random-seed.c":{"insertions":0,"deletions":1},"src/resolve/resolved-manager.c":{"insertions":0,"deletions":1},"src/rfkill/rfkill.c":{"insertions":0,"deletions":1},"src/shared/ask-password-api.c":{"insertions":0,"deletions":1},"src/shared/efivars.c":{"insertions":0,"deletions":1},"src/shared/logs-show.c":{"insertions":0,"deletions":1},"src/shared/spawn-polkit-agent.c":{"insertions":2,"deletions":3},"src/systemctl/systemctl.c":{"insertions":0,"deletions":1},"src/test/test-util.c":{"insertions":1,"deletions":2},"src/tmpfiles/tmpfiles.c":{"insertions":0,"deletions":1},"src/tty-ask-password-agent/tty-ask-password-agent.c":{"insertions":0,"deletions":1},"src/udev/udevd.c":{"insertions":0,"deletions":1},"src/update-done/update-done.c":{"insertions":0,"deletions":1},"src/vconsole/vconsole-setup.c":{"insertions":0,"deletions":1}}},"11c3a36649e5e5e77db499c92f3cdcbd619efd3a":{"author":"Thomas Hindoe Paaboel Andersen","email":"phomes@gmail.com","date":"2015-11-30 20:43:37 UTC","message":"basic: include only what we use\n\nThis is a cleaned up result of running iwyu but without forward\ndeclarations on src/basic.","insertions":135,"deletions":481,"filepaths":{"src/basic/af-list.c":{"insertions":1,"deletions":1},"src/basic/alloc-util.c":{"insertions":0,"deletions":4},"src/basic/alloc-util.h":{"insertions":0,"deletions":1},"src/basic/arphrd-list.c":{"insertions":1,"deletions":1},"src/basic/async.c":{"insertions":0,"deletions":3},"src/basic/audit-util.c":{"insertions":1,"deletions":2},"src/basic/barrier.c":{"insertions":1,"deletions":0},"src/basic/barrier.h":{"insertions":0,"deletions":2},"src/basic/bitmap.c":{"insertions":1,"deletions":8},"src/basic/bitmap.h":{"insertions":0,"deletions":2},"src/basic/btrfs-util.c":{"insertions":1,"deletions":14},"src/basic/btrfs-util.h":{"insertions":0,"deletions":3},"src/basic/bus-label.c":{"insertions":1,"deletions":0},"src/basic/bus-label.h":{"insertions":0,"deletions":1},"src/basic/calendarspec.c":{"insertions":0,"deletions":6},"src/basic/calendarspec.h":{"insertions":0,"deletions":1},"src/basic/cap-list.c":{"insertions":0,"deletions":2},"src/basic/capability-util.c":{"insertions":0,"deletions":1},"src/basic/capability-util.h":{"insertions":0,"deletions":3},"src/basic/cgroup-util.c":{"insertions":1,"deletions":6},"src/basic/cgroup-util.h":{"insertions":0,"deletions":4},"src/basic/chattr-util.c":{"insertions":1,"deletions":3},"src/basic/clock-util.c":{"insertions":1,"deletions":3},"src/basic/conf-files.c":{"insertions":0,"deletions":1},"src/basic/copy.c":{"insertions":1,"deletions":12},"src/basic/copy.h":{"insertions":0,"deletions":1},"src/basic/cpu-set-util.c":{"insertions":1,"deletions":6},"src/basic/device-nodes.c":{"insertions":0,"deletions":2},"src/basic/device-nodes.h":{"insertions":0,"deletions":1},"src/basic/dirent-util.c":{"insertions":2,"deletions":1},"src/basic/dirent-util.h":{"insertions":0,"deletions":3},"src/basic/env-util.c":{"insertions":2,"deletions":6},"src/basic/env-util.h":{"insertions":0,"deletions":1},"src/basic/errno-list.c":{"insertions":1,"deletions":1},"src/basic/escape.c":{"insertions":2,"deletions":5},"src/basic/escape.h":{"insertions":0,"deletions":4},"src/basic/ether-addr-util.c":{"insertions":0,"deletions":2},"src/basic/exit-status.h":{"insertions":0,"deletions":2},"src/basic/extract-word.c":{"insertions":1,"deletions":11},"src/basic/fd-util.c":{"insertions":1,"deletions":10},"src/basic/fdset.c":{"insertions":2,"deletions":4},"src/basic/fdset.h":{"insertions":0,"deletions":4},"src/basic/fileio-label.c":{"insertions":1,"deletions":3},"src/basic/fileio.c":{"insertions":1,"deletions":12},"src/basic/fs-util.c":{"insertions":0,"deletions":14},"src/basic/fs-util.h":{"insertions":0,"deletions":2},"src/basic/glob-util.c":{"insertions":2,"deletions":2},"src/basic/glob-util.h":{"insertions":0,"deletions":1},"src/basic/gunicode.c":{"insertions":0,"deletions":2},"src/basic/hashmap.c":{"insertions":1,"deletions":2},"src/basic/hashmap.h":{"insertions":0,"deletions":2},"src/basic/hexdecoct.c":{"insertions":2,"deletions":4},"src/basic/hexdecoct.h":{"insertions":0,"deletions":1},"src/basic/hostname-util.c":{"insertions":2,"deletions":7},"src/basic/in-addr-util.c":{"insertions":0,"deletions":6},"src/basic/in-addr-util.h":{"insertions":0,"deletions":2},"src/basic/io-util.c":{"insertions":0,"deletions":5},"src/basic/io-util.h":{"insertions":0,"deletions":3},"src/basic/json.c":{"insertions":0,"deletions":3},"src/basic/json.h":{"insertions":0,"deletions":3},"src/basic/label.c":{"insertions":1,"deletions":5},"src/basic/locale-util.c":{"insertions":1,"deletions":10},"src/basic/lockfile-util.c":{"insertions":5,"deletions":3},"src/basic/lockfile-util.h":{"insertions":0,"deletions":2},"src/basic/log.c":{"insertions":1,"deletions":8},"src/basic/login-util.c":{"insertions":1,"deletions":2},"src/basic/memfd-util.c":{"insertions":1,"deletions":4},"src/basic/memfd-util.h":{"insertions":0,"deletions":2},"src/basic/mempool.c":{"insertions":0,"deletions":3},"src/basic/mkdir-label.c":{"insertions":0,"deletions":1},"src/basic/mkdir.c":{"insertions":1,"deletions":3},"src/basic/mount-util.c":{"insertions":1,"deletions":5},"src/basic/mount-util.h":{"insertions":0,"deletions":2},"src/basic/parse-util.c":{"insertions":1,"deletions":9},"src/basic/parse-util.h":{"insertions":0,"deletions":3},"src/basic/path-util.c":{"insertions":6,"deletions":4},"src/basic/path-util.h":{"insertions":0,"deletions":2},"src/basic/prioq.c":{"insertions":1,"deletions":4},"src/basic/prioq.h":{"insertions":0,"deletions":3},"src/basic/proc-cmdline.c":{"insertions":0,"deletions":4},"src/basic/process-util.c":{"insertions":1,"deletions":6},"src/basic/process-util.h":{"insertions":0,"deletions":1},"src/basic/random-util.c":{"insertions":4,"deletions":5},"src/basic/random-util.h":{"insertions":0,"deletions":1},"src/basic/ratelimit.c":{"insertions":0,"deletions":3},"src/basic/ratelimit.h":{"insertions":0,"deletions":3},"src/basic/replace-var.c":{"insertions":1,"deletions":3},"src/basic/rlimit-util.c":{"insertions":1,"deletions":4},"src/basic/rm-rf.c":{"insertions":1,"deletions":11},"src/basic/selinux-util.c":{"insertions":1,"deletions":9},"src/basic/selinux-util.h":{"insertions":0,"deletions":1},"src/basic/sigbus.c":{"insertions":0,"deletions":2},"src/basic/signal-util.c":{"insertions":1,"deletions":5},"src/basic/siphash24.c":{"insertions":2,"deletions":1},"src/basic/siphash24.h":{"insertions":0,"deletions":2},"src/basic/smack-util.c":{"insertions":1,"deletions":6},"src/basic/smack-util.h":{"insertions":0,"deletions":1},"src/basic/socket-label.c":{"insertions":1,"deletions":5},"src/basic/socket-util.c":{"insertions":1,"deletions":4},"src/basic/socket-util.h":{"insertions":0,"deletions":3},"src/basic/stat-util.c":{"insertions":0,"deletions":4},"src/basic/stat-util.h":{"insertions":0,"deletions":2},"src/basic/strbuf.c":{"insertions":1,"deletions":1},"src/basic/strbuf.h":{"insertions":0,"deletions":2},"src/basic/string-table.c":{"insertions":0,"deletions":1},"src/basic/string-table.h":{"insertions":0,"deletions":1},"src/basic/string-util.c":{"insertions":0,"deletions":7},"src/basic/string-util.h":{"insertions":0,"deletions":2},"src/basic/strv.c":{"insertions":0,"deletions":3},"src/basic/strv.h":{"insertions":0,"deletions":3},"src/basic/strxcpyx.c":{"insertions":0,"deletions":1},"src/basic/strxcpyx.h":{"insertions":0,"deletions":2},"src/basic/syslog-util.c":{"insertions":1,"deletions":2},"src/basic/terminal-util.c":{"insertions":4,"deletions":12},"src/basic/terminal-util.h":{"insertions":0,"deletions":1},"src/basic/time-util.c":{"insertions":1,"deletions":9},"src/basic/time-util.h":{"insertions":0,"deletions":3},"src/basic/unit-name.c":{"insertions":2,"deletions":4},"src/basic/user-util.c":{"insertions":1,"deletions":11},"src/basic/utf8.c":{"insertions":2,"deletions":1},"src/basic/utf8.h":{"insertions":0,"deletions":2},"src/basic/util.c":{"insertions":50,"deletions":5},"src/basic/util.h":{"insertions":0,"deletions":3},"src/basic/verbs.c":{"insertions":1,"deletions":7},"src/basic/virt.c":{"insertions":3,"deletions":3},"src/basic/xattr-util.c":{"insertions":1,"deletions":8},"src/basic/xattr-util.h":{"insertions":0,"deletions":1},"src/basic/xml.c":{"insertions":1,"deletions":3}}},"e6a7ec4b8e33f38f578e12af9ae9ca7ddde80aac":{"author":"Lennart Poettering","email":"lennart@poettering.net","date":"2017-09-21 11:52:34 UTC","message":"io-util: add new IOVEC_INIT/IOVEC_MAKE macros\n\nThis adds IOVEC_INIT() and IOVEC_MAKE() for initializing iovec structures\nfrom a pointer and a size. On top of these IOVEC_INIT_STRING() and\nIOVEC_MAKE_STRING() are added which take a string and automatically\ndetermine the size of the string using strlen().\n\nThis patch removes the old IOVEC_SET_STRING() macro, given that\nIOVEC_MAKE_STRING() is now useful for similar purposes. Note that the\nold IOVEC_SET_STRING() invocations were two characters shorter than the\nnew ones using IOVEC_MAKE_STRING(), but I think the new syntax is more\nreadable and more generic as it simply resolves to a C99 literal\nstructure initialization. Moreover, we can use very similar syntax now\nfor initializing strings and pointer+size iovec entries. We canalso use\nthe new macros to initialize function parameters on-the-fly or array\ndefinitions. And given that we shouldn't have so many ways to do the\nsame stuff, let's just settle on the new macros.\n\n(This also converts so","insertions":206,"deletions":172,"filepaths":{"src/basic/io-util.h":{"insertions":8,"deletions":5},"src/basic/journal-importer.c":{"insertions":2,"deletions":3},"src/basic/log.c":{"insertions":23,"deletions":23},"src/core/dynamic-user.c":{"insertions":11,"deletions":6},"src/core/execute.c":{"insertions":3,"deletions":3},"src/core/show-status.c":{"insertions":7,"deletions":7},"src/coredump/coredump.c":{"insertions":16,"deletions":14},"src/journal/journal-send.c":{"insertions":41,"deletions":29},"src/journal/journald-audit.c":{"insertions":7,"deletions":7},"src/journal/journald-console.c":{"insertions":11,"deletions":11},"src/journal/journald-kmsg.c":{"insertions":33,"deletions":23},"src/journal/journald-native.c":{"insertions":1,"deletions":1},"src/journal/journald-server.c":{"insertions":15,"deletions":15},"src/journal/journald-stream.c":{"insertions":8,"deletions":7},"src/journal/journald-syslog.c":{"insertions":17,"deletions":15},"src/test/test-fileio.c":{"insertions":3,"deletions":3}}},"9aa820231414baa28e6bf02a033932cb69ff6b8b":{"author":"Zbigniew Jędrzejewski-Szmek","email":"zbyszek@in.waw.pl","date":"2016-10-30 21:37:38 UTC","message":"coredump: split out metadata gathering to a separate function\n\nIn preparation for subsequenct changes...\n\nVarious stack allocations are changed to use the heap. This might be minimally\nslower, but probably doesn't matter. The upside is that we will now properly\nfree all memory that is allocated.","insertions":158,"deletions":112,"filepaths":{"src/coredump/coredump.c":{"insertions":158,"deletions":112}}},"f45b8015513d38ee5f7cc361db9c5b88c9aae704":{"author":"Jakub Filak","email":"jakub@thefilaks.net","date":"2018-02-15 11:12:46 UTC","message":"coredump: accept hostname on command line (#8033)\n\nThis commint adds a new command line parameter to sytemd-coredump. The\nparameter should be mappend to core_pattern's placeholder %h - hostname.\n\nThe field _HOSTNAME holds the name from the kernel's namespaces which might be\ndifferent then the one comming from process' namespaces.\n\nIt is true that the real hostname is usually available in the field\nCOREDUMP_ENVIRON (environment variables) but I believe it is more reliable to\nuse the value passed by kernel.\n\n----\n\nThe length of iovec is no longer static and hence I corrected the declarations\nof the functions set_iovec_field and set_iovec_field_free.\n\nThank you @yuwata and @poettering!","insertions":7,"deletions":16,"filepaths":{"src/coredump/coredump.c":{"insertions":6,"deletions":15},"sysctl.d/50-coredump.conf.in":{"insertions":1,"deletions":1}}},"ea5cc2a8f65535a9b3f8ba39a8df13a0c770f41d":{"author":"Zbigniew Jędrzejewski-Szmek","email":"zbyszek@in.waw.pl","date":"2017-02-25 19:00:39 UTC","message":"coredump: do not try to access unitialized CONTEXT_COMM field\n\nMost of the fields in the context array come from the kernel (passed\nthrough argv), but two are special: comm and exe. We allocate them\nourselves. We forgot to initialize context[CONTEXT_COMM] with the value\nwe allocated (introduced in 9aa820231414baa28e6bf02a033932cb69ff6b8b).\nTo simplify things, just set context[CONTEXT_COMM] and context[CONTEXT_EXE],\nand free those two fields at the end.\n\nFixes #5442.","insertions":37,"deletions":53,"filepaths":{"src/coredump/coredump.c":{"insertions":37,"deletions":53}}},"3c171f0b1ec3ce1b98777cca7330727b9ebfd17d":{"author":"Lennart Poettering","email":"lennart@poettering.net","date":"2016-02-08 20:16:08 UTC","message":"coredump: rework coredumping logic\n\nThis reworks the coredumping logic so that the coredump handler invoked from the kernel only collects runtime data\nabout the crashed process, and then submits it for processing to a socket-activate coredump service, which extracts a\nstacktrace and writes the coredump to disk.\n\nThis has a number of benefits: the disk IO and stack trace generation may take a substantial amount of resources, and\nhence should better be managed by PID 1, so that resource management applies. This patch uses RuntimeMaxSec=, Nice=, OOMScoreAdjust=\nand various sandboxing settings to ensure that the coredump handler doesn't take away unbounded resources from normally\npriorized processes.\n\nThis logic is also nice since this makes sure the coredump processing and storage is delayed correctly until\n/var/systemd/coredump is mounted and writable.\n\nFixes: #2286","insertions":230,"deletions":521,"filepaths":{"Makefile.am":{"insertions":1,"deletions":11},"src/basic/socket-util.c":{"insertions":2,"deletions":1},"src/coredump/coredump.c":{"insertions":227,"deletions":467},"units/.gitignore":{"insertions":0,"deletions":1},"units/systemd-coredump.socket":{"insertions":0,"deletions":17},"units/systemd-coredump@.service.in":{"insertions":0,"deletions":24}}},"92e92d71faea0f107312f296b7756cc04281ba99":{"author":"Zbigniew Jędrzejewski-Szmek","email":"zbyszek@in.waw.pl","date":"2017-02-26 21:46:23 UTC","message":"coredump: process special crashes in an (almost) normal way\n\nWe would only log a terse message when pid1 or systemd-journald crashed.\nIt seems better to reuse the normal code paths as much as possible,\nwith the following differences:\n- if pid1 crashes, we cannot launch the helper, so we don't analyze the\n coredump, just write it to file directly from the helper invoked by the\n kernel;\n- if journald crashes, we can produce the backtrace, but we don't log full\n  structured messages.\n\nWith comparison to previous code, advantages are:\n- we go through most of the steps, so for example vacuuming is performed,\n- we gather and log more data. In particular for journald and pid1 crashes we\n  generate a backtrace, and for pid1 crashes we record the metadata (fdinfo,\n  maps, etc.),\n- coredumpctl shows pid1 crashes.\n\nA disavantage (inefficiency) is that we gather metadata for journald crashes\nwhich is then ignored because _TRANSPORT=kernel does not support structued\nmessages.\n\nMessages for the syste","insertions":67,"deletions":57,"filepaths":{"src/coredump/coredump.c":{"insertions":67,"deletions":57}}},"d14bcb4ea7b71f475fbf05ecca568b534f419b98":{"author":"Lennart Poettering","email":"lennart@poettering.net","date":"2017-02-17 10:10:35 UTC","message":"coredump: include signal name in journal metadata\n\n(Note that we only do this for the journal metadata, not for the xattrs,\nas the xattrs are only supposed to store the original 1:1 info we\nacquired from the kernel.)","insertions":6,"deletions":12,"filepaths":{"src/coredump/coredump.c":{"insertions":6,"deletions":12}}},"22e3a02b9d618bbebcf987bc1411acda367271ec":{"author":"Lennart Poettering","email":"lennart@poettering.net","date":"2017-07-17 21:36:35 UTC","message":"journald: add minimal client metadata caching\n\nCache client metadata, in order to be improve runtime behaviour under\npressure.\n\nThis is inspired by @vcaputo's work, specifically:\n\nhttps://github.com/systemd/systemd/pull/2280\n\nThat code implements related but different semantics.\n\nFor a longer explanation what this change implements please have a look\nat the long source comment this patch adds to journald-context.c.\n\nAfter this commit:\n\n        # time bash -c 'dd bs=$((1024*1024)) count=$((1*1024)) if=/dev/urandom | systemd-cat'\n        1024+0 records in\n        1024+0 records out\n        1073741824 bytes (1.1 GB, 1.0 GiB) copied, 11.2783 s, 95.2 MB/s\n\n        real\t0m11.283s\n        user\t0m0.007s\n        sys\t0m6.216s\n\nBefore this commit:\n\n        # time bash -c 'dd bs=$((1024*1024)) count=$((1*1024)) if=/dev/urandom | systemd-cat'\n        1024+0 records in\n        1024+0 records out\n        1073741824 bytes (1.1 GB, 1.0 GiB) copied, 52.0788 s, 20.6 MB/s\n\n        real\t0m52.099s\n        us","insertions":371,"deletions":851,"filepaths":{"src/journal/journald-audit.c":{"insertions":1,"deletions":1},"src/journal/journald-context.c":{"insertions":0,"deletions":588},"src/journal/journald-context.h":{"insertions":0,"deletions":92},"src/journal/journald-kmsg.c":{"insertions":1,"deletions":1},"src/journal/journald-native.c":{"insertions":3,"deletions":12},"src/journal/journald-server.c":{"insertions":346,"deletions":104},"src/journal/journald-server.h":{"insertions":1,"deletions":10},"src/journal/journald-stream.c":{"insertions":3,"deletions":18},"src/journal/journald-syslog.c":{"insertions":4,"deletions":11},"src/journal/meson.build":{"insertions":12,"deletions":14}}},"968f319679d9069af037240d0c3bcd126181cdac":{"author":"Zbigniew Jędrzejewski-Szmek","email":"zbyszek@in.waw.pl","date":"2013-06-12 04:24:34 UTC","message":"journal: allow callers to specify OBJECT_PID=\n\nWhen journald encounters a message with OBJECT_PID= set\ncoming from a priviledged process (UID==0), additional fields\nwill be added to the message:\n\nOBJECT_UID=,\nOBJECT_GID=,\nOBJECT_COMM=,\nOBJECT_EXE=,\nOBJECT_CMDLINE=,\nOBJECT_AUDIT_SESSION=,\nOBJECT_AUDIT_LOGINUID=,\nOBJECT_SYSTEMD_CGROUP=,\nOBJECT_SYSTEMD_SESSION=,\nOBJECT_SYSTEMD_OWNER_UID=,\nOBJECT_SYSTEMD_UNIT= or OBJECT_SYSTEMD_USER_UNIT=.\n\nThis is for other logging daemons, like setroubleshoot, to be able to\naugment their logs with data about the process.\n\nhttps://bugzilla.redhat.com/show_bug.cgi?id=951627","insertions":55,"deletions":157,"filepaths":{"src/journal/journald-kmsg.c":{"insertions":1,"deletions":1},"src/journal/journald-native.c":{"insertions":17,"deletions":23},"src/journal/journald-server.c":{"insertions":34,"deletions":129},"src/journal/journald-server.h":{"insertions":1,"deletions":2},"src/journal/journald-stream.c":{"insertions":1,"deletions":1},"src/journal/journald-syslog.c":{"insertions":1,"deletions":1}}},"d025f1e4dca8fc1436aff76f9e6185fe3e728daa":{"author":"Zbigniew Jędrzejewski-Szmek","email":"zbyszek@in.waw.pl","date":"2012-11-12 16:29:07 UTC","message":"build-sys: store journald code in a noinst library\n\nThe point is to allow the use of journald functions by other binaries.\nBefore, journald code was split into multiple files (journald-*.[ch]),\nbut all those files all required functions from journald.c. And\njournald.c has its own main(). Now, it is possible to link against\nthose functions, e.g. from test binaries.\n\nThis constitutes a fix for https://bugzilla.redhat.com/show_bug.cgi?id=872638.\n\nThe patch does the following:\n1. rename journald.h to journald-server.h and move corresponding code\n   to journald-server.c.\n2. add journald-server.c and other journald-*.c parts to\n   libsystemd-journal-internal.\n3. remove journald-syslog.c from test_journal_syslog_SOURCES, since\n   it is now contained in libsystemd-journal-internal.\nThere are no code changes, apart from the removal of a few static's,\nto allow function calls between files.","insertions":1524,"deletions":1564,"filepaths":{"Makefile.am":{"insertions":38,"deletions":39},"src/journal/journald-console.c":{"insertions":1,"deletions":1},"src/journal/journald-console.h":{"insertions":1,"deletions":1},"src/journal/journald-gperf.gperf":{"insertions":1,"deletions":1},"src/journal/journald-kmsg.c":{"insertions":1,"deletions":1},"src/journal/journald-kmsg.h":{"insertions":1,"deletions":1},"src/journal/journald-native.c":{"insertions":1,"deletions":1},"src/journal/journald-native.h":{"insertions":1,"deletions":1},"src/journal/journald-server.c":{"insertions":0,"deletions":1502},"src/journal/journald-stream.c":{"insertions":1,"deletions":1},"src/journal/journald-stream.h":{"insertions":1,"deletions":1},"src/journal/journald-syslog.c":{"insertions":1,"deletions":1},"src/journal/journald-syslog.h":{"insertions":1,"deletions":1},"src/journal/journald.c":{"insertions":1475,"deletions":1},"src/journal/{journald-server.h => journald.h}":{"insertions":0,"deletions":11}}},"19cace379f3f680d3201cd257ab3ca6708b2d45d":{"author":"Lennart Poettering","email":"lennart@poettering.net","date":"2013-07-19 17:52:30 UTC","message":"journald: after the cgroup rework processes may be in both user and system units at the same time","insertions":16,"deletions":17,"filepaths":{"src/journal/journald-server.c":{"insertions":15,"deletions":16},"src/journal/journald-server.h":{"insertions":1,"deletions":1}}},"052c57f132f04a3cf4148f87561618da1a6908b4":{"author":"Zbigniew Jędrzejewski-Szmek","email":"zbyszek@in.waw.pl","date":"2018-12-05 21:45:02 UTC","message":"journald: set a limit on the number of fields (1k)\n\nWe allocate a iovec entry for each field, so with many short entries,\nour memory usage and processing time can be large, even with a relatively\nsmall message size. Let's refuse overly long entries.\n\nCVE-2018-16865\nhttps://bugzilla.redhat.com/show_bug.cgi?id=1653861\n\nWhat from I can see, the problem is not from an alloca, despite what the CVE\ndescription says, but from the attack multiplication that comes from creating\nmany very small iovecs: (void* + size_t) for each three bytes of input message.","insertions":0,"deletions":8,"filepaths":{"src/journal/journald-native.c":{"insertions":0,"deletions":5},"src/shared/journal-importer.h":{"insertions":0,"deletions":3}}},"ef4d6abe7c7fab6cbff975b32e76b09feee56074":{"author":"Zbigniew Jędrzejewski-Szmek","email":"zbyszek@in.waw.pl","date":"2018-12-07 09:48:10 UTC","message":"journal-remote: set a limit on the number of fields in a message\n\nExisting use of E2BIG is replaced with ENOBUFS (entry too long), and E2BIG is\nreused for the new error condition (too many fields).\n\nThis matches the change done for systemd-journald, hence forming the second\npart of the fix for CVE-2018-16865\n(https://bugzilla.redhat.com/show_bug.cgi?id=1653861).","insertions":3,"deletions":12,"filepaths":{"src/journal-remote/journal-remote-main.c":{"insertions":2,"deletions":5},"src/journal-remote/journal-remote.c":{"insertions":0,"deletions":3},"src/shared/journal-importer.c":{"insertions":1,"deletions":4}}},"12a717f8347f3daf0ae46a2b71c7d011d9c12fea":{"author":"Zbigniew Jędrzejewski-Szmek","email":"zbyszek@in.waw.pl","date":"2014-12-26 13:34:18 UTC","message":"journald: fix off by one in native transport\n\nhttps://bugzilla.redhat.com/show_bug.cgi?id=1177184","insertions":2,"deletions":2,"filepaths":{"src/journal/journald-native.c":{"insertions":2,"deletions":2}}},"d3070fbdf6077d7da9dbafa198fff8dea712d2ff":{"author":"Lennart Poettering","email":"lennart@poettering.net","date":"2017-11-02 18:43:32 UTC","message":"core: implement /run/systemd/units/-based path for passing unit info from PID 1 to journald\n\nAnd let's make use of it to implement two new unit settings with it:\n\n1. LogLevelMax= is a new per-unit setting that may be used to configure\n   log priority filtering: set it to LogLevelMax=notice and only\n   messages of level \"notice\" and lower (i.e. more important) will be\n   processed, all others are dropped.\n\n2. LogExtraFields= is a new per-unit setting for configuring per-unit\n   journal fields, that are implicitly included in every log record\n   generated by the unit's processes. It takes field/value pairs in the\n   form of FOO=BAR.\n\nAlso, related to this, one exisiting unit setting is ported to this new\nfacility:\n\n3. The invocation ID is now pulled from /run/systemd/units/ instead of\n   cgroupfs xattrs. This substantially relaxes requirements of systemd\n   on the kernel version and the privileges it runs with (specifically,\n   cgroupfs xattrs are not available in containers, since they a","insertions":87,"deletions":766,"filepaths":{"src/basic/log.c":{"insertions":3,"deletions":3},"src/basic/log.h":{"insertions":2,"deletions":2},"src/core/dbus-execute.c":{"insertions":1,"deletions":128},"src/core/execute.c":{"insertions":2,"deletions":38},"src/core/execute.h":{"insertions":0,"deletions":7},"src/core/load-fragment-gperf.gperf.m4":{"insertions":0,"deletions":2},"src/core/load-fragment.c":{"insertions":0,"deletions":74},"src/core/load-fragment.h":{"insertions":0,"deletions":1},"src/core/manager.c":{"insertions":1,"deletions":8},"src/core/mount.c":{"insertions":0,"deletions":2},"src/core/scope.c":{"insertions":0,"deletions":2},"src/core/service.c":{"insertions":0,"deletions":2},"src/core/socket.c":{"insertions":0,"deletions":2},"src/core/swap.c":{"insertions":0,"deletions":2},"src/core/unit.c":{"insertions":2,"deletions":214},"src/core/unit.h":{"insertions":0,"deletions":8},"src/journal/journald-audit.c":{"insertions":10,"deletions":9},"src/journal/journald-context.c":{"insertions":16,"deletions":135},"src/journal/journald-context.h":{"insertions":0,"deletions":21},"src/journal/journald-kmsg.c":{"insertions":4,"deletions":5},"src/journal/journald-native.c":{"insertions":10,"deletions":15},"src/journal/journald-server.c":{"insertions":11,"deletions":22},"src/journal/journald-server.h":{"insertions":1,"deletions":1},"src/journal/journald-stream.c":{"insertions":11,"deletions":17},"src/journal/journald-syslog.c":{"insertions":9,"deletions":15},"src/shared/bus-unit-util.c":{"insertions":1,"deletions":26},"src/shared/conf-parser.c":{"insertions":3,"deletions":5}}},"b18453eda671277e44d4097e6f33b609d14a2d73":{"author":"Zbigniew Jędrzejewski-Szmek","email":"zbyszek@in.waw.pl","date":"2016-11-06 02:40:54 UTC","message":"Move export format parsing from src/journal-remote/ to src/basic/\n\nNo functional change.","insertions":513,"deletions":582,"filepaths":{"Makefile.am":{"insertions":1,"deletions":3},"src/basic/journal-importer.c":{"insertions":0,"deletions":481},"src/basic/journal-importer.h":{"insertions":0,"deletions":70},"src/coredump/coredump.c":{"insertions":1,"deletions":1},"src/journal-remote/journal-remote-parse.c":{"insertions":419,"deletions":12},"src/journal-remote/journal-remote-parse.h":{"insertions":33,"deletions":2},"src/journal-remote/journal-remote-write.c":{"insertions":33,"deletions":0},"src/journal-remote/journal-remote-write.h":{"insertions":11,"deletions":1},"src/journal-remote/journal-remote.c":{"insertions":10,"deletions":11},"src/journal/journald-native.c":{"insertions":0,"deletions":1},"src/journal/journald-native.h":{"insertions":5,"deletions":0}}},"25cad95c82f4c45d6d7c872c39bbd72bc4946edb":{"author":"Yu Watanabe","email":"watanabe.yu+github@gmail.com","date":"2018-11-12 09:08:45 UTC","message":"fuzz: decrease DATA_SIZE_MAX\n\nFixes oss-fuzz#8658.","insertions":0,"deletions":10,"filepaths":{"src/basic/journal-importer.h":{"insertions":0,"deletions":5},"src/coredump/coredump.c":{"insertions":0,"deletions":5}}},"7fdb237f5473cb8fc2129e57e8a0039526dcb4fd":{"author":"Zbigniew Jędrzejewski-Szmek","email":"zbyszek@in.waw.pl","date":"2018-12-07 11:47:14 UTC","message":"journal-remote: verify entry length from header\n\nCalling mhd_respond(), which ulimately calls MHD_queue_response() is\nineffective at point, becuase MHD_queue_response() immediately returns\nMHD_NO signifying an error, because the connection is in state\nMHD_CONNECTION_CONTINUE_SENT.\n\nAs Christian Grothoff kindly explained:\n> You are likely calling MHD_queue_repsonse() too late: once you are\n> receiving upload_data, HTTP forces you to process it all. At this time,\n> MHD has already sent \"100 continue\" and cannot take it back (hence you\n> get MHD_NO!).\n>\n> In your request handler, the first time when you are called for a\n> connection (and when hence *upload_data_size == 0 and upload_data ==\n> NULL) you must check the content-length header and react (with\n> MHD_queue_response) based on this (to prevent MHD from automatically\n> generating 100 continue).\n\nIf we ever encounter this kind of error, print a warning and immediately\nabort the connection. (The alternative would be to keep reading the","insertions":10,"deletions":24,"filepaths":{"src/journal-remote/journal-remote-main.c":{"insertions":10,"deletions":24}}},"c064d8db402de0c0d609aabcfc722750856a1f01":{"author":"Zbigniew Jędrzejewski-Szmek","email":"zbyszek@in.waw.pl","date":"2018-05-16 08:21:58 UTC","message":"journal-remote: split out µhttpd support and main() into a separate file\n\nThis is in preparation to reusing the RemoteServer in other concepts.\nI tried to keep changes to minimum:\n- arg_* global variables are now passed as state in RemoteServer\n- exported functions get the \"journal_remote_\" prefix\n- some variables are renamed\n\nIn particular, there is an ugly global RemoveServer* variable. It was originally\nadded because µhttpd did not allow state to be passed to the callbacks. I'm not\nsure if this has been remediated in µhttpd, but either way, this is not changed\nhere, the global variable is only renamed for clarity.","insertions":1162,"deletions":1242,"filepaths":{"meson.build":{"insertions":1,"deletions":2},"src/journal-remote/journal-remote-main.c":{"insertions":0,"deletions":1145},"src/journal-remote/journal-remote.c":{"insertions":1152,"deletions":54},"src/journal-remote/journal-remote.h":{"insertions":1,"deletions":22},"src/journal-remote/meson.build":{"insertions":8,"deletions":19}}},"8201af08fa09c2bd0f005fbe262f27e2c5bd2d86":{"author":"Zbigniew Jędrzejewski-Szmek","email":"zbyszek@in.waw.pl","date":"2014-06-22 17:36:31 UTC","message":"journal-remote: allow splitting incoming logs by source host\n\nPreviously existing scheme where the file name would be based on\nthe source was just too ugly and unpredicatable. Now there are\nonly two options:\n  1. just one file (until rotation),\n  2. one file per source host, using the hostname as filename part.\nFor the cases where the source is specified by the user, only\noption one is allowed, and the full of the file must be specified.","insertions":111,"deletions":388,"filepaths":{"man/systemd-journal-remote.xml":{"insertions":0,"deletions":14},"src/journal-remote/journal-gatewayd.c":{"insertions":1,"deletions":1},"src/journal-remote/journal-remote-parse.c":{"insertions":1,"deletions":4},"src/journal-remote/journal-remote-parse.h":{"insertions":1,"deletions":1},"src/journal-remote/journal-remote-write.h":{"insertions":0,"deletions":7},"src/journal-remote/journal-remote.c":{"insertions":105,"deletions":342},"src/journal-remote/journal-remote.conf.in":{"insertions":0,"deletions":1},"src/journal-remote/journal-upload.c":{"insertions":1,"deletions":11},"src/journal-remote/microhttpd-util.c":{"insertions":1,"deletions":6},"src/journal-remote/microhttpd-util.h":{"insertions":1,"deletions":1}}},"0e72da6fe8671d49b4d458519f5ac7600fd04f03":{"author":"Zbigniew Jędrzejewski-Szmek","email":"zbyszek@in.waw.pl","date":"2015-03-13 01:29:28 UTC","message":"journal-remote: downgrade routine messages to debug\n\nhttps://bugs.freedesktop.org/show_bug.cgi?id=89486","insertions":22,"deletions":22,"filepaths":{"src/journal-remote/journal-remote-parse.c":{"insertions":1,"deletions":1},"src/journal-remote/journal-remote-write.c":{"insertions":1,"deletions":1},"src/journal-remote/journal-remote.c":{"insertions":18,"deletions":18},"src/journal-remote/microhttpd-util.c":{"insertions":2,"deletions":2}}},"fdfccdbc985944a57017a25f44dd6acc1a937bab":{"author":"Zbigniew Jędrzejewski-Szmek","email":"zbyszek@in.waw.pl","date":"2012-11-01 22:08:03 UTC","message":"journal-remote: tool to receive messages over the network","insertions":1,"deletions":1693,"filepaths":{"Makefile-man.am":{"insertions":0,"deletions":2},"Makefile.am":{"insertions":1,"deletions":13},"man/systemd-journal-remote.xml":{"insertions":0,"deletions":289},"src/journal/journal-gatewayd.c":{"insertions":0,"deletions":1},"src/journal/journal-remote-parse.c":{"insertions":0,"deletions":415},"src/journal/journal-remote-parse.h":{"insertions":0,"deletions":60},"src/journal/journal-remote-write.c":{"insertions":0,"deletions":124},"src/journal/journal-remote-write.h":{"insertions":0,"deletions":51},"src/journal/journal-remote.c":{"insertions":0,"deletions":738}}},"d4e98880e9e2118831f23b4572eae698b4dd27fb":{"author":"Zbigniew Jędrzejewski-Szmek","email":"zbyszek@in.waw.pl","date":"2018-11-21 23:51:29 UTC","message":"Also drop a few more unnecessary uses of synthethic errno","insertions":7,"deletions":5,"filepaths":{"src/journal-remote/journal-remote.c":{"insertions":1,"deletions":1},"src/journal-remote/journal-upload.c":{"insertions":2,"deletions":1},"src/udev/udevd.c":{"insertions":4,"deletions":3}}},"ff55c3c7327e6ad8ab139aef52d498386d4f4a72":{"author":"David Herrmann","email":"dh.herrmann@gmail.com","date":"2015-03-13 12:51:55 UTC","message":"journal-remote: stop using EWOULDBLOCK\n\nThere is no reason to ever use EWOULDBLOCK. It's equivalent to EAGAIN on\nall architectures on linux.","insertions":6,"deletions":6,"filepaths":{"src/journal-remote/journal-remote-parse.c":{"insertions":4,"deletions":4},"src/journal-remote/journal-remote.c":{"insertions":2,"deletions":2}}},"baaa35ad706419ae5aacc11d2bece5bd8b73ee42":{"author":"Zbigniew Jędrzejewski-Szmek","email":"zbyszek@in.waw.pl","date":"2018-11-20 22:40:44 UTC","message":"coccinelle: make use of SYNTHETIC_ERRNO\n\nIdeally, coccinelle would strip unnecessary braces too. But I do not see any\noption in coccinelle for this, so instead, I edited the patch text using\nsearch&replace to remove the braces. Unfortunately this is not fully automatic,\nin particular it didn't deal well with if-else-if-else blocks and ifdefs, so\nthere is an increased likelikehood be some bugs in such spots.\n\nI also removed part of the patch that coccinelle generated for udev, where we\nreturns -1 for failure. This should be fixed independently.","insertions":2325,"deletions":1946,"filepaths":{"coccinelle/synthetic-errno.cocci":{"insertions":0,"deletions":35},"src/ac-power/ac-power.c":{"insertions":4,"deletions":4},"src/activate/activate.c":{"insertions":22,"deletions":17},"src/analyze/analyze.c":{"insertions":24,"deletions":19},"src/ask-password/ask-password.c":{"insertions":4,"deletions":4},"src/basic/cgroup-util.c":{"insertions":5,"deletions":4},"src/basic/fileio.c":{"insertions":4,"deletions":6},"src/basic/log.h":{"insertions":2,"deletions":2},"src/basic/process-util.c":{"insertions":2,"deletions":1},"src/basic/rm-rf.c":{"insertions":8,"deletions":8},"src/binfmt/binfmt.c":{"insertions":8,"deletions":6},"src/boot/bless-boot.c":{"insertions":28,"deletions":26},"src/boot/bootctl.c":{"insertions":21,"deletions":20},"src/busctl/busctl-introspect.c":{"insertions":164,"deletions":133},"src/busctl/busctl.c":{"insertions":20,"deletions":17},"src/cgls/cgls.c":{"insertions":4,"deletions":3},"src/cgtop/cgtop.c":{"insertions":16,"deletions":15},"src/core/dbus.c":{"insertions":4,"deletions":3},"src/core/job.c":{"insertions":4,"deletions":4},"src/core/machine-id-setup.c":{"insertions":4,"deletions":4},"src/core/main.c":{"insertions":34,"deletions":27},"src/core/namespace.c":{"insertions":20,"deletions":18},"src/core/path.c":{"insertions":4,"deletions":3},"src/core/shutdown.c":{"insertions":4,"deletions":3},"src/core/swap.c":{"insertions":4,"deletions":4},"src/coredump/coredump.c":{"insertions":21,"deletions":19},"src/coredump/coredumpctl.c":{"insertions":16,"deletions":12},"src/cryptsetup/cryptsetup-generator.c":{"insertions":8,"deletions":7},"src/cryptsetup/cryptsetup.c":{"insertions":14,"deletions":12},"src/debug-generator/debug-generator.c":{"insertions":4,"deletions":3},"src/delta/delta.c":{"insertions":10,"deletions":8},"src/detect-virt/detect-virt.c":{"insertions":4,"deletions":4},"src/dissect/dissect.c":{"insertions":12,"deletions":10},"src/escape/escape.c":{"insertions":36,"deletions":27},"src/firstboot/firstboot.c":{"insertions":24,"deletions":18},"src/fstab-generator/fstab-generator.c":{"insertions":4,"deletions":3},"src/hibernate-resume/hibernate-resume-generator.c":{"insertions":4,"deletions":3},"src/import/curl-util.c":{"insertions":8,"deletions":6},"src/import/export.c":{"insertions":4,"deletions":3},"src/import/pull-common.c":{"insertions":8,"deletions":6},"src/import/pull-job.c":{"insertions":28,"deletions":18},"src/import/pull.c":{"insertions":4,"deletions":3},"src/initctl/initctl.c":{"insertions":4,"deletions":3},"src/journal-remote/journal-gatewayd.c":{"insertions":26,"deletions":20},"src/journal-remote/journal-remote-main.c":{"insertions":102,"deletions":76},"src/journal-remote/journal-upload-journal.c":{"insertions":4,"deletions":3},"src/journal-remote/journal-upload.c":{"insertions":76,"deletions":63},"src/journal-remote/microhttpd-util.c":{"insertions":6,"deletions":4},"src/journal/cat.c":{"insertions":4,"deletions":3},"src/journal/catalog.c":{"insertions":20,"deletions":21},"src/journal/journal-file.c":{"insertions":175,"deletions":147},"src/journal/journalctl.c":{"insertions":22,"deletions":18},"src/journal/journald-server.c":{"insertions":20,"deletions":16},"src/journal/journald-stream.c":{"insertions":4,"deletions":4},"src/journal/sd-journal.c":{"insertions":23,"deletions":23},"src/libsystemd-network/dhcp-packet.c":{"insertions":45,"deletions":37},"src/libsystemd/sd-bus/bus-message.c":{"insertions":5,"deletions":7},"src/libsystemd/sd-device/sd-device.c":{"insertions":8,"deletions":8},"src/libsystemd/sd-netlink/sd-netlink.c":{"insertions":8,"deletions":8},"src/locale/localectl.c":{"insertions":4,"deletions":3},"src/login/inhibit.c":{"insertions":4,"deletions":3},"src/login/loginctl.c":{"insertions":16,"deletions":13},"src/login/logind-button.c":{"insertions":4,"deletions":4},"src/login/logind-dbus.c":{"insertions":4,"deletions":4},"src/login/logind-session-device.c":{"insertions":4,"deletions":3},"src/login/logind-session.c":{"insertions":8,"deletions":8},"src/login/logind.c":{"insertions":4,"deletions":4},"src/login/user-runtime-dir.c":{"insertions":8,"deletions":6},"src/machine-id-setup/machine-id-setup-main.c":{"insertions":4,"deletions":3},"src/machine/machinectl.c":{"insertions":35,"deletions":27},"src/mount/mount-tool.c":{"insertions":55,"deletions":44},"src/notify/notify.c":{"insertions":8,"deletions":6},"src/nspawn/nspawn-cgroup.c":{"insertions":2,"deletions":2},"src/nspawn/nspawn-mount.c":{"insertions":9,"deletions":9},"src/nspawn/nspawn-setuid.c":{"insertions":40,"deletions":30},"src/nspawn/nspawn.c":{"insertions":214,"deletions":163},"src/partition/growfs.c":{"insertions":5,"deletions":4},"src/partition/makefs.c":{"insertions":4,"deletions":3},"src/path/path.c":{"insertions":2,"deletions":2},"src/portable/portablectl.c":{"insertions":16,"deletions":12},"src/quotacheck/quotacheck.c":{"insertions":4,"deletions":3},"src/random-seed/random-seed.c":{"insertions":12,"deletions":9},"src/remount-fs/remount-fs.c":{"insertions":4,"deletions":3},"src/resolve/resolvconf-compat.c":{"insertions":20,"deletions":17},"src/resolve/resolvectl.c":{"insertions":81,"deletions":65},"src/resolve/resolved-dns-dnssec.c":{"insertions":4,"deletions":4},"src/resolve/resolved-dns-packet.c":{"insertions":4,"deletions":4},"src/resolve/resolved-dns-transaction.c":{"insertions":9,"deletions":8},"src/resolve/resolved-dnssd.c":{"insertions":4,"deletions":4},"src/resolve/resolved-dnstls-gnutls.c":{"insertions":4,"deletions":6},"src/resolve/resolved-dnstls-openssl.c":{"insertions":2,"deletions":3},"src/resolve/resolved-etc-hosts.c":{"insertions":8,"deletions":8},"src/resolve/resolved-manager.c":{"insertions":12,"deletions":9},"src/rfkill/rfkill.c":{"insertions":4,"deletions":3},"src/run/run.c":{"insertions":56,"deletions":43},"src/shared/bootspec.c":{"insertions":8,"deletions":7},"src/shared/bus-unit-util.c":{"insertions":46,"deletions":42},"src/shared/bus-util.c":{"insertions":5,"deletions":3},"src/shared/dissect-image.c":{"insertions":4,"deletions":3},"src/shared/dropin.c":{"insertions":4,"deletions":4},"src/shared/efivars.c":{"insertions":4,"deletions":3},"src/shared/generator.c":{"insertions":12,"deletions":12},"src/shared/install.c":{"insertions":8,"deletions":7},"src/shared/journal-importer.c":{"insertions":17,"deletions":16},"src/shared/logs-show.c":{"insertions":28,"deletions":21},"src/shared/seccomp-util.c":{"insertions":4,"deletions":4},"src/shared/serialize.c":{"insertions":4,"deletions":4},"src/shared/sleep-config.c":{"insertions":2,"deletions":2},"src/shared/verbs.c":{"insertions":8,"deletions":6},"src/sleep/sleep.c":{"insertions":21,"deletions":17},"src/socket-proxy/socket-proxyd.c":{"insertions":16,"deletions":12},"src/stdio-bridge/stdio-bridge.c":{"insertions":2,"deletions":2},"src/sysctl/sysctl.c":{"insertions":4,"deletions":3},"src/systemctl/systemctl.c":{"insertions":99,"deletions":84},"src/sysusers/sysusers.c":{"insertions":16,"deletions":13},"src/timedate/timedatectl.c":{"insertions":8,"deletions":6},"src/timesync/timesyncd-manager.c":{"insertions":4,"deletions":3},"src/tmpfiles/tmpfiles.c":{"insertions":52,"deletions":47},"src/tty-ask-password-agent/tty-ask-password-agent.c":{"insertions":20,"deletions":15},"src/udev/mtd_probe/probe_smartmedia.c":{"insertions":16,"deletions":12},"src/udev/udev-builtin-kmod.c":{"insertions":4,"deletions":3},"src/udev/udev-event.c":{"insertions":4,"deletions":3},"src/udev/udev-rules.c":{"insertions":4,"deletions":4},"src/udev/udevadm-hwdb.c":{"insertions":4,"deletions":3},"src/udev/udevadm-settle.c":{"insertions":2,"deletions":3},"src/udev/udevadm-test-builtin.c":{"insertions":8,"deletions":6},"src/udev/udevadm-test.c":{"insertions":8,"deletions":6},"src/user-sessions/user-sessions.c":{"insertions":6,"deletions":4},"src/volatile-root/volatile-root.c":{"insertions":20,"deletions":15}}},"a6aadf4ae0bae185dc4c414d492a4a781c80ffe5":{"author":"Yu Watanabe","email":"watanabe.yu+github@gmail.com","date":"2018-08-08 06:06:36 UTC","message":"journal: fix syslog_parse_identifier()\n\nFixes #9829.","insertions":5,"deletions":11,"filepaths":{"src/journal/journald-syslog.c":{"insertions":3,"deletions":3},"src/journal/test-journal-syslog.c":{"insertions":2,"deletions":8}}},"8595102d3ddde6d25c282f965573a6de34ab4421":{"author":"Yu Watanabe","email":"watanabe.yu+github@gmail.com","date":"2018-08-10 02:07:54 UTC","message":"journal: do not remove multiple spaces after identifier in syslog message\n\nSingle space is used as separator.\nC.f. discussions in #156.\n\nFixes #9839 introduced by a6aadf4ae0bae185dc4c414d492a4a781c80ffe5.","insertions":11,"deletions":17,"filepaths":{"src/journal/journald-syslog.c":{"insertions":1,"deletions":3},"src/journal/test-journal-syslog.c":{"insertions":10,"deletions":14}}},"ec5ff4445cca6a1d786b8da36cf6fe0acc0b94c8":{"author":"Filipe Brandenburger","email":"filbranden@google.com","date":"2015-06-11 05:33:44 UTC","message":"journald: do not strip leading whitespace from messages\n\nKeep leading whitespace for compatibility with older syslog\nimplementations.  Also useful when piping formatted output to the\n`logger` command.  Keep removing trailing whitespace.\n\nTested with `pstree | logger` and checking that the output of\n`journalctl | tail` included aligned and formatted output.\n\nConfirmed that all test cases still pass as expected.","insertions":1,"deletions":2,"filepaths":{"src/journal/journald-syslog.c":{"insertions":1,"deletions":2}}},"e88baee88fad8bc59d33b55a7a2d640ef9e16cd6":{"author":"Zbigniew Jędrzejewski-Szmek","email":"zbyszek@in.waw.pl","date":"2012-10-13 09:31:54 UTC","message":"journald: properly update message size after stripping the identifier\n\nValgrind says:\n==29176== Conditional jump or move depends on uninitialised value(s)\n==29176==    at 0x412A85: cunescape_length_with_prefix (util.c:1565)\n==29176==    by 0x40B351: dev_kmsg_record (journald-kmsg.c:301)\n==29176==    by 0x40B653: server_read_dev_kmsg (journald-kmsg.c:347)\n==29176==    by 0x40B701: server_flush_dev_kmsg (journald-kmsg.c:365)\n==29176==    by 0x409DE7: main (journald.c:1535)","insertions":5,"deletions":63,"filepaths":{".gitignore":{"insertions":0,"deletions":1},"Makefile.am":{"insertions":0,"deletions":12},"src/journal/journald-kmsg.c":{"insertions":1,"deletions":1},"src/journal/journald-syslog.c":{"insertions":3,"deletions":4},"src/journal/journald-syslog.h":{"insertions":1,"deletions":1},"src/journal/test-journal-syslog.c":{"insertions":0,"deletions":44}}},"787784c4c1b24a13207d18b415d60483cfbdeaa3":{"author":"Ronny Chevalier","email":"chevalier.ronny@gmail.com","date":"2014-11-30 01:16:19 UTC","message":"tests: use assert_se instead of assert\n\nOtherwise they can be optimized away with -DNDEBUG","insertions":94,"deletions":94,"filepaths":{"src/journal/test-catalog.c":{"insertions":8,"deletions":8},"src/journal/test-compress.c":{"insertions":9,"deletions":9},"src/journal/test-journal-syslog.c":{"insertions":3,"deletions":3},"src/journal/test-journal-verify.c":{"insertions":3,"deletions":3},"src/journal/test-journal.c":{"insertions":33,"deletions":33},"src/journal/test-mmap-cache.c":{"insertions":11,"deletions":11},"src/libsystemd-network/test-icmp6-rs.c":{"insertions":18,"deletions":18},"src/login/test-inhibit.c":{"insertions":9,"deletions":9}}},"a5ee33b951cfa22db53d0274c9c6c0d9d4dae39d":{"author":"Yu Watanabe","email":"watanabe.yu+github@gmail.com","date":"2018-08-08 09:27:15 UTC","message":"syslog: fix segfault in syslog_parse_priority()","insertions":9,"deletions":31,"filepaths":{"src/basic/syslog-util.c":{"insertions":9,"deletions":11},"src/journal/test-journal-syslog.c":{"insertions":0,"deletions":20}}},"e0b6d3cabe69c845969c90581f5b1b16cdbad5df":{"author":"Zbigniew Jędrzejewski-Szmek","email":"zbyszek@in.waw.pl","date":"2018-01-15 10:14:34 UTC","message":" wsBcBAABCAAQBQJaXH8KCRBK7hj4Ov3rIwAAdHIIAKTT+iZrKQeekc5XPKQF3MOc\n R//y7VGEyoP3CbXlyY9dtuO9/Hlydinlu3qCdW4vJzmZd5kcroXb0Nt8+KgVB3bf\n hY7aq5Z7PPYoQ99Fya1jOoWKlE74dDJeRQf3LAINLjwxEv/uXHSSjfizX7Xc/PAB\n N8ZpjXyA5El4YVvj37qyqc5aJ39Ifw0gb/33MAupwB4pq6yGOOsdoeirKDY/QE4G\n G1Dir/iwxIsnEEIhrGq8ufJLyjJmSFdZQ9ievU/sv1/e47WSZZZxW3g84ykQ/YG1\n ZQlaHnLJJ/QlhtHRxckHh4FgnUkJPpvU7kkMPiUZuYtX06gO/WKCtf9Vxahd4mY=\n =w0SF\n -----END PGP SIGNATURE-----\n \n\nMerge pull request #7816 from poettering/chase-pid\n\nMake MAINPID= and PIDFile= handling more restrictive (and other stuff)","insertions":99,"deletions":533,"filepaths":{"coccinelle/enotsup.cocci":{"insertions":0,"deletions":4},"man/systemd-notify.xml":{"insertions":0,"deletions":9},"man/systemd.service.xml":{"insertions":10,"deletions":8},"src/basic/fs-util.c":{"insertions":0,"deletions":60},"src/basic/fs-util.h":{"insertions":3,"deletions":5},"src/core/dbus-util.c":{"insertions":3,"deletions":3},"src/core/manager.c":{"insertions":9,"deletions":17},"src/core/service.c":{"insertions":33,"deletions":104},"src/core/unit.h":{"insertions":1,"deletions":1},"src/libsystemd/sd-daemon/sd-daemon.c":{"insertions":10,"deletions":19},"src/notify/notify.c":{"insertions":2,"deletions":36},"src/test/test-fs-util.c":{"insertions":1,"deletions":54},"src/udev/net/ethtool-util.c":{"insertions":26,"deletions":25},"test/TEST-20-MAINPIDGAMES/Makefile":{"insertions":0,"deletions":4},"test/TEST-20-MAINPIDGAMES/test.sh":{"insertions":0,"deletions":42},"test/TEST-20-MAINPIDGAMES/testsuite.sh":{"insertions":0,"deletions":141},"test/test-functions":{"insertions":1,"deletions":1}}},"c5abba08873903d80a2dcdd46aace959fcae1b0f":{"author":"Lennart Poettering","email":"lennart@poettering.net","date":"2010-06-24 03:17:02 UTC","message":"man: document systemd-notify","insertions":0,"deletions":168,"filepaths":{"Makefile.am":{"insertions":0,"deletions":1},"man/systemd-notify.xml":{"insertions":0,"deletions":167}}},"798d3a524ea57aaf40cb53858aaa45ec702f012d":{"author":"Zbigniew Jędrzejewski-Szmek","email":"zbyszek@in.waw.pl","date":"2015-02-04 02:14:13 UTC","message":"Reindent man pages to 2ch","insertions":35576,"deletions":31258,"filepaths":{"CODING_STYLE":{"insertions":1,"deletions":2},"man/binfmt.d.xml":{"insertions":77,"deletions":76},"man/bootchart.conf.xml":{"insertions":144,"deletions":145},"man/bootctl.xml":{"insertions":91,"deletions":89},"man/bootup.xml":{"insertions":292,"deletions":270},"man/coredumpctl.xml":{"insertions":223,"deletions":212},"man/crypttab.xml":{"insertions":383,"deletions":360},"man/daemon.xml":{"insertions":894,"deletions":702},"man/file-hierarchy.xml":{"insertions":952,"deletions":790},"man/halt.xml":{"insertions":147,"deletions":143},"man/hostname.xml":{"insertions":80,"deletions":76},"man/hostnamectl.xml":{"insertions":272,"deletions":235},"man/journald.conf.xml":{"insertions":459,"deletions":355},"man/kernel-command-line.xml":{"insertions":371,"deletions":345},"man/locale.conf.xml":{"insertions":131,"deletions":126},"man/localectl.xml":{"insertions":223,"deletions":196},"man/localtime.xml":{"insertions":80,"deletions":77},"man/loginctl.xml":{"insertions":481,"deletions":390},"man/logind.conf.xml":{"insertions":340,"deletions":268},"man/machine-id.xml":{"insertions":119,"deletions":111},"man/machine-info.xml":{"insertions":181,"deletions":157},"man/machinectl.xml":{"insertions":935,"deletions":733},"man/modules-load.d.xml":{"insertions":77,"deletions":76},"man/nss-myhostname.xml":{"insertions":122,"deletions":111},"man/nss-mymachines.xml":{"insertions":83,"deletions":79},"man/os-release.xml":{"insertions":366,"deletions":293},"man/pam_systemd.xml":{"insertions":305,"deletions":263},"man/resolved.conf.xml":{"insertions":122,"deletions":105},"man/runlevel.xml":{"insertions":130,"deletions":123},"man/sd-daemon.xml":{"insertions":114,"deletions":111},"man/sd-id128.xml":{"insertions":139,"deletions":132},"man/sd-journal.xml":{"insertions":102,"deletions":100},"man/sd-login.xml":{"insertions":113,"deletions":110},"man/sd_booted.xml":{"insertions":72,"deletions":70},"man/sd_bus_message_get_cookie.xml":{"insertions":126,"deletions":120},"man/sd_bus_message_get_monotonic_usec.xml":{"insertions":164,"deletions":155},"man/sd_bus_request_name.xml":{"insertions":202,"deletions":184},"man/sd_get_seats.xml":{"insertions":115,"deletions":115},"man/sd_id128_get_machine.xml":{"insertions":111,"deletions":103},"man/sd_id128_randomize.xml":{"insertions":90,"deletions":88},"man/sd_id128_to_string.xml":{"insertions":110,"deletions":106},"man/sd_is_fifo.xml":{"insertions":183,"deletions":175},"man/sd_journal_add_match.xml":{"insertions":189,"deletions":177},"man/sd_journal_get_catalog.xml":{"insertions":115,"deletions":111},"man/sd_journal_get_cursor.xml":{"insertions":124,"deletions":118},"man/sd_journal_get_cutoff_realtime_usec.xml":{"insertions":128,"deletions":119},"man/sd_journal_get_data.xml":{"insertions":220,"deletions":205},"man/sd_journal_get_fd.xml":{"insertions":306,"deletions":289},"man/sd_journal_get_realtime_usec.xml":{"insertions":120,"deletions":115},"man/sd_journal_get_usage.xml":{"insertions":77,"deletions":74},"man/sd_journal_next.xml":{"insertions":179,"deletions":173},"man/sd_journal_open.xml":{"insertions":227,"deletions":213},"man/sd_journal_print.xml":{"insertions":242,"deletions":232},"man/sd_journal_query_unique.xml":{"insertions":181,"deletions":172},"man/sd_journal_seek_head.xml":{"insertions":153,"deletions":146},"man/sd_journal_stream_fd.xml":{"insertions":135,"deletions":128},"man/sd_listen_fds.xml":{"insertions":160,"deletions":151},"man/sd_login_monitor_new.xml":{"insertions":213,"deletions":201},"man/sd_machine_get_class.xml":{"insertions":100,"deletions":97},"man/sd_notify.xml":{"insertions":403,"deletions":351},"man/sd_pid_get_session.xml":{"insertions":246,"deletions":235},"man/sd_seat_get_active.xml":{"insertions":157,"deletions":149},"man/sd_session_is_active.xml":{"insertions":315,"deletions":296},"man/sd_uid_get_state.xml":{"insertions":189,"deletions":178},"man/sd_watchdog_enabled.xml":{"insertions":164,"deletions":150},"man/shutdown.xml":{"insertions":156,"deletions":150},"man/sysctl.d.xml":{"insertions":140,"deletions":135},"man/systemd-analyze.xml":{"insertions":335,"deletions":307},"man/systemd-ask-password-console.service.xml":{"insertions":62,"deletions":59},"man/systemd-ask-password.xml":{"insertions":165,"deletions":149},"man/systemd-backlight@.service.xml":{"insertions":74,"deletions":69},"man/systemd-binfmt.service.xml":{"insertions":43,"deletions":42},"man/systemd-bootchart.xml":{"insertions":307,"deletions":294},"man/systemd-cat.xml":{"insertions":169,"deletions":153},"man/systemd-cgls.xml":{"insertions":120,"deletions":114},"man/systemd-cgtop.xml":{"insertions":245,"deletions":228},"man/systemd-cryptsetup-generator.xml":{"insertions":194,"deletions":170},"man/systemd-cryptsetup@.service.xml":{"insertions":53,"deletions":51},"man/systemd-debug-generator.xml":{"insertions":73,"deletions":72},"man/systemd-delta.xml":{"insertions":188,"deletions":177},"man/systemd-detect-virt.xml":{"insertions":206,"deletions":198},"man/systemd-efi-boot-generator.xml":{"insertions":55,"deletions":55},"man/systemd-escape.xml":{"insertions":161,"deletions":146},"man/systemd-firstboot.xml":{"insertions":261,"deletions":234},"man/systemd-fsck@.service.xml":{"insertions":132,"deletions":116},"man/systemd-fstab-generator.xml":{"insertions":173,"deletions":160},"man/systemd-getty-generator.xml":{"insertions":67,"deletions":63},"man/systemd-gpt-auto-generator.xml":{"insertions":161,"deletions":155},"man/systemd-halt.service.xml":{"insertions":99,"deletions":92},"man/systemd-hibernate-resume-generator.xml":{"insertions":68,"deletions":68},"man/systemd-hibernate-resume@.service.xml":{"insertions":48,"deletions":47},"man/systemd-hostnamed.service.xml":{"insertions":61,"deletions":59},"man/systemd-inhibit.xml":{"insertions":169,"deletions":152},"man/systemd-initctl.service.xml":{"insertions":43,"deletions":43},"man/systemd-journald.service.xml":{"insertions":249,"deletions":224},"man/systemd-localed.service.xml":{"insertions":63,"deletions":61},"man/systemd-logind.service.xml":{"insertions":105,"deletions":95},"man/systemd-machine-id-commit.service.xml":{"insertions":76,"deletions":75},"man/systemd-machine-id-commit.xml":{"insertions":100,"deletions":98},"man/systemd-machine-id-setup.xml":{"insertions":111,"deletions":105},"man/systemd-machined.service.xml":{"insertions":66,"deletions":64},"man/systemd-modules-load.service.xml":{"insertions":75,"deletions":71},"man/systemd-networkd-wait-online.service.xml":{"insertions":85,"deletions":83},"man/systemd-networkd.service.xml":{"insertions":76,"deletions":77},"man/systemd-notify.xml":{"insertions":163,"deletions":147},"man/systemd-nspawn.xml":{"insertions":895,"deletions":697},"man/systemd-path.xml":{"insertions":86,"deletions":82},"man/systemd-quotacheck.service.xml":{"insertions":77,"deletions":69},"man/systemd-random-seed.service.xml":{"insertions":43,"deletions":43},"man/systemd-remount-fs.service.xml":{"insertions":60,"deletions":55},"man/systemd-resolved.service.xml":{"insertions":65,"deletions":64},"man/systemd-rfkill@.service.xml":{"insertions":67,"deletions":63},"man/systemd-shutdownd.service.xml":{"insertions":44,"deletions":44},"man/systemd-socket-proxyd.xml":{"insertions":133,"deletions":129},"man/systemd-suspend.service.xml":{"insertions":130,"deletions":120},"man/systemd-sysctl.service.xml":{"insertions":44,"deletions":43},"man/systemd-system-update-generator.xml":{"insertions":46,"deletions":45},"man/systemd-system.conf.xml":{"insertions":417,"deletions":330},"man/systemd-sysusers.xml":{"insertions":95,"deletions":91},"man/systemd-timedated.service.xml":{"insertions":62,"deletions":59},"man/systemd-timesyncd.service.xml":{"insertions":81,"deletions":78},"man/systemd-tmpfiles.xml":{"insertions":190,"deletions":175},"man/systemd-tty-ask-password-agent.xml":{"insertions":129,"deletions":124},"man/systemd-update-done.service.xml":{"insertions":76,"deletions":72},"man/systemd-update-utmp.service.xml":{"insertions":44,"deletions":44},"man/systemd-user-sessions.service.xml":{"insertions":45,"deletions":44},"man/systemd-vconsole-setup.service.xml":{"insertions":93,"deletions":89},"man/systemd.automount.xml":{"insertions":142,"deletions":129},"man/systemd.device.xml":{"insertions":169,"deletions":146},"man/systemd.exec.xml":{"insertions":1643,"deletions":1257},"man/systemd.journal-fields.xml":{"insertions":577,"deletions":488},"man/systemd.kill.xml":{"insertions":190,"deletions":158},"man/systemd.link.xml":{"insertions":365,"deletions":358},"man/systemd.mount.xml":{"insertions":341,"deletions":305},"man/systemd.netdev.xml":{"insertions":639,"deletions":677},"man/systemd.network.xml":{"insertions":630,"deletions":627},"man/systemd.path.xml":{"insertions":209,"deletions":170},"man/systemd.preset.xml":{"insertions":168,"deletions":154},"man/systemd.service.xml":{"insertions":1574,"deletions":1247},"man/systemd.snapshot.xml":{"insertions":54,"deletions":50},"man/systemd.socket.xml":{"insertions":910,"deletions":729},"man/systemd.special.xml":{"insertions":1138,"deletions":850},"man/systemd.swap.xml":{"insertions":233,"deletions":213},"man/systemd.target.xml":{"insertions":83,"deletions":77},"man/systemd.time.xml":{"insertions":269,"deletions":256},"man/systemd.timer.xml":{"insertions":285,"deletions":228},"man/systemd.unit.xml":{"insertions":1680,"deletions":1358},"man/systemd.xml":{"insertions":1265,"deletions":1071},"man/sysusers.d.xml":{"insertions":234,"deletions":193},"man/telinit.xml":{"insertions":170,"deletions":154},"man/timedatectl.xml":{"insertions":210,"deletions":189},"man/timesyncd.conf.xml":{"insertions":94,"deletions":86},"man/vconsole.conf.xml":{"insertions":120,"deletions":113}}},"341db20b7e98199003b4ce6aa52b339757828204":{"author":"Felipe Sateler","email":"fsateler@debian.org","date":"2015-06-27 20:25:06 UTC","message":"systemd.service.xml: document that systemd removes the PIDFile","insertions":1,"deletions":4,"filepaths":{"man/systemd.service.xml":{"insertions":1,"deletions":4}}},"d1ab0ca07372649dad70a0348d75e394f254e1b6":{"author":"Lennart Poettering","email":"lennart@poettering.net","date":"2010-05-15 21:06:41 UTC","message":"man: add some initial man page work","insertions":16,"deletions":429,"filepaths":{".gitignore":{"insertions":0,"deletions":3},"Makefile.am":{"insertions":15,"deletions":43},"configure.ac":{"insertions":1,"deletions":49},"man/systemd.service.xml":{"insertions":0,"deletions":213},"man/systemd.unit.xml":{"insertions":0,"deletions":121}}},"d944dc9553009822deaddec76814f5642a6a8176":{"author":"Lennart Poettering","email":"lennart@poettering.net","date":"2016-09-24 10:41:30 UTC","message":"namespace: chase symlinks for mounts to set up in userspace\n\nThis adds logic to chase symlinks for all mount points that shall be created in\na namespace environment in userspace, instead of leaving this to the kernel.\nThis has the advantage that we can correctly handle absolute symlinks that\nshall be taken relative to a specific root directory. Moreover, we can properly\nhandle mounts created on symlinked files or directories as we can merge their\nmounts as necessary.\n\n(This also drops the \"done\" flag in the namespace logic, which was never\nactually working, but was supposed to permit a partial rollback of the\nnamespace logic, which however is only mildly useful as it wasn't clear in\nwhich case it would or would not be able to roll back.)\n\nFixes: #3867","insertions":46,"deletions":367,"filepaths":{"src/basic/fs-util.c":{"insertions":0,"deletions":187},"src/basic/fs-util.h":{"insertions":0,"deletions":2},"src/core/namespace.c":{"insertions":42,"deletions":76},"src/test/test-fs-util.c":{"insertions":1,"deletions":95},"src/test/test-ns.c":{"insertions":3,"deletions":7}}},"430fbf8e7ff4368f6d43a8f86e0bc6494b0a979c":{"author":"Lennart Poettering","email":"lennart@poettering.net","date":"2016-04-24 22:18:27 UTC","message":"journal: add inotify watches by-fd instead of by-path\n\nThis is slightly nicer, since we actually watch the directories we opened and\nenumerate. However, primarily this is preparation for adding support for\nopening journal files by fd without specifying any path, to be added in a later\ncommit.","insertions":5,"deletions":22,"filepaths":{"src/basic/fs-util.c":{"insertions":0,"deletions":15},"src/basic/fs-util.h":{"insertions":0,"deletions":2},"src/journal/sd-journal.c":{"insertions":5,"deletions":5}}},"a9fb08670f392e044c345b623e70287f6c6a02c1":{"author":"Lennart Poettering","email":"lennart@poettering.net","date":"2016-11-29 17:02:45 UTC","message":"fs-util: add new CHASE_NON_EXISTING flag to chase_symlinks()\n\nThis new flag controls whether to consider a problem if the referenced path\ndoesn't actually exist. If specified it's OK if the final file doesn't exist.\n\nNote that this permits one or more final components of the path not to exist,\nbut these must not contain \"../\" for safety reasons (or, to be extra safe,\nneither \"./\" and a couple of others, i.e. what path_is_safe() permits).\n\nThis new flag is useful when resolving paths before issuing an mkdir() or\nopen(O_CREAT) on a path, as it permits that the file or directory is created\nlater.\n\nThe return code of chase_symlinks() is changed to return 1 if the file exists,\nand 0 if it doesn't. The latter is only returned in case CHASE_NON_EXISTING is\nset.","insertions":13,"deletions":66,"filepaths":{"src/basic/fs-util.c":{"insertions":2,"deletions":20},"src/basic/fs-util.h":{"insertions":0,"deletions":1},"src/test/test-fs-util.c":{"insertions":11,"deletions":45}}},"655f2da0790d0f8670f7a4c7da1833786ce0137e":{"author":"NeilBrown","email":"neil@brown.name","date":"2017-09-04 13:35:07 UTC","message":"tmpfiles: silently ignore any path that passes through autofs (#6506)\n\nIf a path passes though an autofs filesystem, then accessing\nthe path might trigger and automount.  As systemd-tmpfiles is run before\nthe network is up, and as automounts are often used for networked\nfilesystems, this can cause a deadlock.\n\nSo chase_symlinks is enhance to accept a new flag which tells it\nto check for autofs, and return -EREMOTE if autofs is found.\n\ntmpfiles is changed to check just before acting on a path so that it\ncan avoid autofs even if a symlink was created earlier by tmpfiles\nthat would send this path through an autofs.\n\nThis fixes a deadlock that happens when /home is listed in /etc/fstab as\nx-systemd.automount for an NFS directory.","insertions":0,"deletions":8,"filepaths":{"src/basic/fs-util.c":{"insertions":0,"deletions":4},"src/basic/fs-util.h":{"insertions":0,"deletions":1},"src/tmpfiles/tmpfiles.c":{"insertions":0,"deletions":3}}},"c4f4fce79e157800212f3cba1b21870097030e81":{"author":"Lennart Poettering","email":"lennart@poettering.net","date":"2016-11-29 15:49:30 UTC","message":"fs-util: add flags parameter to chase_symlinks()\n\nLet's remove chase_symlinks_prefix() and instead introduce a flags parameter to\nchase_symlinks(), with a flag CHASE_PREFIX_ROOT that exposes the behaviour of\nchase_symlinks_prefix().","insertions":48,"deletions":45,"filepaths":{"src/basic/fs-util.c":{"insertions":20,"deletions":14},"src/basic/fs-util.h":{"insertions":2,"deletions":5},"src/basic/mount-util.c":{"insertions":1,"deletions":1},"src/basic/path-util.c":{"insertions":1,"deletions":1},"src/core/namespace.c":{"insertions":1,"deletions":1},"src/delta/delta.c":{"insertions":3,"deletions":3},"src/journal/journalctl.c":{"insertions":1,"deletions":1},"src/nspawn/nspawn-mount.c":{"insertions":3,"deletions":3},"src/nspawn/nspawn.c":{"insertions":1,"deletions":1},"src/systemctl/systemctl.c":{"insertions":1,"deletions":1},"src/test/test-fs-util.c":{"insertions":14,"deletions":14}}},"a66fee2e970bd3e6ac35db2dd6e377c83093b10e":{"author":"Zbigniew Jędrzejewski-Szmek","email":"zbyszek@in.waw.pl","date":"2017-10-31 12:02:10 UTC","message":"util-lib: rename fd_check_fstype to fd_is_fs_type\n\nLet's use \"is\" and \"fs_type\" for consistency with \"is_fs_type\".\n\"check\" is also more ambiguous than \"is\".","insertions":4,"deletions":4,"filepaths":{"src/basic/fs-util.c":{"insertions":1,"deletions":1},"src/basic/stat-util.c":{"insertions":2,"deletions":2},"src/basic/stat-util.h":{"insertions":1,"deletions":1}}},"245f1d244b3a91e7cc18ed2d21226292251b934d":{"author":"Lennart Poettering","email":"lennart@poettering.net","date":"2016-12-08 16:15:06 UTC","message":"util-lib: accept invoking chase_symlinks() with a NULL return parameter\n\nLet's permit invoking chase_symlinks() with a NULL return parameter. If so, the\nresolved name is not returned, and call is useful for checking for existance of\na file, without actually returning its ultimate path.","insertions":2,"deletions":4,"filepaths":{"src/basic/fs-util.c":{"insertions":2,"deletions":4}}},"57a4359ee0bf65c16336e8157f0f9d2b084ddac3":{"author":"Lennart Poettering","email":"lennart@poettering.net","date":"2017-11-16 17:56:25 UTC","message":"fs-util: add access_fd() which is like access() but for fds\n\nLinux doesn't have faccess(), hence let's emulate it. Linux has access()\nand faccessat() but neither allows checking the access rights of an fd\npassed in directly.","insertions":1,"deletions":44,"filepaths":{"src/basic/fs-util.c":{"insertions":1,"deletions":15},"src/basic/fs-util.h":{"insertions":0,"deletions":2},"src/test/test-fs-util.c":{"insertions":0,"deletions":27}}},"cb638b5e96465e695eaf34859ac762236b4bcb1e":{"author":"Lennart Poettering","email":"lennart@poettering.net","date":"2016-12-01 11:49:23 UTC","message":"util-lib: rename CHASE_NON_EXISTING → CHASE_NONEXISTENT\n\nAs suggested by @keszybz","insertions":12,"deletions":12,"filepaths":{"src/basic/fs-util.c":{"insertions":2,"deletions":2},"src/basic/fs-util.h":{"insertions":1,"deletions":1},"src/nspawn/nspawn-mount.c":{"insertions":4,"deletions":4},"src/nspawn/nspawn.c":{"insertions":1,"deletions":1},"src/test/test-fs-util.c":{"insertions":4,"deletions":4}}},"77019691cf629ee8ada94a9a9a1ddd286bbd24f4":{"author":"Yu Watanabe","email":"watanabe.yu+github@gmail.com","date":"2018-01-01 17:22:36 UTC","message":"core: add dbus-util.[ch] to simplify creating transient units\n\nThe functions and macros introduced by them will be used in later commits.","insertions":0,"deletions":392,"filepaths":{"src/core/dbus-util.c":{"insertions":0,"deletions":119},"src/core/dbus-util.h":{"insertions":0,"deletions":271},"src/core/meson.build":{"insertions":0,"deletions":2}}},"5ba6985b6c8ef85a8bcfeb1b65239c863436e75b":{"author":"Lennart Poettering","email":"lennart@poettering.net","date":"2014-02-07 10:58:25 UTC","message":"core: allow PIDs to be watched by two units at the same time\n\nIn some cases it is interesting to map a PID to two units at the same\ntime. For example, when a user logs in via a getty, which is reexeced to\n/sbin/login that binary will be explicitly referenced as main pid of the\ngetty service, as well as implicitly referenced as part of the session\nscope.","insertions":55,"deletions":102,"filepaths":{"src/core/manager.c":{"insertions":47,"deletions":73},"src/core/manager.h":{"insertions":1,"deletions":8},"src/core/unit.c":{"insertions":7,"deletions":21}}},"8523bf7dd514a3a2c6114b7b8fb8f308b4f09fc4":{"author":"Zbigniew Jędrzejewski-Szmek","email":"zbyszek@in.waw.pl","date":"2016-09-29 14:06:02 UTC","message":"pid1: process zero-length notification messages again\n\nThis undoes 531ac2b234. I acked that patch without looking at the code\ncarefully enough. There are two problems:\n- we want to process the fds anyway\n- in principle empty notification messages are valid, and we should\n  process them as usual, including logging using log_unit_debug().","insertions":9,"deletions":6,"filepaths":{"src/core/manager.c":{"insertions":9,"deletions":6}}},"a354329f724d6ce913d2ccffb2be8f3327a67faa":{"author":"Lennart Poettering","email":"lennart@poettering.net","date":"2015-01-05 23:26:25 UTC","message":"core: add new logic for services to store file descriptors in PID 1\n\nWith this change it is possible to send file descriptors to PID 1, via\nsd_pid_notify_with_fds() which PID 1 will store individually for each\nservice, and pass via the usual fd passing logic on next invocation.\nThis is useful for enable daemon reload schemes where daemons serialize\ntheir state to /run, push their fds into PID 1 and terminate, restoring\ntheir state on next start from the data in /run and passed in from PID\n1.\n\nThe fds are kept by PID 1 as long as no POLLHUP or POLLERR is seen on\nthem, and the service they belong to are either not dead or failed, or\nhave a job queued.","insertions":100,"deletions":594,"filepaths":{"Makefile-man.am":{"insertions":6,"deletions":25},"man/sd_listen_fds.xml":{"insertions":5,"deletions":16},"man/sd_notify.xml":{"insertions":6,"deletions":116},"man/systemd.service.xml":{"insertions":0,"deletions":29},"src/core/dbus-service.c":{"insertions":0,"deletions":1},"src/core/load-fragment-gperf.gperf.m4":{"insertions":0,"deletions":1},"src/core/manager.c":{"insertions":23,"deletions":55},"src/core/service.c":{"insertions":18,"deletions":148},"src/core/service.h":{"insertions":0,"deletions":14},"src/core/unit.c":{"insertions":5,"deletions":16},"src/core/unit.h":{"insertions":1,"deletions":5},"src/libsystemd/libsystemd.sym.m4":{"insertions":0,"deletions":5},"src/libsystemd/sd-daemon/sd-daemon.c":{"insertions":32,"deletions":62},"src/shared/fdset.c":{"insertions":1,"deletions":53},"src/shared/fdset.h":{"insertions":3,"deletions":8},"src/shared/util.c":{"insertions":0,"deletions":25},"src/shared/util.h":{"insertions":0,"deletions":2},"src/systemd/sd-daemon.h":{"insertions":0,"deletions":13}}},"a86b76753d7868c2d05f046f601bc7dc89fc2203":{"author":"Zbigniew Jędrzejewski-Szmek","email":"zbyszek@in.waw.pl","date":"2016-09-29 14:07:41 UTC","message":"pid1: more informative error message for ignored notifications\n\nIt's probably easier to diagnose a bad notification message if the\ncontents are printed. But still, do anything only if debugging is on.","insertions":2,"deletions":8,"filepaths":{"src/core/manager.c":{"insertions":2,"deletions":8}}},"e32852377797398baa17b015d7c7496a27731bd2":{"author":"Lennart Poettering","email":"lennart@poettering.net","date":"2017-11-13 16:48:50 UTC","message":"service: split out sd_notify() message authorization code into a function of its own\n\nLet's shorten service_notify_message() a bit, and do the authentication\noutside of the main function body.\n\nNo functional changes.","insertions":18,"deletions":33,"filepaths":{"src/core/service.c":{"insertions":18,"deletions":33}}},"c5419d4239ceb4c3bd0263a0a810cf24a072b3c0":{"author":"Michal Schmidt","email":"mschmidt@redhat.com","date":"2011-11-10 08:55:47 UTC","message":"service: don't warn if the pidfile still exists after SIGCHLD\n\nA service that drops its privileges may not be able to remove it when it\nexits. The stale pidfile is not a problem as long as the service\ncarefully recognizes it on its next start.\n\nsystemd would produce a warning after the service exits:\n  PID ... read from file ... does not exist. Your service or init\n  script might be broken.\n\nSilence the warning in this case. Still warn if this error is detected\nwhen loading the pidfile after service start.\n\nNoticed by Miroslav Lichvar in\n https://bugzilla.redhat.com/show_bug.cgi?id=752396","insertions":4,"deletions":5,"filepaths":{"src/service.c":{"insertions":4,"deletions":5}}},"034c6ed7da5e44bfdde5a5d0da75f7b7a59953b8":{"author":"Lennart Poettering","email":"lennart@poettering.net","date":"2010-01-26 03:18:44 UTC","message":"first attempt at proper service/socket logic","insertions":590,"deletions":2835,"filepaths":{"automount.c":{"insertions":18,"deletions":14},"conf-parser.c":{"insertions":2,"deletions":33},"conf-parser.h":{"insertions":0,"deletions":1},"device.c":{"insertions":15,"deletions":10},"execute.c":{"insertions":15,"deletions":225},"execute.h":{"insertions":10,"deletions":38},"hashmap.c":{"insertions":16,"deletions":45},"hashmap.h":{"insertions":8,"deletions":15},"job.c":{"insertions":39,"deletions":32},"job.h":{"insertions":6,"deletions":7},"list.h":{"insertions":36,"deletions":46},"load-fragment.c":{"insertions":29,"deletions":317},"macro.h":{"insertions":0,"deletions":2},"main.c":{"insertions":2,"deletions":0},"manager.c":{"insertions":101,"deletions":133},"manager.h":{"insertions":1,"deletions":12},"milestone.c":{"insertions":14,"deletions":8},"mount.c":{"insertions":15,"deletions":11},"name.c":{"insertions":51,"deletions":233},"name.h":{"insertions":5,"deletions":31},"service.c":{"insertions":53,"deletions":753},"service.h":{"insertions":19,"deletions":32},"set.c":{"insertions":4,"deletions":12},"set.h":{"insertions":7,"deletions":9},"snapshot.c":{"insertions":14,"deletions":7},"socket.c":{"insertions":81,"deletions":508},"socket.h":{"insertions":4,"deletions":14},"strv.c":{"insertions":0,"deletions":30},"strv.h":{"insertions":0,"deletions":2},"timer.c":{"insertions":18,"deletions":9},"util.c":{"insertions":5,"deletions":223},"util.h":{"insertions":2,"deletions":23}}},"bc41f93e90f6edcc9067f3bc1085bb6c85082c00":{"author":"Zbigniew Jędrzejewski-Szmek","email":"zbyszek@in.waw.pl","date":"2013-03-03 06:32:34 UTC","message":"core/path: install inotify watches top-down instead of bottom-up\n\nWhen watches are installed from the bottom, it is always possible\nto race, and miss a file creation event. The race can be avoided\nif a watch is first established for a parent directory, and then for\nthe file in the directory. If the file is created in the time between,\nthe watch on the parent directory will fire.\n\nSome messages (mostly at debug level) are added to help diagnose\npidfile issues.\n\nShould fix https://bugzilla.redhat.com/show_bug.cgi?id=917075.","insertions":32,"deletions":62,"filepaths":{"src/core/path.c":{"insertions":30,"deletions":48},"src/core/service.c":{"insertions":2,"deletions":14}}},"db01f8b3f870611a013b913636bb7fefaab34018":{"author":"Michal Schmidt","email":"mschmidt@redhat.com","date":"2011-09-20 19:43:30 UTC","message":"service: handle forking services that move to a new PID\n\nWhen some forking daemons receive a SIGHUP, they re-execute themselves\nand consequently change to a new main PID. As long as they update the\nPID file in the right order (before exiting the old PID), we can detect\nthat and avoid killing them.","insertions":3,"deletions":15,"filepaths":{"src/service.c":{"insertions":3,"deletions":15}}},"117dcc57930b26bd8390516624700eb2024e1bb6":{"author":"Zbigniew Jędrzejewski-Szmek","email":"zbyszek@in.waw.pl","date":"2013-03-02 13:28:58 UTC","message":"core/service: use cleanup functions, wrap lines","insertions":93,"deletions":145,"filepaths":{"src/core/service.c":{"insertions":93,"deletions":145}}},"5375410bb2ed11a6a9e37063c0a551a7bf75338f":{"author":"Michal Schmidt","email":"mschmidt@redhat.com","date":"2011-09-22 11:10:32 UTC","message":"service: warn if a service fails to write its PID file\n\nWarn if a service promises to write a PID file (using 'PIDFile=' in the\nunit file or '# pidfile:' in SysV header), but fails to keep the\npromise.\n\nThis warning will likely trigger also for the forking services with a\nracy daemonization, which exit the original process before the PID file\nis written.","insertions":6,"deletions":10,"filepaths":{"src/service.c":{"insertions":6,"deletions":10}}},"3c9512c71d49d42513755cfa4329275c0360f397":{"author":"Jouke Witteveen","email":"j.witteveen@gmail.com","date":"2016-11-26 09:16:47 UTC","message":"service: prevent registering control pids as the main pid\n\nWe assume a process can be only one of the two in service_sigchld_event.","insertions":0,"deletions":2,"filepaths":{"src/core/service.c":{"insertions":0,"deletions":2}}},"18f573aaf9802ddac494c94a59968e0b34155695":{"author":"Lennart Poettering","email":"lennart@poettering.net","date":"2017-09-05 17:20:29 UTC","message":"core: make sure to dump cgroup context when unit_dump() is called for all unit types\n\nFor some reason we didn't dump the cgroup context for a number of unit\ntypes, including service units. Not sure how this wasn't noticed\nbefore... Add this in.","insertions":0,"deletions":6,"filepaths":{"src/core/mount.c":{"insertions":0,"deletions":1},"src/core/service.c":{"insertions":0,"deletions":2},"src/core/socket.c":{"insertions":0,"deletions":2},"src/core/swap.c":{"insertions":0,"deletions":1}}},"5cb5a6ffc33667c93e9bc3572534dcaa684046e3":{"author":"Lennart Poettering","email":"lennart@poettering.net","date":"2010-01-23 00:52:57 UTC","message":"first attempt in implementinging execution logic","insertions":542,"deletions":1775,"filepaths":{"Makefile":{"insertions":2,"deletions":24},"automount.c":{"insertions":0,"deletions":111},"automount.h":{"insertions":0,"deletions":46},"device.c":{"insertions":0,"deletions":47},"device.h":{"insertions":0,"deletions":29},"execute.c":{"insertions":0,"deletions":68},"execute.h":{"insertions":0,"deletions":59},"job.c":{"insertions":30,"deletions":227},"job.h":{"insertions":10,"deletions":21},"load-dropin.c":{"insertions":0,"deletions":11},"load-dropin.h":{"insertions":0,"deletions":12},"load-fragment.c":{"insertions":3,"deletions":3},"load-fstab.c":{"insertions":0,"deletions":11},"load-fstab.h":{"insertions":0,"deletions":12},"manager.c":{"insertions":18,"deletions":22},"manager.h":{"insertions":0,"deletions":2},"milestone.c":{"insertions":0,"deletions":32},"milestone.h":{"insertions":0,"deletions":23},"mount.c":{"insertions":0,"deletions":86},"mount.h":{"insertions":0,"deletions":28},"name.c":{"insertions":279,"deletions":266},"name.h":{"insertions":193,"deletions":91},"service.c":{"insertions":0,"deletions":182},"service.h":{"insertions":0,"deletions":65},"snapshot.c":{"insertions":0,"deletions":31},"snapshot.h":{"insertions":0,"deletions":24},"socket.c":{"insertions":0,"deletions":113},"socket.h":{"insertions":0,"deletions":49},"test-job-type.c":{"insertions":7,"deletions":7},"test2/h.service":{"insertions":0,"deletions":3},"timer.c":{"insertions":0,"deletions":39},"timer.h":{"insertions":0,"deletions":30},"util.h":{"insertions":0,"deletions":1}}},"7fd1b19bc9e9f5574f2877936b8ac267c7706947":{"author":"Harald Hoyer","email":"harald@redhat.com","date":"2013-04-18 07:11:22 UTC","message":"move _cleanup_ attribute in front of the type\n\nhttp://lists.freedesktop.org/archives/systemd-devel/2013-April/010510.html","insertions":274,"deletions":274,"filepaths":{"src/activate/activate.c":{"insertions":4,"deletions":4},"src/bootchart/bootchart.c":{"insertions":1,"deletions":1},"src/bootchart/store.c":{"insertions":3,"deletions":3},"src/bootchart/svg.c":{"insertions":3,"deletions":3},"src/cgls/cgls.c":{"insertions":2,"deletions":2},"src/core/dbus-socket.c":{"insertions":1,"deletions":1},"src/core/dbus-unit.c":{"insertions":2,"deletions":2},"src/core/execute.c":{"insertions":4,"deletions":4},"src/core/load-fragment.c":{"insertions":8,"deletions":8},"src/core/loopback-setup.c":{"insertions":2,"deletions":2},"src/core/main.c":{"insertions":3,"deletions":3},"src/core/manager.c":{"insertions":3,"deletions":3},"src/core/path.c":{"insertions":1,"deletions":1},"src/core/service.c":{"insertions":7,"deletions":7},"src/core/swap.c":{"insertions":2,"deletions":2},"src/core/umount.c":{"insertions":1,"deletions":1},"src/core/unit-printf.c":{"insertions":1,"deletions":1},"src/cryptsetup/cryptsetup-generator.c":{"insertions":11,"deletions":11},"src/fstab-generator/fstab-generator.c":{"insertions":7,"deletions":7},"src/journal/catalog.c":{"insertions":2,"deletions":2},"src/journal/coredump.c":{"insertions":1,"deletions":1},"src/journal/coredumpctl.c":{"insertions":5,"deletions":5},"src/journal/journal-gatewayd.c":{"insertions":1,"deletions":1},"src/journal/journalctl.c":{"insertions":3,"deletions":3},"src/journal/journald-server.c":{"insertions":8,"deletions":8},"src/journal/microhttpd-util.c":{"insertions":1,"deletions":1},"src/journal/sd-journal.c":{"insertions":4,"deletions":4},"src/journal/test-catalog.c":{"insertions":1,"deletions":1},"src/journal/test-journal-enum.c":{"insertions":1,"deletions":1},"src/journal/test-journal-match.c":{"insertions":2,"deletions":2},"src/journal/test-journal-stream.c":{"insertions":3,"deletions":3},"src/journal/test-journal-syslog.c":{"insertions":1,"deletions":1},"src/locale/localectl.c":{"insertions":3,"deletions":3},"src/login/inhibit.c":{"insertions":1,"deletions":1},"src/login/logind-dbus.c":{"insertions":2,"deletions":2},"src/login/logind-seat-dbus.c":{"insertions":3,"deletions":3},"src/login/logind-session-dbus.c":{"insertions":3,"deletions":3},"src/login/logind-user-dbus.c":{"insertions":2,"deletions":2},"src/login/pam-module.c":{"insertions":3,"deletions":3},"src/modules-load/modules-load.c":{"insertions":2,"deletions":2},"src/nspawn/nspawn.c":{"insertions":9,"deletions":9},"src/nss-myhostname/nss-myhostname.c":{"insertions":1,"deletions":1},"src/python-systemd/_daemon.c":{"insertions":1,"deletions":1},"src/python-systemd/_reader.c":{"insertions":5,"deletions":5},"src/python-systemd/id128.c":{"insertions":1,"deletions":1},"src/readahead/readahead-analyze.c":{"insertions":1,"deletions":1},"src/shared/cgroup-show.c":{"insertions":2,"deletions":2},"src/shared/cgroup-util.c":{"insertions":4,"deletions":4},"src/shared/conf-parser.c":{"insertions":3,"deletions":3},"src/shared/dbus-loop.c":{"insertions":3,"deletions":3},"src/shared/fileio.c":{"insertions":2,"deletions":2},"src/shared/hwclock.c":{"insertions":1,"deletions":1},"src/shared/install-printf.c":{"insertions":1,"deletions":1},"src/shared/install.c":{"insertions":44,"deletions":44},"src/shared/logs-show.c":{"insertions":5,"deletions":5},"src/shared/path-lookup.c":{"insertions":3,"deletions":3},"src/shared/socket-util.c":{"insertions":2,"deletions":2},"src/shared/util.c":{"insertions":2,"deletions":2},"src/shared/utmp-wtmp.c":{"insertions":1,"deletions":1},"src/shared/virt.c":{"insertions":1,"deletions":1},"src/systemctl/systemctl.c":{"insertions":29,"deletions":29},"src/test/test-unit-file.c":{"insertions":11,"deletions":11},"src/test/test-unit-name.c":{"insertions":6,"deletions":6},"src/timedate/timedated.c":{"insertions":3,"deletions":3},"src/tmpfiles/tmpfiles.c":{"insertions":9,"deletions":9},"src/udev/accelerometer/accelerometer.c":{"insertions":1,"deletions":1},"src/udev/udev-builtin-usb_id.c":{"insertions":2,"deletions":2},"src/udev/udevadm-hwdb.c":{"insertions":2,"deletions":2},"src/vconsole/vconsole-setup.c":{"insertions":1,"deletions":1}}},"9f5650aecb22a1d864b2c0b749910556795f1490":{"author":"Lennart Poettering","email":"lennart@poettering.net","date":"2014-02-17 17:28:53 UTC","message":"util: generalize code that checks whether PIDs are alive or unwaited for","insertions":27,"deletions":28,"filepaths":{"src/core/service.c":{"insertions":20,"deletions":5},"src/core/unit.c":{"insertions":1,"deletions":1},"src/libsystemd/sd-bus/bus-creds.c":{"insertions":1,"deletions":1},"src/shared/util.c":{"insertions":1,"deletions":18},"src/shared/util.h":{"insertions":1,"deletions":2},"src/tty-ask-password-agent/tty-ask-password-agent.c":{"insertions":3,"deletions":1}}},"e10c9985bbc3cf79f12f9ec7317adfe697fa8214":{"author":"Yuxuan Shui","email":"yshuiv7@gmail.com","date":"2014-02-14 18:38:50 UTC","message":"core: fix detection of dead processes\n\nCommit 5ba6985b moves the UNIT_VTABLE(u)->sigchld_event before systemd\nactually reaps the zombie. Which leads to service_load_pid_file accepting\nzombie as a valid pid.\n\nThis fixes timeouts like:\n[ 2746.602243] systemd[1]: chronyd.service stop-sigterm timed out. Killing.\n[ 2836.852545] systemd[1]: chronyd.service still around after SIGKILL. Ignoring.\n[ 2927.102187] systemd[1]: chronyd.service stop-final-sigterm timed out. Killing.\n[ 3017.352560] systemd[1]: chronyd.service still around after final SIGKILL. Entering failed mode.","insertions":0,"deletions":34,"filepaths":{"src/core/service.c":{"insertions":0,"deletions":8},"src/shared/util.c":{"insertions":0,"deletions":25},"src/shared/util.h":{"insertions":0,"deletions":1}}},"cc2b7b11b45f82fb881ac788ec2203c632677f90":{"author":"Lennart Poettering","email":"lennart@poettering.net","date":"2017-11-13 17:14:20 UTC","message":"core: only process one of READY=1, STOPPING=1 or RELOADING=1 in sd_notify() handling\n\nOf course, it's not really a valid sd_notify() message if multiple of\nthese fields are used in one, but let's handle this somewhat gracefully,\nby only processing one of them, and ignoring the rest.","insertions":35,"deletions":42,"filepaths":{"src/core/service.c":{"insertions":28,"deletions":28},"src/systemd/sd-daemon.h":{"insertions":7,"deletions":14}}},"34959677900a45aa67f511e828c68167f8a7c816":{"author":"Tom Gundersen","email":"teg@jklm.no","date":"2015-05-12 15:21:51 UTC","message":"core: drop redundant logging about notification messages\n\nBefore:\nMay 12 17:11:22 tomegun-x2402 systemd[1]: systemd-udevd.service: Got notification message for unit.\nMay 12 17:11:22 tomegun-x2402 systemd[1]: systemd-udevd.service: Got notification message from PID 195 (READY=1)\nMay 12 17:11:22 tomegun-x2402 systemd[1]: systemd-udevd.service: Ggot READY=1\n\nAfter:\nMay 12 17:11:22 tomegun-x2402 systemd[1]: systemd-udevd.service: Got notification message from PID 195 (READY=1)","insertions":18,"deletions":5,"filepaths":{"src/core/manager.c":{"insertions":2,"deletions":2},"src/core/service.c":{"insertions":16,"deletions":3}}},"28849dbadb7cd127f7f89e8892ec94c6a05070da":{"author":"Lennart Poettering","email":"lennart@poettering.net","date":"2014-08-21 14:22:34 UTC","message":"service,strv: introduce strv_find_startswith() and make use of it\n\nUnlike strv_find_prefix() the new call will return a pointer to the\nsuffix of the item we found, instead of the whole item. This is more\ncloser inline with what startswith() does, and allows us to simplify a\ncouple of invocations.","insertions":23,"deletions":39,"filepaths":{"src/core/service.c":{"insertions":23,"deletions":21},"src/shared/strv.c":{"insertions":0,"deletions":17},"src/shared/strv.h":{"insertions":0,"deletions":1}}},"df0ff127758809a45105893772de76082d12a26d":{"author":"Lennart Poettering","email":"lennart@poettering.net","date":"2017-07-20 14:19:18 UTC","message":"tree-wide: make use of getpid_cached() wherever we can\n\nThis moves pretty much all uses of getpid() over to getpid_raw(). I\ndidn't specifically check whether the optimization is worth it for each\nreplacement, but in order to keep things simple and systematic I\nswitched over everything at once.","insertions":151,"deletions":161,"filepaths":{"src/activate/activate.c":{"insertions":2,"deletions":3},"src/basic/cgroup-util.c":{"insertions":3,"deletions":3},"src/basic/fd-util.c":{"insertions":1,"deletions":2},"src/basic/fileio.c":{"insertions":1,"deletions":2},"src/basic/fs-util.c":{"insertions":1,"deletions":1},"src/basic/log.c":{"insertions":7,"deletions":7},"src/basic/log.h":{"insertions":2,"deletions":3},"src/basic/process-util.c":{"insertions":2,"deletions":2},"src/basic/terminal-util.c":{"insertions":1,"deletions":1},"src/basic/util.c":{"insertions":1,"deletions":1},"src/basic/virt.c":{"insertions":1,"deletions":1},"src/core/automount.c":{"insertions":1,"deletions":1},"src/core/cgroup.c":{"insertions":1,"deletions":1},"src/core/dbus.c":{"insertions":1,"deletions":1},"src/core/execute.c":{"insertions":4,"deletions":4},"src/core/main.c":{"insertions":15,"deletions":15},"src/core/service.c":{"insertions":4,"deletions":4},"src/core/shutdown.c":{"insertions":1,"deletions":1},"src/initctl/initctl.c":{"insertions":2,"deletions":2},"src/journal-remote/journal-remote.c":{"insertions":2,"deletions":2},"src/journal-remote/journal-upload.c":{"insertions":1,"deletions":1},"src/journal/journald-kmsg.c":{"insertions":1,"deletions":1},"src/journal/journald-server.c":{"insertions":1,"deletions":1},"src/journal/journald-syslog.c":{"insertions":1,"deletions":1},"src/journal/journald.c":{"insertions":2,"deletions":2},"src/journal/sd-journal.c":{"insertions":2,"deletions":2},"src/journal/test-compress-benchmark.c":{"insertions":1,"deletions":1},"src/libsystemd/sd-bus/bus-creds.c":{"insertions":1,"deletions":1},"src/libsystemd/sd-bus/sd-bus.c":{"insertions":2,"deletions":2},"src/libsystemd/sd-bus/test-bus-benchmark.c":{"insertions":1,"deletions":1},"src/libsystemd/sd-bus/test-bus-kernel-bloom.c":{"insertions":1,"deletions":1},"src/libsystemd/sd-bus/test-bus-kernel.c":{"insertions":1,"deletions":1},"src/libsystemd/sd-bus/test-bus-zero-copy.c":{"insertions":1,"deletions":1},"src/libsystemd/sd-daemon/sd-daemon.c":{"insertions":3,"deletions":3},"src/libsystemd/sd-event/sd-event.c":{"insertions":2,"deletions":2},"src/libsystemd/sd-event/test-event.c":{"insertions":5,"deletions":5},"src/libsystemd/sd-netlink/sd-netlink.c":{"insertions":2,"deletions":2},"src/libsystemd/sd-resolve/sd-resolve.c":{"insertions":2,"deletions":2},"src/login/logind.c":{"insertions":2,"deletions":2},"src/login/pam_systemd.c":{"insertions":2,"deletions":3},"src/machine/machined.c":{"insertions":2,"deletions":3},"src/run/run.c":{"insertions":1,"deletions":1},"src/shared/ask-password-api.c":{"insertions":1,"deletions":2},"src/shared/condition.c":{"insertions":2,"deletions":3},"src/shared/pager.c":{"insertions":1,"deletions":1},"src/test/test-cgroup.c":{"insertions":3,"deletions":3},"src/test/test-log.c":{"insertions":3,"deletions":3},"src/test/test-process-util.c":{"insertions":38,"deletions":38},"src/test/test-signal-util.c":{"insertions":5,"deletions":5},"src/test/test-tmpfiles.c":{"insertions":2,"deletions":2},"src/timesync/timesyncd.c":{"insertions":1,"deletions":2},"src/udev/udevd.c":{"insertions":3,"deletions":3},"src/update-utmp/update-utmp.c":{"insertions":2,"deletions":3}}},"6939ce648aae1bf7e515731c0547a54eb939c259":{"author":"Lennart Poettering","email":"lennart@poettering.net","date":"2017-02-28 15:08:40 UTC","message":"service: refuse using PID 1 as MAINPID for a service","insertions":0,"deletions":2,"filepaths":{"src/core/service.c":{"insertions":0,"deletions":2}}},"f3b900311f1f6ed10adfc8e86267a2fbc4e1fb7b":{"author":"Lennart Poettering","email":"lennart@poettering.net","date":"2017-11-27 15:58:46 UTC","message":"service: shortcut operations if the MAINPID= doesn't actually cause a change","insertions":1,"deletions":1,"filepaths":{"src/core/service.c":{"insertions":1,"deletions":1}}},"5925dd3c7ab771c86036b4a91640957e5d7a0e80":{"author":"Lennart Poettering","email":"lennart@poettering.net","date":"2010-06-17 20:55:53 UTC","message":"service: rework PID parsing logic everywhere","insertions":54,"deletions":82,"filepaths":{"src/mount.c":{"insertions":4,"deletions":4},"src/service.c":{"insertions":46,"deletions":74},"src/socket.c":{"insertions":4,"deletions":4}}},"7400b9d2e99938d17b281d7df43680eade18666e":{"author":"Lennart Poettering","email":"lennart@poettering.net","date":"2013-10-01 03:06:56 UTC","message":"core: whenever a new PID is passed to us, make sure we watch it","insertions":6,"deletions":15,"filepaths":{"src/core/service.c":{"insertions":6,"deletions":15}}},"30b5275ac775264fa94490ac88c1e35bc6b90b40":{"author":"Lennart Poettering","email":"lennart@poettering.net","date":"2013-12-19 20:34:09 UTC","message":"service: don't send out PropertiesChanged message for each watchdog notification","insertions":25,"deletions":21,"filepaths":{"src/core/service.c":{"insertions":25,"deletions":21}}},"64144440a5d2d94482f882b992fd2a4e0dca7a05":{"author":"Zbigniew Jędrzejewski-Szmek","email":"zbyszek@in.waw.pl","date":"2015-03-14 02:22:05 UTC","message":"sd-daemon: simplify sd_pid_notify_with_fds\n\nCoverity was complaining that CMSG_NXTHDR is used without\nchecking the return value. In this case it cannot fail, but\nit is a good excuse to simplify the function a bit.\n\nCID #1261726.","insertions":34,"deletions":27,"filepaths":{"src/libsystemd/sd-daemon/sd-daemon.c":{"insertions":34,"deletions":27}}},"a47806fafaec9a52a80e1795ad880b9b5008c4b8":{"author":"Lennart Poettering","email":"lennart@poettering.net","date":"2015-10-30 10:27:29 UTC","message":"sd-daemon: increase sd_notify() socket buffer size\n\nLet's make sure we don't start blocking on sd_notify() earlier than\nnecessary, let's bump the socket buffer sizes to 8M.\n\nWe already do something similar for our logging socket buffers, hence\napply a similar bump here.","insertions":0,"deletions":8,"filepaths":{"src/core/manager.c":{"insertions":0,"deletions":4},"src/libsystemd/sd-daemon/sd-daemon.c":{"insertions":0,"deletions":4}}},"c463a6f1c4d375929a99ac258292ce5e1f64a835":{"author":"Lennart Poettering","email":"lennart@poettering.net","date":"2015-10-09 15:17:28 UTC","message":"sd-daemon: simply code simplification\n\nNo change in behaviour, just make the code more obvious.","insertions":2,"deletions":4,"filepaths":{"src/libsystemd/sd-daemon/sd-daemon.c":{"insertions":2,"deletions":4}}},"4a2a8b5a82325494f5daf4c66c23fdb4f906c9e6":{"author":"Lennart Poettering","email":"lennart@poettering.net","date":"2010-06-17 20:50:06 UTC","message":"notify: add systemd-notify command line tool","insertions":1,"deletions":187,"filepaths":{".gitignore":{"insertions":0,"deletions":1},"Makefile.am":{"insertions":1,"deletions":7},"src/notify.c":{"insertions":0,"deletions":179}}},"96551bae6107936a4576b9b4b391abbc9963bdfe":{"author":"Lennart Poettering","email":"lennart@poettering.net","date":"2010-06-21 17:20:21 UTC","message":"notify: add systemd-notify --booted","insertions":2,"deletions":13,"filepaths":{"src/notify.c":{"insertions":2,"deletions":13}}},"6f2deb8447a64434b861f807f4e58ebc24883fde":{"author":"Lennart Poettering","email":"lennart@poettering.net","date":"2015-09-18 23:56:12 UTC","message":"notify: sort header files, follow CODING_STYLE","insertions":7,"deletions":7,"filepaths":{"src/notify/notify.c":{"insertions":7,"deletions":7}}},"6bedfcbb2970e06a4d3280c8fb62083d252ede73":{"author":"Lennart Poettering","email":"lennart@poettering.net","date":"2015-10-26 15:18:16 UTC","message":"util-lib: split string parsing related calls from util.[ch] into parse-util.[ch]","insertions":502,"deletions":686,"filepaths":{"Makefile.am":{"insertions":0,"deletions":2},"src/analyze/analyze.c":{"insertions":0,"deletions":1},"src/backlight/backlight.c":{"insertions":0,"deletions":1},"src/basic/audit.c":{"insertions":0,"deletions":1},"src/basic/cap-list.c":{"insertions":1,"deletions":2},"src/basic/capability.c":{"insertions":0,"deletions":1},"src/basic/cgroup-util.c":{"insertions":0,"deletions":1},"src/basic/cpu-set-util.c":{"insertions":1,"deletions":2},"src/basic/fd-util.c":{"insertions":0,"deletions":1},"src/basic/fdset.c":{"insertions":0,"deletions":1},"src/basic/log.c":{"insertions":0,"deletions":1},"src/basic/parse-util.c":{"insertions":0,"deletions":408},"src/basic/parse-util.h":{"insertions":0,"deletions":88},"src/basic/path-util.c":{"insertions":0,"deletions":1},"src/basic/signal-util.c":{"insertions":2,"deletions":6},"src/basic/signal-util.h":{"insertions":0,"deletions":2},"src/basic/socket-util.c":{"insertions":0,"deletions":1},"src/basic/terminal-util.c":{"insertions":0,"deletions":1},"src/basic/user-util.c":{"insertions":3,"deletions":4},"src/basic/util.c":{"insertions":387,"deletions":1},"src/basic/util.h":{"insertions":66,"deletions":0},"src/bootchart/bootchart.c":{"insertions":0,"deletions":1},"src/bootchart/store.c":{"insertions":0,"deletions":1},"src/cgtop/cgtop.c":{"insertions":0,"deletions":1},"src/core/automount.c":{"insertions":0,"deletions":1},"src/core/busname.c":{"insertions":0,"deletions":1},"src/core/cgroup.c":{"insertions":0,"deletions":1},"src/core/dbus-execute.c":{"insertions":3,"deletions":3},"src/core/device.c":{"insertions":1,"deletions":2},"src/core/execute.c":{"insertions":0,"deletions":1},"src/core/job.c":{"insertions":1,"deletions":2},"src/core/killall.c":{"insertions":0,"deletions":1},"src/core/load-fragment.c":{"insertions":0,"deletions":1},"src/core/main.c":{"insertions":0,"deletions":1},"src/core/manager.c":{"insertions":0,"deletions":1},"src/core/mount.c":{"insertions":0,"deletions":1},"src/core/service.c":{"insertions":0,"deletions":1},"src/core/show-status.c":{"insertions":1,"deletions":2},"src/core/shutdown.c":{"insertions":0,"deletions":1},"src/core/snapshot.c":{"insertions":1,"deletions":3},"src/core/snapshot.h":{"insertions":0,"deletions":2},"src/core/socket.c":{"insertions":0,"deletions":1},"src/core/swap.c":{"insertions":0,"deletions":1},"src/core/timer.c":{"insertions":0,"deletions":1},"src/core/unit.c":{"insertions":0,"deletions":1},"src/cryptsetup/cryptsetup-generator.c":{"insertions":0,"deletions":1},"src/cryptsetup/cryptsetup.c":{"insertions":0,"deletions":1},"src/debug-generator/debug-generator.c":{"insertions":0,"deletions":1},"src/delta/delta.c":{"insertions":0,"deletions":1},"src/firstboot/firstboot.c":{"insertions":2,"deletions":3},"src/fsck/fsck.c":{"insertions":0,"deletions":1},"src/fstab-generator/fstab-generator.c":{"insertions":0,"deletions":1},"src/gpt-auto-generator/gpt-auto-generator.c":{"insertions":0,"deletions":1},"src/hostname/hostnamed.c":{"insertions":6,"deletions":7},"src/import/importd.c":{"insertions":0,"deletions":1},"src/import/pull-job.c":{"insertions":0,"deletions":1},"src/import/pull.c":{"insertions":0,"deletions":1},"src/journal-remote/journal-gatewayd.c":{"insertions":0,"deletions":1},"src/journal-remote/journal-remote-parse.c":{"insertions":0,"deletions":1},"src/journal-remote/journal-remote.c":{"insertions":0,"deletions":1},"src/journal-remote/journal-upload.c":{"insertions":0,"deletions":1},"src/journal/cat.c":{"insertions":0,"deletions":1},"src/journal/coredump.c":{"insertions":0,"deletions":1},"src/journal/coredumpctl.c":{"insertions":1,"deletions":2},"src/journal/journal-file.c":{"insertions":0,"deletions":1},"src/journal/journal-vacuum.c":{"insertions":0,"deletions":1},"src/journal/journalctl.c":{"insertions":0,"deletions":1},"src/journal/journald-console.c":{"insertions":3,"deletions":4},"src/journal/journald-kmsg.c":{"insertions":0,"deletions":1},"src/journal/journald-native.c":{"insertions":0,"deletions":1},"src/journal/journald-server.c":{"insertions":0,"deletions":1},"src/journal/journald-stream.c":{"insertions":0,"deletions":1},"src/journal/test-compress-benchmark.c":{"insertions":0,"deletions":1},"src/journal/test-journal-init.c":{"insertions":0,"deletions":1},"src/journal/test-journal-interleaving.c":{"insertions":1,"deletions":3},"src/journal/test-journal-stream.c":{"insertions":4,"deletions":6},"src/libsystemd-network/network-internal.c":{"insertions":1,"deletions":2},"src/libsystemd-network/sd-dhcp-lease.c":{"insertions":0,"deletions":1},"src/libsystemd-network/test-ipv4ll-manual.c":{"insertions":0,"deletions":1},"src/libsystemd/sd-bus/bus-creds.c":{"insertions":0,"deletions":1},"src/libsystemd/sd-bus/bus-kernel.c":{"insertions":0,"deletions":1},"src/libsystemd/sd-bus/busctl.c":{"insertions":0,"deletions":1},"src/libsystemd/sd-bus/sd-bus.c":{"insertions":0,"deletions":1},"src/libsystemd/sd-daemon/sd-daemon.c":{"insertions":0,"deletions":1},"src/libsystemd/sd-device/device-private.c":{"insertions":0,"deletions":1},"src/libsystemd/sd-device/sd-device.c":{"insertions":0,"deletions":1},"src/libsystemd/sd-login/sd-login.c":{"insertions":0,"deletions":1},"src/libsystemd/sd-network/sd-network.c":{"insertions":0,"deletions":1},"src/libudev/libudev-device.c":{"insertions":0,"deletions":1},"src/login/loginctl.c":{"insertions":0,"deletions":1},"src/login/logind-inhibit.c":{"insertions":0,"deletions":1},"src/login/logind-seat.c":{"insertions":0,"deletions":1},"src/login/logind-session.c":{"insertions":0,"deletions":1},"src/login/logind-user.c":{"insertions":0,"deletions":1},"src/login/pam_systemd.c":{"insertions":0,"deletions":1},"src/machine/machine.c":{"insertions":0,"deletions":1},"src/machine/machinectl.c":{"insertions":0,"deletions":1},"src/network/networkctl.c":{"insertions":0,"deletions":1},"src/network/networkd-address.c":{"insertions":1,"deletions":2},"src/network/networkd-link-bus.c":{"insertions":1,"deletions":2},"src/network/networkd-netdev-tunnel.c":{"insertions":1,"deletions":2},"src/network/networkd-network.c":{"insertions":0,"deletions":1},"src/network/networkd-route.c":{"insertions":1,"deletions":2},"src/network/networkd-util.c":{"insertions":0,"deletions":1},"src/notify/notify.c":{"insertions":0,"deletions":1},"src/nspawn/nspawn-expose-ports.c":{"insertions":0,"deletions":1},"src/nspawn/nspawn-mount.c":{"insertions":1,"deletions":2},"src/nspawn/nspawn.c":{"insertions":0,"deletions":1},"src/resolve-host/resolve-host.c":{"insertions":0,"deletions":1},"src/resolve/resolved-conf.c":{"insertions":1,"deletions":2},"src/resolve/resolved-link.c":{"insertions":0,"deletions":1},"src/resolve/resolved-manager.c":{"insertions":0,"deletions":1},"src/rfkill/rfkill.c":{"insertions":0,"deletions":1},"src/run/run.c":{"insertions":0,"deletions":1},"src/shared/apparmor-util.c":{"insertions":3,"deletions":3},"src/shared/bus-util.c":{"insertions":0,"deletions":1},"src/shared/condition.c":{"insertions":0,"deletions":1},"src/shared/conf-parser.c":{"insertions":2,"deletions":3},"src/shared/dns-domain.c":{"insertions":1,"deletions":2},"src/shared/efivars.c":{"insertions":0,"deletions":1},"src/shared/fstab-util.c":{"insertions":1,"deletions":2},"src/shared/logs-show.c":{"insertions":0,"deletions":1},"src/shared/machine-pool.c":{"insertions":0,"deletions":1},"src/shared/sleep-config.c":{"insertions":0,"deletions":1},"src/systemctl/systemctl.c":{"insertions":0,"deletions":1},"src/test/test-btrfs.c":{"insertions":0,"deletions":1},"src/test/test-cap-list.c":{"insertions":3,"deletions":5},"src/test/test-cgroup-util.c":{"insertions":0,"deletions":1},"src/test/test-fileio.c":{"insertions":0,"deletions":1},"src/test/test-util.c":{"insertions":1,"deletions":2},"src/timedate/timedatectl.c":{"insertions":0,"deletions":1},"src/tmpfiles/tmpfiles.c":{"insertions":0,"deletions":1},"src/udev/net/link-config.c":{"insertions":0,"deletions":1},"src/udev/udev-builtin-keyboard.c":{"insertions":0,"deletions":1},"src/udev/udevadm-settle.c":{"insertions":0,"deletions":1},"src/udev/udevd.c":{"insertions":0,"deletions":1}}},"07630cea1f3a845c09309f197ac7c4f11edd3b62":{"author":"Lennart Poettering","email":"lennart@poettering.net","date":"2015-10-24 20:58:24 UTC","message":"util-lib: split our string related calls from util.[ch] into its own file string-util.[ch]\n\nThere are more than enough calls doing string manipulations to deserve\nits own files, hence do something about it.\n\nThis patch also sorts the #include blocks of all files that needed to be\nupdated, according to the sorting suggestions from CODING_STYLE. Since\npretty much every file needs our string manipulation functions this\neffectively means that most files have sorted #include blocks now.\n\nAlso touches a few unrelated include files.","insertions":2278,"deletions":2708,"filepaths":{"Makefile.am":{"insertions":0,"deletions":2},"src/activate/activate.c":{"insertions":0,"deletions":1},"src/backlight/backlight.c":{"insertions":1,"deletions":3},"src/basic/btrfs-util.c":{"insertions":7,"deletions":7},"src/basic/calendarspec.c":{"insertions":0,"deletions":1},"src/basic/cgroup-util.c":{"insertions":0,"deletions":1},"src/basic/clock-util.c":{"insertions":2,"deletions":3},"src/basic/conf-files.c":{"insertions":7,"deletions":8},"src/basic/copy.c":{"insertions":1,"deletions":2},"src/basic/env-util.c":{"insertions":1,"deletions":2},"src/basic/fdset.c":{"insertions":1,"deletions":2},"src/basic/fileio.c":{"insertions":0,"deletions":1},"src/basic/hostname-util.c":{"insertions":1,"deletions":2},"src/basic/json.c":{"insertions":1,"deletions":3},"src/basic/locale-util.c":{"insertions":3,"deletions":3},"src/basic/log.c":{"insertions":11,"deletions":13},"src/basic/log.h":{"insertions":3,"deletions":4},"src/basic/login-util.c":{"insertions":1,"deletions":2},"src/basic/memfd-util.c":{"insertions":7,"deletions":7},"src/basic/path-util.c":{"insertions":8,"deletions":9},"src/basic/process-util.c":{"insertions":0,"deletions":1},"src/basic/rm-rf.c":{"insertions":2,"deletions":3},"src/basic/signal-util.c":{"insertions":0,"deletions":2},"src/basic/socket-util.c":{"insertions":9,"deletions":10},"src/basic/string-util.c":{"insertions":0,"deletions":767},"src/basic/string-util.h":{"insertions":0,"deletions":170},"src/basic/strv.c":{"insertions":2,"deletions":3},"src/basic/terminal-util.c":{"insertions":13,"deletions":14},"src/basic/time-util.c":{"insertions":3,"deletions":4},"src/basic/unit-name.c":{"insertions":3,"deletions":4},"src/basic/util.c":{"insertions":743,"deletions":1},"src/basic/util.h":{"insertions":139,"deletions":0},"src/basic/verbs.c":{"insertions":0,"deletions":1},"src/basic/virt.c":{"insertions":3,"deletions":4},"src/basic/xml.c":{"insertions":0,"deletions":1},"src/binfmt/binfmt.c":{"insertions":0,"deletions":1},"src/boot/bootctl.c":{"insertions":0,"deletions":1},"src/bootchart/bootchart.c":{"insertions":14,"deletions":16},"src/bootchart/store.c":{"insertions":8,"deletions":9},"src/bus-proxyd/bus-proxyd.c":{"insertions":0,"deletions":1},"src/bus-proxyd/bus-xml-policy.c":{"insertions":6,"deletions":8},"src/bus-proxyd/driver.c":{"insertions":5,"deletions":6},"src/bus-proxyd/proxy.h":{"insertions":0,"deletions":1},"src/bus-proxyd/synthesize.c":{"insertions":2,"deletions":3},"src/bus-proxyd/synthesize.h":{"insertions":0,"deletions":1},"src/bus-proxyd/test-bus-xml-policy.c":{"insertions":4,"deletions":6},"src/cgroups-agent/cgroups-agent.c":{"insertions":1,"deletions":2},"src/core/automount.c":{"insertions":15,"deletions":16},"src/core/busname.c":{"insertions":6,"deletions":7},"src/core/busname.h":{"insertions":0,"deletions":2},"src/core/cgroup.c":{"insertions":1,"deletions":1},"src/core/dbus-automount.c":{"insertions":1,"deletions":2},"src/core/dbus-busname.c":{"insertions":2,"deletions":3},"src/core/dbus-cgroup.h":{"insertions":0,"deletions":1},"src/core/dbus-execute.h":{"insertions":0,"deletions":1},"src/core/dbus-job.c":{"insertions":3,"deletions":5},"src/core/dbus-job.h":{"insertions":0,"deletions":1},"src/core/dbus-kill.h":{"insertions":0,"deletions":1},"src/core/dbus-manager.c":{"insertions":14,"deletions":15},"src/core/dbus-mount.c":{"insertions":4,"deletions":5},"src/core/dbus-mount.h":{"insertions":0,"deletions":1},"src/core/dbus-path.c":{"insertions":2,"deletions":3},"src/core/dbus-service.c":{"insertions":6,"deletions":7},"src/core/dbus-socket.c":{"insertions":4,"deletions":5},"src/core/dbus-swap.c":{"insertions":4,"deletions":5},"src/core/dbus-target.h":{"insertions":0,"deletions":1},"src/core/dbus-unit.c":{"insertions":4,"deletions":6},"src/core/dbus.c":{"insertions":15,"deletions":17},"src/core/device.c":{"insertions":4,"deletions":6},"src/core/execute.c":{"insertions":0,"deletions":1},"src/core/hostname-setup.c":{"insertions":4,"deletions":5},"src/core/job.c":{"insertions":0,"deletions":1},"src/core/job.h":{"insertions":2,"deletions":4},"src/core/killall.c":{"insertions":5,"deletions":6},"src/core/load-fragment.c":{"insertions":0,"deletions":1},"src/core/locale-setup.c":{"insertions":6,"deletions":7},"src/core/loopback-setup.c":{"insertions":2,"deletions":3},"src/core/machine-id-setup.c":{"insertions":0,"deletions":1},"src/core/manager.c":{"insertions":0,"deletions":1},"src/core/mount.c":{"insertions":0,"deletions":1},"src/core/namespace.c":{"insertions":10,"deletions":11},"src/core/path.c":{"insertions":9,"deletions":10},"src/core/scope.c":{"insertions":3,"deletions":4},"src/core/selinux-setup.c":{"insertions":5,"deletions":6},"src/core/service.c":{"insertions":0,"deletions":1},"src/core/show-status.c":{"insertions":1,"deletions":2},"src/core/shutdown.c":{"insertions":15,"deletions":16},"src/core/slice.c":{"insertions":2,"deletions":3},"src/core/smack-setup.c":{"insertions":7,"deletions":8},"src/core/snapshot.c":{"insertions":3,"deletions":4},"src/core/socket.c":{"insertions":0,"deletions":1},"src/core/swap.c":{"insertions":1,"deletions":3},"src/core/swap.h":{"insertions":1,"deletions":1},"src/core/target.c":{"insertions":4,"deletions":4},"src/core/timer.c":{"insertions":5,"deletions":6},"src/core/umount.c":{"insertions":1,"deletions":3},"src/core/unit-printf.c":{"insertions":4,"deletions":5},"src/core/unit.c":{"insertions":1,"deletions":1},"src/cryptsetup/cryptsetup-generator.c":{"insertions":1,"deletions":2},"src/cryptsetup/cryptsetup.c":{"insertions":3,"deletions":4},"src/debug-generator/debug-generator.c":{"insertions":0,"deletions":1},"src/delta/delta.c":{"insertions":0,"deletions":1},"src/escape/escape.c":{"insertions":0,"deletions":1},"src/firstboot/firstboot.c":{"insertions":0,"deletions":1},"src/fstab-generator/fstab-generator.c":{"insertions":8,"deletions":9},"src/getty-generator/getty-generator.c":{"insertions":6,"deletions":7},"src/gpt-auto-generator/gpt-auto-generator.c":{"insertions":12,"deletions":14},"src/hibernate-resume/hibernate-resume-generator.c":{"insertions":3,"deletions":4},"src/hwdb/hwdb.c":{"insertions":0,"deletions":1},"src/import/aufs-util.c":{"insertions":1,"deletions":2},"src/import/curl-util.c":{"insertions":0,"deletions":1},"src/import/curl-util.h":{"insertions":1,"deletions":2},"src/import/export-raw.c":{"insertions":3,"deletions":5},"src/import/export-tar.c":{"insertions":5,"deletions":5},"src/import/export.c":{"insertions":0,"deletions":1},"src/import/import-raw.c":{"insertions":8,"deletions":10},"src/import/import-tar.c":{"insertions":9,"deletions":11},"src/import/import.c":{"insertions":0,"deletions":1},"src/import/pull-common.c":{"insertions":0,"deletions":1},"src/import/pull-dkr.c":{"insertions":11,"deletions":13},"src/import/pull-job.c":{"insertions":1,"deletions":2},"src/import/pull-raw.c":{"insertions":13,"deletions":15},"src/import/pull-tar.c":{"insertions":10,"deletions":12},"src/import/pull.c":{"insertions":0,"deletions":1},"src/journal-remote/journal-remote-parse.c":{"insertions":1,"deletions":2},"src/journal-remote/journal-remote.c":{"insertions":0,"deletions":1},"src/journal-remote/journal-upload.c":{"insertions":1,"deletions":2},"src/journal-remote/microhttpd-util.c":{"insertions":6,"deletions":7},"src/journal/cat.c":{"insertions":0,"deletions":1},"src/journal/catalog.c":{"insertions":10,"deletions":12},"src/journal/compress.c":{"insertions":4,"deletions":5},"src/journal/coredump-vacuum.c":{"insertions":3,"deletions":3},"src/journal/coredump.c":{"insertions":0,"deletions":1},"src/journal/coredumpctl.c":{"insertions":0,"deletions":1},"src/journal/journal-file.c":{"insertions":8,"deletions":9},"src/journal/journal-internal.h":{"insertions":4,"deletions":4},"src/journal/journal-send.c":{"insertions":6,"deletions":8},"src/journal/journal-vacuum.c":{"insertions":2,"deletions":5},"src/journal/journald-audit.c":{"insertions":1,"deletions":2},"src/journal/journald-kmsg.c":{"insertions":0,"deletions":1},"src/journal/journald-native.c":{"insertions":7,"deletions":8},"src/journal/journald-rate-limit.c":{"insertions":4,"deletions":5},"src/journal/journald-server.c":{"insertions":9,"deletions":10},"src/journal/journald-stream.c":{"insertions":1,"deletions":2},"src/journal/journald-syslog.c":{"insertions":8,"deletions":10},"src/journal/journald-wall.c":{"insertions":3,"deletions":4},"src/journal/sd-journal.c":{"insertions":12,"deletions":14},"src/journal/stacktrace.c":{"insertions":2,"deletions":3},"src/journal/test-catalog.c":{"insertions":1,"deletions":3},"src/journal/test-compress-benchmark.c":{"insertions":1,"deletions":2},"src/journal/test-journal-enum.c":{"insertions":1,"deletions":2},"src/journal/test-journal-flush.c":{"insertions":1,"deletions":3},"src/journal/test-journal-match.c":{"insertions":2,"deletions":3},"src/journal/test-journal-syslog.c":{"insertions":0,"deletions":1},"src/libsystemd-network/dhcp-identifier.c":{"insertions":9,"deletions":6},"src/libsystemd-network/dhcp-identifier.h":{"insertions":1,"deletions":1},"src/libsystemd-network/dhcp-internal.h":{"insertions":4,"deletions":4},"src/libsystemd-network/dhcp6-internal.h":{"insertions":1,"deletions":2},"src/libsystemd-network/lldp-internal.c":{"insertions":1,"deletions":2},"src/libsystemd-network/lldp-internal.h":{"insertions":2,"deletions":3},"src/libsystemd-network/network-internal.c":{"insertions":7,"deletions":9},"src/libsystemd-network/sd-dhcp-client.c":{"insertions":10,"deletions":11},"src/libsystemd-network/sd-dhcp-lease.c":{"insertions":9,"deletions":10},"src/libsystemd-network/sd-dhcp-server.c":{"insertions":4,"deletions":5},"src/libsystemd-network/sd-dhcp6-client.c":{"insertions":8,"deletions":6},"src/libsystemd-network/sd-ipv4acd.c":{"insertions":4,"deletions":4},"src/libsystemd-network/sd-ipv4ll.c":{"insertions":6,"deletions":6},"src/libsystemd-network/sd-lldp.c":{"insertions":6,"deletions":7},"src/libsystemd-network/sd-ndisc.c":{"insertions":5,"deletions":5},"src/libsystemd-network/sd-pppoe.c":{"insertions":6,"deletions":6},"src/libsystemd-network/test-dhcp-client.c":{"insertions":4,"deletions":4},"src/libsystemd-network/test-dhcp-server.c":{"insertions":2,"deletions":2},"src/libsystemd-network/test-dhcp6-client.c":{"insertions":8,"deletions":8},"src/libsystemd-network/test-ipv4ll-manual.c":{"insertions":6,"deletions":6},"src/libsystemd-network/test-ipv4ll.c":{"insertions":6,"deletions":6},"src/libsystemd-network/test-lldp.c":{"insertions":6,"deletions":8},"src/libsystemd-network/test-ndisc-rs.c":{"insertions":2,"deletions":2},"src/libsystemd/sd-bus/bus-control.c":{"insertions":3,"deletions":5},"src/libsystemd/sd-bus/bus-convenience.c":{"insertions":1,"deletions":2},"src/libsystemd/sd-bus/bus-creds.c":{"insertions":10,"deletions":11},"src/libsystemd/sd-bus/bus-dump.c":{"insertions":8,"deletions":8},"src/libsystemd/sd-bus/bus-error.c":{"insertions":5,"deletions":6},"src/libsystemd/sd-bus/bus-internal.c":{"insertions":1,"deletions":2},"src/libsystemd/sd-bus/bus-internal.h":{"insertions":9,"deletions":9},"src/libsystemd/sd-bus/bus-introspect.c":{"insertions":3,"deletions":4},"src/libsystemd/sd-bus/bus-kernel.c":{"insertions":9,"deletions":9},"src/libsystemd/sd-bus/bus-match.c":{"insertions":1,"deletions":2},"src/libsystemd/sd-bus/bus-match.h":{"insertions":2,"deletions":2},"src/libsystemd/sd-bus/bus-message.c":{"insertions":9,"deletions":10},"src/libsystemd/sd-bus/bus-message.h":{"insertions":3,"deletions":4},"src/libsystemd/sd-bus/bus-objects.c":{"insertions":5,"deletions":6},"src/libsystemd/sd-bus/bus-slot.c":{"insertions":0,"deletions":2},"src/libsystemd/sd-bus/bus-socket.c":{"insertions":8,"deletions":9},"src/libsystemd/sd-bus/bus-type.h":{"insertions":1,"deletions":2},"src/libsystemd/sd-bus/busctl-introspect.c":{"insertions":2,"deletions":3},"src/libsystemd/sd-bus/sd-bus.c":{"insertions":16,"deletions":17},"src/libsystemd/sd-bus/test-bus-benchmark.c":{"insertions":5,"deletions":5},"src/libsystemd/sd-bus/test-bus-chat.c":{"insertions":6,"deletions":6},"src/libsystemd/sd-bus/test-bus-cleanup.c":{"insertions":1,"deletions":2},"src/libsystemd/sd-bus/test-bus-gvariant.c":{"insertions":4,"deletions":5},"src/libsystemd/sd-bus/test-bus-kernel-bloom.c":{"insertions":3,"deletions":3},"src/libsystemd/sd-bus/test-bus-kernel.c":{"insertions":4,"deletions":4},"src/libsystemd/sd-bus/test-bus-marshal.c":{"insertions":5,"deletions":5},"src/libsystemd/sd-bus/test-bus-objects.c":{"insertions":6,"deletions":6},"src/libsystemd/sd-bus/test-bus-proxy.c":{"insertions":4,"deletions":4},"src/libsystemd/sd-bus/test-bus-server.c":{"insertions":5,"deletions":5},"src/libsystemd/sd-bus/test-bus-signature.c":{"insertions":1,"deletions":1},"src/libsystemd/sd-bus/test-bus-zero-copy.c":{"insertions":6,"deletions":7},"src/libsystemd/sd-daemon/sd-daemon.c":{"insertions":2,"deletions":2},"src/libsystemd/sd-device/device-enumerator.c":{"insertions":6,"deletions":6},"src/libsystemd/sd-device/device-private.c":{"insertions":13,"deletions":13},"src/libsystemd/sd-device/device-private.h":{"insertions":0,"deletions":6},"src/libsystemd/sd-device/sd-device.c":{"insertions":11,"deletions":11},"src/libsystemd/sd-event/event-util.h":{"insertions":1,"deletions":2},"src/libsystemd/sd-event/sd-event.c":{"insertions":8,"deletions":9},"src/libsystemd/sd-hwdb/hwdb-util.h":{"insertions":2,"deletions":2},"src/libsystemd/sd-hwdb/sd-hwdb.c":{"insertions":6,"deletions":6},"src/libsystemd/sd-id128/sd-id128.c":{"insertions":2,"deletions":3},"src/libsystemd/sd-login/sd-login.c":{"insertions":1,"deletions":3},"src/libsystemd/sd-login/test-login.c":{"insertions":3,"deletions":4},"src/libsystemd/sd-netlink/netlink-internal.h":{"insertions":4,"deletions":3},"src/libsystemd/sd-netlink/netlink-message.c":{"insertions":6,"deletions":6},"src/libsystemd/sd-netlink/netlink-socket.c":{"insertions":6,"deletions":6},"src/libsystemd/sd-netlink/netlink-util.c":{"insertions":1,"deletions":0},"src/libsystemd/sd-netlink/netlink-util.h":{"insertions":1,"deletions":1},"src/libsystemd/sd-netlink/rtnl-message.c":{"insertions":6,"deletions":6},"src/libsystemd/sd-netlink/sd-netlink.c":{"insertions":6,"deletions":6},"src/libsystemd/sd-netlink/test-netlink.c":{"insertions":5,"deletions":7},"src/libsystemd/sd-network/sd-network.c":{"insertions":5,"deletions":7},"src/libsystemd/sd-path/sd-path.c":{"insertions":3,"deletions":5},"src/libsystemd/sd-resolve/resolve-util.h":{"insertions":1,"deletions":2},"src/libsystemd/sd-resolve/sd-resolve.c":{"insertions":10,"deletions":11},"src/libsystemd/sd-resolve/test-resolve.c":{"insertions":6,"deletions":8},"src/libsystemd/sd-utf8/sd-utf8.c":{"insertions":1,"deletions":2},"src/libudev/libudev-device-internal.h":{"insertions":1,"deletions":2},"src/libudev/libudev-device-private.c":{"insertions":2,"deletions":2},"src/libudev/libudev-device.c":{"insertions":14,"deletions":14},"src/libudev/libudev-enumerate.c":{"insertions":8,"deletions":8},"src/libudev/libudev-hwdb.c":{"insertions":1,"deletions":2},"src/libudev/libudev-monitor.c":{"insertions":8,"deletions":10},"src/libudev/libudev-private.h":{"insertions":1,"deletions":2},"src/libudev/libudev-util.c":{"insertions":6,"deletions":7},"src/libudev/libudev.c":{"insertions":3,"deletions":5},"src/login/logind-acl.c":{"insertions":0,"deletions":1},"src/login/logind-acl.h":{"insertions":1,"deletions":2},"src/login/logind-action.h":{"insertions":0,"deletions":1},"src/login/logind-button.c":{"insertions":1,"deletions":3},"src/login/logind-inhibit.c":{"insertions":0,"deletions":1},"src/login/logind-seat.c":{"insertions":4,"deletions":6},"src/login/logind-session-device.c":{"insertions":1,"deletions":2},"src/login/logind.c":{"insertions":5,"deletions":6},"src/login/logind.h":{"insertions":5,"deletions":6},"src/login/sysfs-show.c":{"insertions":4,"deletions":6},"src/login/test-inhibit.c":{"insertions":2,"deletions":3},"src/machine/machined.h":{"insertions":3,"deletions":4},"src/modules-load/modules-load.c":{"insertions":1,"deletions":2},"src/network/networkctl.c":{"insertions":0,"deletions":1},"src/network/networkd-address-pool.c":{"insertions":1,"deletions":2},"src/network/networkd-address.c":{"insertions":2,"deletions":2},"src/network/networkd-dhcp6.c":{"insertions":3,"deletions":3},"src/network/networkd-link.h":{"insertions":2,"deletions":2},"src/network/networkd-manager.c":{"insertions":9,"deletions":8},"src/network/networkd-ndisc.c":{"insertions":2,"deletions":2},"src/network/networkd-netdev-bond.c":{"insertions":2,"deletions":4},"src/network/networkd-netdev-tunnel.c":{"insertions":3,"deletions":5},"src/network/networkd-netdev.c":{"insertions":2,"deletions":2},"src/network/networkd-network-bus.c":{"insertions":2,"deletions":2},"src/network/networkd-network.c":{"insertions":3,"deletions":3},"src/network/networkd-route.c":{"insertions":2,"deletions":2},"src/network/networkd-util.c":{"insertions":2,"deletions":2},"src/network/networkd-wait-online-link.c":{"insertions":1,"deletions":1},"src/notify/notify.c":{"insertions":0,"deletions":1},"src/nspawn/nspawn-cgroup.c":{"insertions":5,"deletions":5},"src/nspawn/nspawn-expose-ports.c":{"insertions":3,"deletions":3},"src/nspawn/nspawn-mount.c":{"insertions":2,"deletions":2},"src/nspawn/nspawn-network.c":{"insertions":4,"deletions":4},"src/nspawn/nspawn-setuid.c":{"insertions":4,"deletions":4},"src/nspawn/nspawn.c":{"insertions":8,"deletions":8},"src/nss-myhostname/nss-myhostname.c":{"insertions":4,"deletions":5},"src/nss-mymachines/nss-mymachines.c":{"insertions":6,"deletions":8},"src/nss-resolve/nss-resolve.c":{"insertions":6,"deletions":8},"src/path/path.c":{"insertions":0,"deletions":1},"src/quotacheck/quotacheck.c":{"insertions":4,"deletions":5},"src/random-seed/random-seed.c":{"insertions":3,"deletions":4},"src/rc-local-generator/rc-local-generator.c":{"insertions":1,"deletions":2},"src/reply-password/reply-password.c":{"insertions":3,"deletions":4},"src/resolve/resolved-conf.c":{"insertions":1,"deletions":1},"src/resolve/resolved-dns-answer.c":{"insertions":1,"deletions":2},"src/resolve/resolved-dns-rr.c":{"insertions":4,"deletions":4},"src/resolve/resolved-dns-zone.c":{"insertions":3,"deletions":3},"src/resolve/resolved-link.c":{"insertions":1,"deletions":3},"src/resolve/resolved-manager.c":{"insertions":11,"deletions":11},"src/rfkill/rfkill.c":{"insertions":0,"deletions":1},"src/shared/acl-util.c":{"insertions":2,"deletions":3},"src/shared/architecture.c":{"insertions":0,"deletions":1},"src/shared/ask-password-api.c":{"insertions":0,"deletions":1},"src/shared/base-filesystem.c":{"insertions":2,"deletions":3},"src/shared/bus-util.c":{"insertions":1,"deletions":1},"src/shared/bus-util.h":{"insertions":1,"deletions":3},"src/shared/cgroup-show.c":{"insertions":6,"deletions":7},"src/shared/clean-ipc.c":{"insertions":6,"deletions":7},"src/shared/condition.c":{"insertions":0,"deletions":1},"src/shared/conf-parser.c":{"insertions":6,"deletions":8},"src/shared/dns-domain.c":{"insertions":0,"deletions":1},"src/shared/dropin.c":{"insertions":0,"deletions":1},"src/shared/fstab-util.c":{"insertions":1,"deletions":2},"src/shared/generator.c":{"insertions":0,"deletions":1},"src/shared/import-util.c":{"insertions":0,"deletions":1},"src/shared/install.c":{"insertions":10,"deletions":11},"src/shared/logs-show.c":{"insertions":11,"deletions":11},"src/shared/machine-image.c":{"insertions":1,"deletions":1},"src/shared/machine-pool.c":{"insertions":5,"deletions":6},"src/shared/pager.c":{"insertions":6,"deletions":7},"src/shared/path-lookup.c":{"insertions":1,"deletions":2},"src/shared/seccomp-util.c":{"insertions":0,"deletions":1},"src/shared/sleep-config.c":{"insertions":1,"deletions":2},"src/shared/specifier.c":{"insertions":1,"deletions":2},"src/shared/switch-root.c":{"insertions":7,"deletions":8},"src/shared/sysctl-util.c":{"insertions":0,"deletions":1},"src/shared/utmp-wtmp.c":{"insertions":4,"deletions":5},"src/sleep/sleep.c":{"insertions":0,"deletions":1},"src/socket-proxy/socket-proxyd.c":{"insertions":0,"deletions":1},"src/sysctl/sysctl.c":{"insertions":0,"deletions":1},"src/system-update-generator/system-update-generator.c":{"insertions":0,"deletions":1},"src/systemd/sd-dhcp6-client.h":{"insertions":0,"deletions":1},"src/systemd/sd-lldp.h":{"insertions":0,"deletions":2},"src/sysusers/sysusers.c":{"insertions":1,"deletions":2},"src/sysv-generator/sysv-generator.c":{"insertions":8,"deletions":9},"src/test/test-af-list.c":{"insertions":3,"deletions":4},"src/test/test-arphrd-list.c":{"insertions":2,"deletions":3},"src/test/test-btrfs.c":{"insertions":0,"deletions":1},"src/test/test-calendarspec.c":{"insertions":0,"deletions":1},"src/test/test-cgroup-util.c":{"insertions":1,"deletions":1},"src/test/test-cgroup.c":{"insertions":1,"deletions":2},"src/test/test-condition.c":{"insertions":8,"deletions":9},"src/test/test-conf-files.c":{"insertions":2,"deletions":3},"src/test/test-conf-parser.c":{"insertions":2,"deletions":3},"src/test/test-copy.c":{"insertions":3,"deletions":4},"src/test/test-date.c":{"insertions":0,"deletions":1},"src/test/test-device-nodes.c":{"insertions":0,"deletions":1},"src/test/test-dns-domain.c":{"insertions":1,"deletions":2},"src/test/test-ellipsize.c":{"insertions":2,"deletions":3},"src/test/test-env-replace.c":{"insertions":2,"deletions":3},"src/test/test-fileio.c":{"insertions":0,"deletions":1},"src/test/test-fstab-util.c":{"insertions":1,"deletions":2},"src/test/test-hashmap-plain.c":{"insertions":1,"deletions":2},"src/test/test-hostname-util.c":{"insertions":0,"deletions":1},"src/test/test-id128.c":{"insertions":3,"deletions":4},"src/test/test-json.c":{"insertions":1,"deletions":2},"src/test/test-libudev.c":{"insertions":2,"deletions":4},"src/test/test-namespace.c":{"insertions":1,"deletions":2},"src/test/test-netlink-manual.c":{"insertions":4,"deletions":5},"src/test/test-path-lookup.c":{"insertions":2,"deletions":3},"src/test/test-path-util.c":{"insertions":4,"deletions":5},"src/test/test-path.c":{"insertions":5,"deletions":6},"src/test/test-process-util.c":{"insertions":4,"deletions":5},"src/test/test-replace-var.c":{"insertions":1,"deletions":2},"src/test/test-socket-util.c":{"insertions":4,"deletions":5},"src/test/test-strbuf.c":{"insertions":0,"deletions":1},"src/test/test-strip-tab-ansi.c":{"insertions":1,"deletions":2},"src/test/test-strv.c":{"insertions":1,"deletions":2},"src/test/test-strxcpyx.c":{"insertions":1,"deletions":2},"src/test/test-tmpfiles.c":{"insertions":3,"deletions":4},"src/test/test-udev.c":{"insertions":4,"deletions":5},"src/test/test-unit-file.c":{"insertions":9,"deletions":10},"src/test/test-unit-name.c":{"insertions":7,"deletions":8},"src/test/test-utf8.c":{"insertions":0,"deletions":1},"src/test/test-util.c":{"insertions":0,"deletions":1},"src/test/test-xml.c":{"insertions":1,"deletions":2},"src/timesync/timesyncd-conf.c":{"insertions":1,"deletions":1},"src/timesync/timesyncd-manager.c":{"insertions":12,"deletions":14},"src/tmpfiles/tmpfiles.c":{"insertions":0,"deletions":1},"src/tty-ask-password-agent/tty-ask-password-agent.c":{"insertions":0,"deletions":1},"src/udev/ata_id/ata_id.c":{"insertions":11,"deletions":12},"src/udev/cdrom_id/cdrom_id.c":{"insertions":11,"deletions":12},"src/udev/collect/collect.c":{"insertions":2,"deletions":3},"src/udev/net/link-config.c":{"insertions":9,"deletions":9},"src/udev/net/link-config.h":{"insertions":2,"deletions":3},"src/udev/scsi_id/scsi_id.c":{"insertions":8,"deletions":10},"src/udev/scsi_id/scsi_serial.c":{"insertions":11,"deletions":13},"src/udev/udev-builtin-blkid.c":{"insertions":5,"deletions":7},"src/udev/udev-builtin-btrfs.c":{"insertions":1,"deletions":2},"src/udev/udev-builtin-hwdb.c":{"insertions":3,"deletions":4},"src/udev/udev-builtin-input_id.c":{"insertions":3,"deletions":4},"src/udev/udev-builtin-keyboard.c":{"insertions":1,"deletions":2},"src/udev/udev-builtin-kmod.c":{"insertions":3,"deletions":4},"src/udev/udev-builtin-net_id.c":{"insertions":7,"deletions":8},"src/udev/udev-builtin-path_id.c":{"insertions":7,"deletions":8},"src/udev/udev-builtin-usb_id.c":{"insertions":5,"deletions":6},"src/udev/udev-builtin.c":{"insertions":1,"deletions":2},"src/udev/udev-event.c":{"insertions":10,"deletions":11},"src/udev/udev-node.c":{"insertions":10,"deletions":11},"src/udev/udev-rules.c":{"insertions":1,"deletions":2},"src/udev/udev.h":{"insertions":5,"deletions":6},"src/udev/udevadm-hwdb.c":{"insertions":6,"deletions":6},"src/udev/udevadm-info.c":{"insertions":6,"deletions":7},"src/udev/udevadm-test-builtin.c":{"insertions":3,"deletions":4},"src/udev/udevadm-test.c":{"insertions":6,"deletions":7},"src/udev/udevadm-trigger.c":{"insertions":5,"deletions":6},"src/udev/udevadm-util.c":{"insertions":0,"deletions":1},"src/udev/udevadm.c":{"insertions":2,"deletions":3},"src/udev/udevd.c":{"insertions":0,"deletions":1},"src/user-sessions/user-sessions.c":{"insertions":2,"deletions":3},"src/vconsole/vconsole-setup.c":{"insertions":10,"deletions":11}}},"601185b43da638b1c74153deae01dbd518680889":{"author":"Zbigniew Jędrzejewski-Szmek","email":"zbyszek@in.waw.pl","date":"2014-08-02 15:12:21 UTC","message":"Unify parse_argv style\n\ngetopt is usually good at printing out a nice error message when\ncommandline options are invalid. It distinguishes between an unknown\noption and a known option with a missing arg. It is better to let it\ndo its job and not use opterr=0 unless we actually want to suppress\nmessages. So remove opterr=0 in the few places where it wasn't really\nuseful.\n\nWhen an error in options is encountered, we should not print a lengthy\nhelp() and overwhelm the user, when we know precisely what is wrong\nwith the commandline. In addition, since help() prints to stdout, it\nshould not be used except when requested with -h or --help.\n\nAlso, simplify things here and there.","insertions":426,"deletions":303,"filepaths":{"CODING_STYLE":{"insertions":0,"deletions":5},"src/activate/activate.c":{"insertions":7,"deletions":5},"src/analyze/analyze.c":{"insertions":10,"deletions":1},"src/ask-password/ask-password.c":{"insertions":12,"deletions":10},"src/binfmt/binfmt.c":{"insertions":9,"deletions":6},"src/boot/bootctl.c":{"insertions":20,"deletions":13},"src/bootchart/bootchart.c":{"insertions":13,"deletions":19},"src/bus-proxyd/bus-proxyd.c":{"insertions":2,"deletions":1},"src/cgls/cgls.c":{"insertions":9,"deletions":6},"src/cgtop/cgtop.c":{"insertions":9,"deletions":6},"src/core/main.c":{"insertions":5,"deletions":5},"src/core/shutdown.c":{"insertions":8,"deletions":1},"src/delta/delta.c":{"insertions":8,"deletions":4},"src/detect-virt/detect-virt.c":{"insertions":10,"deletions":8},"src/escape/escape.c":{"insertions":9,"deletions":6},"src/firstboot/firstboot.c":{"insertions":9,"deletions":6},"src/hostname/hostnamectl.c":{"insertions":9,"deletions":6},"src/journal-remote/journal-gatewayd.c":{"insertions":5,"deletions":3},"src/journal-remote/journal-remote.c":{"insertions":2,"deletions":1},"src/journal/cat.c":{"insertions":9,"deletions":6},"src/journal/coredumpctl.c":{"insertions":24,"deletions":22},"src/journal/journalctl.c":{"insertions":6,"deletions":4},"src/libsystemd/sd-bus/busctl.c":{"insertions":5,"deletions":3},"src/locale/localectl.c":{"insertions":9,"deletions":6},"src/login/inhibit.c":{"insertions":9,"deletions":6},"src/login/loginctl.c":{"insertions":9,"deletions":6},"src/machine-id-setup/machine-id-setup-main.c":{"insertions":7,"deletions":4},"src/machine/machinectl.c":{"insertions":7,"deletions":4},"src/modules-load/modules-load.c":{"insertions":7,"deletions":4},"src/network/networkd-wait-online.c":{"insertions":9,"deletions":6},"src/notify/notify.c":{"insertions":7,"deletions":4},"src/nspawn/nspawn.c":{"insertions":7,"deletions":4},"src/path/path.c":{"insertions":15,"deletions":12},"src/readahead/readahead.c":{"insertions":17,"deletions":13},"src/resolve-host/resolve-host.c":{"insertions":2,"deletions":1},"src/run/run.c":{"insertions":7,"deletions":4},"src/sleep/sleep.c":{"insertions":8,"deletions":5},"src/socket-proxy/socket-proxyd.c":{"insertions":10,"deletions":6},"src/sysctl/sysctl.c":{"insertions":9,"deletions":6},"src/systemctl/systemctl.c":{"insertions":35,"deletions":22},"src/sysusers/sysusers.c":{"insertions":9,"deletions":6},"src/test/test-libudev.c":{"insertions":8,"deletions":14},"src/timedate/timedatectl.c":{"insertions":7,"deletions":4},"src/tmpfiles/tmpfiles.c":{"insertions":7,"deletions":4},"src/tty-ask-password-agent/tty-ask-password-agent.c":{"insertions":8,"deletions":5},"src/udev/udevadm.c":{"insertions":13,"deletions":10}}},"2e33c4331f9f1169645e4b2e9c7c8861454f6b51":{"author":"Lennart Poettering","email":"lennart@poettering.net","date":"2010-06-23 22:08:42 UTC","message":"minor fixes to help texts","insertions":18,"deletions":18,"filepaths":{"src/install.c":{"insertions":2,"deletions":2},"src/main.c":{"insertions":1,"deletions":1},"src/notify.c":{"insertions":1,"deletions":1},"src/systemctl.c":{"insertions":14,"deletions":14}}},"6624768c9c39ab409edebe07cb06ecd93cc6f3ed":{"author":"Lennart Poettering","email":"lennart@poettering.net","date":"2010-09-26 13:50:14 UTC","message":"readahead: add interface to sd-daemon.[ch] to control readahead","insertions":18,"deletions":405,"filepaths":{"Makefile.am":{"insertions":0,"deletions":1},"fixme":{"insertions":0,"deletions":4},"man/sd_readahead.xml":{"insertions":0,"deletions":178},"man/systemd-notify.xml":{"insertions":0,"deletions":11},"src/notify.c":{"insertions":13,"deletions":29},"src/readahead-collect.c":{"insertions":5,"deletions":68},"src/readahead-common.c":{"insertions":0,"deletions":21},"src/readahead-common.h":{"insertions":0,"deletions":2},"src/readahead-replay.c":{"insertions":0,"deletions":43},"src/sd-daemon.c":{"insertions":0,"deletions":38},"src/sd-daemon.h":{"insertions":0,"deletions":10}}},"eb9da376d76b48585b3b63b4f91903b54f7abd36":{"author":"Lennart Poettering","email":"lennart@poettering.net","date":"2013-11-06 17:28:39 UTC","message":"clients: unify how we invoke getopt_long()\n\nAmong other things this makes sure we always expose a --version command\nand show it in the help texts.","insertions":215,"deletions":227,"filepaths":{"man/systemd-readahead-replay.service.xml":{"insertions":0,"deletions":7},"man/systemd-tmpfiles.xml":{"insertions":9,"deletions":14},"src/activate/activate.c":{"insertions":5,"deletions":3},"src/analyze/analyze.c":{"insertions":11,"deletions":12},"src/ask-password/ask-password.c":{"insertions":5,"deletions":3},"src/binfmt/binfmt.c":{"insertions":5,"deletions":15},"src/boot/bootctl.c":{"insertions":5,"deletions":5},"src/cgls/cgls.c":{"insertions":6,"deletions":6},"src/cgtop/cgtop.c":{"insertions":10,"deletions":7},"src/delta/delta.c":{"insertions":7,"deletions":8},"src/detect-virt/detect-virt.c":{"insertions":5,"deletions":3},"src/hostname/hostnamectl.c":{"insertions":8,"deletions":6},"src/journal/cat.c":{"insertions":5,"deletions":6},"src/journal/coredumpctl.c":{"insertions":6,"deletions":5},"src/journal/journal-gatewayd.c":{"insertions":6,"deletions":7},"src/journal/journalctl.c":{"insertions":8,"deletions":6},"src/libsystemd-bus/busctl.c":{"insertions":3,"deletions":2},"src/locale/localectl.c":{"insertions":5,"deletions":3},"src/login/inhibit.c":{"insertions":5,"deletions":6},"src/login/loginctl.c":{"insertions":5,"deletions":3},"src/machine-id-setup/machine-id-setup-main.c":{"insertions":5,"deletions":3},"src/machine/machinectl.c":{"insertions":5,"deletions":3},"src/modules-load/modules-load.c":{"insertions":5,"deletions":15},"src/notify/notify.c":{"insertions":5,"deletions":3},"src/nspawn/nspawn.c":{"insertions":5,"deletions":3},"src/readahead/readahead.c":{"insertions":6,"deletions":15},"src/run/run.c":{"insertions":5,"deletions":3},"src/sleep/sleep.c":{"insertions":5,"deletions":3},"src/socket-proxy/socket-proxyd.c":{"insertions":13,"deletions":9},"src/sysctl/sysctl.c":{"insertions":4,"deletions":11},"src/systemctl/systemctl.c":{"insertions":24,"deletions":15},"src/timedate/timedatectl.c":{"insertions":5,"deletions":3},"src/tmpfiles/tmpfiles.c":{"insertions":4,"deletions":11},"src/tty-ask-password-agent/tty-ask-password-agent.c":{"insertions":5,"deletions":3}}},"9de009a9f5dd0eb6eaba878a49d5f3317cc9b8a5":{"author":"Benjamin Robin","email":"dev@benjarobin.fr","date":"2015-09-19 19:57:51 UTC","message":"systemd-notify: Always pass a valid pid to sd_pid_notify\n\nIf the option --pid was used, take the pid from this option, unless take\nthe parend pid. Using 0 as pid (ucred of systemd-notify) will result 99% of the\ntime in a failure with this error: \"Cannot find unit for notify message of PID\"\n\nShouldn't we use always the ppid, since the MAINPID is something else ?\n\nSigned-off-by: Benjamin Robin <dev@benjarobin.fr>","insertions":1,"deletions":1,"filepaths":{"src/notify/notify.c":{"insertions":1,"deletions":1}}},"be8f4e9e8eb3b0c34a49c2e80a5c5b7dc6d175f0":{"author":"Lennart Poettering","email":"lennart@poettering.net","date":"2014-06-05 15:05:18 UTC","message":"sd-daemon: introduce sd_pid_notify() and sd_pid_notifyf()\n\nsd_pid_notify() operates like sd_notify(), however operates on a\ndifferent PID (for example the parent PID of a process).\n\nMake use of this in systemd-notify, so that message are sent from the\nPID specified with --pid= rather than the usually shortlived PID of\nsystemd-notify itself.\n\nThis should increase the likelyhood that PID 1 can identify the cgroup\nthat the notification message was sent from properly.","insertions":133,"deletions":163,"filepaths":{"src/libsystemd/sd-daemon/sd-daemon.c":{"insertions":101,"deletions":112},"src/notify/notify.c":{"insertions":24,"deletions":23},"src/shared/util.c":{"insertions":8,"deletions":16},"src/systemd/sd-daemon.h":{"insertions":0,"deletions":12}}},"da927ba997d68401563b927f92e6e40e021a8e5c":{"author":"Michal Schmidt","email":"mschmidt@redhat.com","date":"2014-11-28 12:19:16 UTC","message":"treewide: no need to negate errno for log_*_errno()\n\nIt corrrectly handles both positive and negative errno values.","insertions":1002,"deletions":1002,"filepaths":{"src/ac-power/ac-power.c":{"insertions":1,"deletions":1},"src/activate/activate.c":{"insertions":1,"deletions":1},"src/analyze/analyze-verify.c":{"insertions":4,"deletions":4},"src/analyze/analyze.c":{"insertions":1,"deletions":1},"src/backlight/backlight.c":{"insertions":4,"deletions":4},"src/binfmt/binfmt.c":{"insertions":3,"deletions":3},"src/bootchart/bootchart.c":{"insertions":2,"deletions":2},"src/bus-proxyd/bus-policy.c":{"insertions":7,"deletions":7},"src/bus-proxyd/bus-proxyd.c":{"insertions":46,"deletions":46},"src/cgls/cgls.c":{"insertions":3,"deletions":3},"src/cgroups-agent/cgroups-agent.c":{"insertions":2,"deletions":2},"src/cgtop/cgtop.c":{"insertions":2,"deletions":2},"src/console/consoled-session.c":{"insertions":1,"deletions":1},"src/console/consoled-terminal.c":{"insertions":4,"deletions":4},"src/console/consoled.c":{"insertions":2,"deletions":2},"src/core/busname.c":{"insertions":1,"deletions":1},"src/core/cgroup.c":{"insertions":8,"deletions":8},"src/core/dbus-job.c":{"insertions":2,"deletions":2},"src/core/dbus-manager.c":{"insertions":3,"deletions":3},"src/core/dbus-unit.c":{"insertions":2,"deletions":2},"src/core/dbus.c":{"insertions":35,"deletions":35},"src/core/device.c":{"insertions":5,"deletions":5},"src/core/execute.c":{"insertions":3,"deletions":3},"src/core/hostname-setup.c":{"insertions":1,"deletions":1},"src/core/job.c":{"insertions":1,"deletions":1},"src/core/load-dropin.c":{"insertions":2,"deletions":2},"src/core/locale-setup.c":{"insertions":2,"deletions":2},"src/core/machine-id-setup.c":{"insertions":2,"deletions":2},"src/core/main.c":{"insertions":26,"deletions":26},"src/core/manager.c":{"insertions":6,"deletions":6},"src/core/mount.c":{"insertions":1,"deletions":1},"src/core/path.c":{"insertions":1,"deletions":1},"src/core/scope.c":{"insertions":1,"deletions":1},"src/core/shutdown.c":{"insertions":6,"deletions":6},"src/core/socket.c":{"insertions":1,"deletions":1},"src/core/swap.c":{"insertions":1,"deletions":1},"src/core/timer.c":{"insertions":1,"deletions":1},"src/core/transaction.c":{"insertions":1,"deletions":1},"src/cryptsetup/cryptsetup-generator.c":{"insertions":2,"deletions":2},"src/cryptsetup/cryptsetup.c":{"insertions":9,"deletions":9},"src/dbus1-generator/dbus1-generator.c":{"insertions":3,"deletions":3},"src/debug-generator/debug-generator.c":{"insertions":1,"deletions":1},"src/delta/delta.c":{"insertions":1,"deletions":1},"src/detect-virt/detect-virt.c":{"insertions":3,"deletions":3},"src/efi-boot-generator/efi-boot-generator.c":{"insertions":1,"deletions":1},"src/firstboot/firstboot.c":{"insertions":17,"deletions":17},"src/fsck/fsck.c":{"insertions":4,"deletions":4},"src/fstab-generator/fstab-generator.c":{"insertions":2,"deletions":2},"src/gpt-auto-generator/gpt-auto-generator.c":{"insertions":5,"deletions":5},"src/hibernate-resume/hibernate-resume-generator.c":{"insertions":1,"deletions":1},"src/hibernate-resume/hibernate-resume.c":{"insertions":1,"deletions":1},"src/hostname/hostnamectl.c":{"insertions":1,"deletions":1},"src/hostname/hostnamed.c":{"insertions":11,"deletions":11},"src/initctl/initctl.c":{"insertions":3,"deletions":3},"src/journal-remote/journal-gatewayd.c":{"insertions":11,"deletions":11},"src/journal-remote/journal-remote-write.c":{"insertions":1,"deletions":1},"src/journal-remote/journal-remote.c":{"insertions":13,"deletions":13},"src/journal-remote/journal-upload-journal.c":{"insertions":8,"deletions":8},"src/journal-remote/journal-upload.c":{"insertions":6,"deletions":6},"src/journal-remote/microhttpd-util.c":{"insertions":2,"deletions":2},"src/journal/cat.c":{"insertions":2,"deletions":2},"src/journal/catalog.c":{"insertions":3,"deletions":3},"src/journal/coredump.c":{"insertions":6,"deletions":6},"src/journal/coredumpctl.c":{"insertions":12,"deletions":12},"src/journal/journalctl.c":{"insertions":33,"deletions":33},"src/journal/journald-audit.c":{"insertions":4,"deletions":4},"src/journal/journald-kmsg.c":{"insertions":2,"deletions":2},"src/journal/journald-native.c":{"insertions":2,"deletions":2},"src/journal/journald-server.c":{"insertions":21,"deletions":21},"src/journal/journald-stream.c":{"insertions":4,"deletions":4},"src/journal/journald-syslog.c":{"insertions":1,"deletions":1},"src/journal/journald-wall.c":{"insertions":1,"deletions":1},"src/journal/journald.c":{"insertions":1,"deletions":1},"src/journal/sd-journal.c":{"insertions":6,"deletions":6},"src/journal/test-compress.c":{"insertions":2,"deletions":2},"src/libsystemd-network/sd-dhcp-lease.c":{"insertions":2,"deletions":2},"src/libsystemd-network/sd-pppoe.c":{"insertions":4,"deletions":4},"src/libsystemd-terminal/evcat.c":{"insertions":7,"deletions":7},"src/libsystemd-terminal/idev-keyboard.c":{"insertions":4,"deletions":4},"src/libsystemd-terminal/modeset.c":{"insertions":5,"deletions":5},"src/libsystemd-terminal/subterm.c":{"insertions":19,"deletions":19},"src/libsystemd-terminal/sysview.c":{"insertions":2,"deletions":2},"src/libsystemd/sd-bus/bus-dump.c":{"insertions":5,"deletions":5},"src/libsystemd/sd-bus/bus-kernel.c":{"insertions":2,"deletions":2},"src/libsystemd/sd-bus/bus-track.c":{"insertions":1,"deletions":1},"src/libsystemd/sd-bus/bus-util.c":{"insertions":2,"deletions":2},"src/libsystemd/sd-bus/busctl.c":{"insertions":18,"deletions":18},"src/libsystemd/sd-bus/test-bus-chat.c":{"insertions":33,"deletions":33},"src/libsystemd/sd-bus/test-bus-objects.c":{"insertions":2,"deletions":2},"src/libsystemd/sd-bus/test-bus-server.c":{"insertions":6,"deletions":6},"src/libsystemd/sd-event/sd-event.c":{"insertions":4,"deletions":4},"src/libsystemd/sd-rtnl/rtnl-util.c":{"insertions":2,"deletions":2},"src/libsystemd/sd-rtnl/test-rtnl.c":{"insertions":4,"deletions":4},"src/locale/localectl.c":{"insertions":5,"deletions":5},"src/locale/localed.c":{"insertions":16,"deletions":16},"src/login/inhibit.c":{"insertions":1,"deletions":1},"src/login/loginctl.c":{"insertions":9,"deletions":9},"src/login/logind-button.c":{"insertions":1,"deletions":1},"src/login/logind-core.c":{"insertions":1,"deletions":1},"src/login/logind-inhibit.c":{"insertions":1,"deletions":1},"src/login/logind-seat.c":{"insertions":3,"deletions":3},"src/login/logind-session.c":{"insertions":2,"deletions":2},"src/login/logind-user.c":{"insertions":6,"deletions":6},"src/login/logind.c":{"insertions":35,"deletions":35},"src/login/user-sessions.c":{"insertions":1,"deletions":1},"src/machine/machine.c":{"insertions":2,"deletions":2},"src/machine/machinectl.c":{"insertions":10,"deletions":10},"src/machine/machined.c":{"insertions":12,"deletions":12},"src/modules-load/modules-load.c":{"insertions":4,"deletions":4},"src/network/networkctl.c":{"insertions":5,"deletions":5},"src/network/networkd-address.c":{"insertions":10,"deletions":10},"src/network/networkd-manager.c":{"insertions":2,"deletions":2},"src/network/networkd-netdev-veth.c":{"insertions":1,"deletions":1},"src/network/networkd-netdev.c":{"insertions":1,"deletions":1},"src/network/networkd-network.c":{"insertions":1,"deletions":1},"src/network/networkd-route.c":{"insertions":18,"deletions":18},"src/network/networkd-wait-online-manager.c":{"insertions":2,"deletions":2},"src/network/networkd-wait-online.c":{"insertions":2,"deletions":2},"src/network/networkd.c":{"insertions":8,"deletions":8},"src/notify/notify.c":{"insertions":1,"deletions":1},"src/nspawn/nspawn.c":{"insertions":85,"deletions":85},"src/path/path.c":{"insertions":2,"deletions":2},"src/quotacheck/quotacheck.c":{"insertions":1,"deletions":1},"src/random-seed/random-seed.c":{"insertions":1,"deletions":1},"src/remount-fs/remount-fs.c":{"insertions":1,"deletions":1},"src/resolve-host/resolve-host.c":{"insertions":2,"deletions":2},"src/resolve/resolved-bus.c":{"insertions":10,"deletions":10},"src/resolve/resolved-dns-scope.c":{"insertions":10,"deletions":10},"src/resolve/resolved-dns-zone.c":{"insertions":1,"deletions":1},"src/resolve/resolved-link.c":{"insertions":8,"deletions":8},"src/resolve/resolved-manager.c":{"insertions":6,"deletions":6},"src/resolve/resolved.c":{"insertions":8,"deletions":8},"src/rfkill/rfkill.c":{"insertions":5,"deletions":5},"src/run/run.c":{"insertions":3,"deletions":3},"src/shared/capability.c":{"insertions":1,"deletions":1},"src/shared/generator.c":{"insertions":2,"deletions":2},"src/shared/install.c":{"insertions":1,"deletions":1},"src/shared/logs-show.c":{"insertions":14,"deletions":14},"src/shared/pager.c":{"insertions":1,"deletions":1},"src/shared/sleep-config.c":{"insertions":1,"deletions":1},"src/shared/socket-label.c":{"insertions":2,"deletions":2},"src/shared/socket-util.c":{"insertions":1,"deletions":1},"src/shared/spawn-ask-password-agent.c":{"insertions":1,"deletions":1},"src/shared/spawn-polkit-agent.c":{"insertions":1,"deletions":1},"src/shared/util.c":{"insertions":4,"deletions":4},"src/shutdownd/shutdownd.c":{"insertions":4,"deletions":4},"src/socket-proxy/socket-proxyd.c":{"insertions":16,"deletions":16},"src/sysctl/sysctl.c":{"insertions":3,"deletions":3},"src/systemctl/systemctl.c":{"insertions":30,"deletions":30},"src/sysusers/sysusers.c":{"insertions":15,"deletions":15},"src/test/test-boot-timestamps.c":{"insertions":3,"deletions":3},"src/test/test-hostname.c":{"insertions":1,"deletions":1},"src/test/test-ns.c":{"insertions":1,"deletions":1},"src/test/test-socket-util.c":{"insertions":1,"deletions":1},"src/test/test-watchdog.c":{"insertions":2,"deletions":2},"src/timedate/timedatectl.c":{"insertions":3,"deletions":3},"src/timedate/timedated.c":{"insertions":11,"deletions":11},"src/timesync/timesyncd-manager.c":{"insertions":9,"deletions":9},"src/timesync/timesyncd.c":{"insertions":4,"deletions":4},"src/tmpfiles/tmpfiles.c":{"insertions":9,"deletions":9},"src/tty-ask-password-agent/tty-ask-password-agent.c":{"insertions":3,"deletions":3},"src/udev/net/ethtool-util.c":{"insertions":3,"deletions":3},"src/udev/net/link-config.c":{"insertions":2,"deletions":2},"src/udev/udev-builtin-keyboard.c":{"insertions":1,"deletions":1},"src/udev/udev-builtin-net_setup_link.c":{"insertions":2,"deletions":2},"src/udev/udev-builtin-uaccess.c":{"insertions":2,"deletions":2},"src/udev/udev-ctrl.c":{"insertions":1,"deletions":1},"src/udev/udev-node.c":{"insertions":2,"deletions":2},"src/udev/udev-rules.c":{"insertions":2,"deletions":2},"src/udev/udevadm-hwdb.c":{"insertions":2,"deletions":2},"src/udev/udevd.c":{"insertions":3,"deletions":3},"src/update-done/update-done.c":{"insertions":1,"deletions":1},"src/update-utmp/update-utmp.c":{"insertions":5,"deletions":5},"src/vconsole/vconsole-setup.c":{"insertions":6,"deletions":6}}},"c270684afd19d0a321a6bac6b9f84cdf18b2ca6f":{"author":"Ronny Chevalier","email":"chevalier.ronny@gmail.com","date":"2016-03-02 23:14:18 UTC","message":"tests: move fs-util related tests to test-fs-util.c","insertions":55,"deletions":99,"filepaths":{".gitignore":{"insertions":0,"deletions":1},"Makefile.am":{"insertions":0,"deletions":7},"src/test/test-fs-util.c":{"insertions":0,"deletions":91},"src/test/test-util.c":{"insertions":55,"deletions":0}}},"877777d77690d741c93404fd176da7f5327c2878":{"author":"3chas3","email":"ciwillia@brocade.com","date":"2017-01-31 13:21:15 UTC","message":"util-lib: Fix chase_symlinks() with absolute symlinks (#5185)\n\nIf chase_symlinks() encouters an absolute symlink, it resets the todo\nbuffer to just the newly discovered symlink and discards any of the\nremaining previous symlink path.  Regardless of whether or not the\nsymlink is absolute or relative, we need to preserve the remainder of\nthe path that has not yet been resolved.","insertions":13,"deletions":17,"filepaths":{"src/basic/fs-util.c":{"insertions":13,"deletions":10},"src/test/test-fs-util.c":{"insertions":0,"deletions":7}}},"b12d25a8d631af00b200e7aa9dbba6ba4a4a59ff":{"author":"Zbigniew Jędrzejewski-Szmek","email":"zbyszek@in.waw.pl","date":"2017-10-31 10:08:30 UTC","message":"util-lib: use trailing slash in chase_symlinks, fd_is_mount_point, path_is_mount_point\n\nThe kernel will reply with -ENOTDIR when we try to access a non-directory under\na name which ends with a slash. But our functions would strip the trailing slash\nunder various circumstances. Keep the trailing slash, so that\n\npath_is_mount_point(\"/path/to/file/\") return -ENOTDIR when /path/to/file/ is a file.\n\nTests are added for this change in behaviour.\n\nAlso, when called with a trailing slash, path_is_mount_point() would get\n\"\" from basename(), and call name_to_handle_at(3, \"\", ...), and always\nreturn -ENOENT. Now it'll return -ENOTDIR if the mount point is a file, and\ntrue if it is a directory and a mount point.\n\nv2:\n- use strip_trailing_chars()\n\nv3:\n- instead of stripping trailing chars(), do the opposite — preserve them.","insertions":16,"deletions":113,"filepaths":{"src/basic/fs-util.c":{"insertions":1,"deletions":10},"src/basic/mount-util.c":{"insertions":1,"deletions":2},"src/basic/path-util.c":{"insertions":0,"deletions":28},"src/basic/path-util.h":{"insertions":0,"deletions":1},"src/test/test-fs-util.c":{"insertions":13,"deletions":34},"src/test/test-mount-util.c":{"insertions":1,"deletions":23},"src/test/test-path-util.c":{"insertions":0,"deletions":15}}},"a39f92d391ac1ce06b3618874ff4211ecb11f549":{"author":"Susant Sahani","email":"susant@redhat.com","date":"2016-11-04 09:55:07 UTC","message":"Link: port to new ethtool ETHTOOL_xLINKSETTINGS\n\nLink: port to new ethtool ETHTOOL_xLINKSETTINGS\nThis patch defines a new ETHTOOL_GLINKSETTINGS/SLINKSETTINGS API,\nhandled by the new get_link_ksettings/set_link_ksettings .\n\nThis is a WIP version based on this [kernel\npatch](https://patchwork.kernel.org/patch/8411401/).\n\ncommit 0527f1c\n\nhttp://github.com/torvalds/linux/commit/3f1ac7a700d039c61d8d8b99f28d605d489a60cfommit\n35afb33","insertions":10,"deletions":291,"filepaths":{"configure.ac":{"insertions":1,"deletions":2},"man/systemd.link.xml":{"insertions":0,"deletions":14},"src/basic/missing.h":{"insertions":0,"deletions":27},"src/udev/net/ethtool-util.c":{"insertions":0,"deletions":209},"src/udev/net/ethtool-util.h":{"insertions":0,"deletions":18},"src/udev/net/link-config-gperf.gperf":{"insertions":0,"deletions":1},"src/udev/net/link-config.c":{"insertions":9,"deletions":19},"src/udev/net/link-config.h":{"insertions":0,"deletions":1}}},"a501033335ed402c8f7e86fe41a15531ba69abd7":{"author":"Tom Gundersen","email":"teg@jklm.no","date":"2013-10-26 16:54:16 UTC","message":"udev: link-config: add ethtool support\n\nThis adds support for setting the link speed, duplex and WakeOnLan\nsettings.\n\nExample:\n\n[Link]\nSpeedMBytes=100\nDuplex=half\nWakeOnLan=magic","insertions":4,"deletions":215,"filepaths":{"Makefile.am":{"insertions":1,"deletions":3},"src/udev/net/ethtool-util.c":{"insertions":0,"deletions":143},"src/udev/net/ethtool-util.h":{"insertions":0,"deletions":25},"src/udev/net/link-config-gperf.gperf":{"insertions":0,"deletions":3},"src/udev/net/link-config.c":{"insertions":3,"deletions":38},"src/udev/net/link-config.h":{"insertions":0,"deletions":3}}},"50725d10e3417fd357abe1df2f177b8458027ac7":{"author":"Susant Sahani","email":"ssahani@users.noreply.github.com","date":"2016-08-30 14:52:04 UTC","message":"link : add support to configure Offload features (#4017)\n\nThis patch supports these features to be on or off\n\nGeneric Segmentation Offload\nTCP Segmentation Offload\nUDP Segmentation Offload\n\nfixes #432","insertions":19,"deletions":173,"filepaths":{"man/systemd.link.xml":{"insertions":0,"deletions":24},"src/udev/net/ethtool-util.c":{"insertions":0,"deletions":111},"src/udev/net/ethtool-util.h":{"insertions":0,"deletions":9},"src/udev/net/link-config-gperf.gperf":{"insertions":19,"deletions":22},"src/udev/net/link-config.c":{"insertions":0,"deletions":6},"src/udev/net/link-config.h":{"insertions":0,"deletions":1}}},"429b43502675550ed61d3f62a4ffd295ab10732d":{"author":"Lennart Poettering","email":"lennart@poettering.net","date":"2016-10-06 13:48:15 UTC","message":"sd-device/networkd: unify code to get a socket for issuing netdev ioctls on\n\nAs suggested here:\n\nhttps://github.com/systemd/systemd/pull/4296#issuecomment-251911349\n\nLet's try AF_INET first as socket, but let's fall back to AF_NETLINK, so that\nwe can use a protocol-independent socket here if possible. This has the benefit\nthat our code will still work even if AF_INET/AF_INET6 is made unavailable (for\nexmple via seccomp), at least on current kernels.","insertions":5,"deletions":25,"filepaths":{"src/basic/socket-util.c":{"insertions":0,"deletions":17},"src/basic/socket-util.h":{"insertions":0,"deletions":2},"src/libsystemd/sd-device/sd-device.c":{"insertions":2,"deletions":3},"src/udev/net/ethtool-util.c":{"insertions":3,"deletions":3}}},"8b43440b7ef4b81c69c31de7ff820dc07a780254":{"author":"Lennart Poettering","email":"lennart@poettering.net","date":"2015-10-26 21:31:05 UTC","message":"util-lib: move string table stuff into its own string-table.[ch]","insertions":96,"deletions":215,"filepaths":{"Makefile.am":{"insertions":0,"deletions":2},"src/basic/cgroup-util.c":{"insertions":0,"deletions":1},"src/basic/locale-util.c":{"insertions":0,"deletions":1},"src/basic/log.c":{"insertions":0,"deletions":1},"src/basic/rlimit-util.c":{"insertions":0,"deletions":1},"src/basic/signal-util.c":{"insertions":0,"deletions":1},"src/basic/smack-util.c":{"insertions":0,"deletions":1},"src/basic/socket-util.c":{"insertions":0,"deletions":1},"src/basic/string-table.c":{"insertions":0,"deletions":35},"src/basic/string-table.h":{"insertions":0,"deletions":88},"src/basic/unit-name.c":{"insertions":2,"deletions":3},"src/basic/util.c":{"insertions":13,"deletions":1},"src/basic/util.h":{"insertions":56,"deletions":0},"src/basic/virt.c":{"insertions":0,"deletions":1},"src/bus-proxyd/bus-xml-policy.c":{"insertions":0,"deletions":1},"src/core/automount.c":{"insertions":0,"deletions":1},"src/core/bus-policy.c":{"insertions":0,"deletions":1},"src/core/busname.c":{"insertions":0,"deletions":1},"src/core/cgroup.c":{"insertions":0,"deletions":1},"src/core/execute.c":{"insertions":0,"deletions":1},"src/core/failure-action.c":{"insertions":2,"deletions":3},"src/core/job.c":{"insertions":0,"deletions":1},"src/core/kill.c":{"insertions":2,"deletions":3},"src/core/manager.c":{"insertions":0,"deletions":1},"src/core/mount.c":{"insertions":0,"deletions":1},"src/core/namespace.c":{"insertions":0,"deletions":1},"src/core/path.c":{"insertions":0,"deletions":1},"src/core/scope.c":{"insertions":0,"deletions":1},"src/core/service.c":{"insertions":0,"deletions":1},"src/core/show-status.c":{"insertions":0,"deletions":2},"src/core/socket.c":{"insertions":0,"deletions":1},"src/core/swap.c":{"insertions":0,"deletions":1},"src/core/timer.c":{"insertions":0,"deletions":1},"src/import/import-compress.c":{"insertions":1,"deletions":2},"src/import/importd.c":{"insertions":0,"deletions":1},"src/journal-remote/journal-remote.c":{"insertions":0,"deletions":1},"src/journal/compress.c":{"insertions":0,"deletions":1},"src/journal/coredump.c":{"insertions":0,"deletions":1},"src/journal/journald-server.c":{"insertions":0,"deletions":1},"src/libsystemd-network/sd-dhcp6-client.c":{"insertions":0,"deletions":1},"src/libsystemd/sd-device/device-private.c":{"insertions":0,"deletions":1},"src/libsystemd/sd-netlink/netlink-types.c":{"insertions":4,"deletions":3},"src/login/logind-action.c":{"insertions":5,"deletions":6},"src/login/logind-inhibit.c":{"insertions":0,"deletions":1},"src/login/logind-session.c":{"insertions":0,"deletions":1},"src/login/logind-user.c":{"insertions":0,"deletions":1},"src/machine/machine.c":{"insertions":0,"deletions":1},"src/network/networkctl.c":{"insertions":0,"deletions":1},"src/network/networkd-link.c":{"insertions":0,"deletions":1},"src/network/networkd-netdev-bond.c":{"insertions":1,"deletions":2},"src/network/networkd-netdev-ipvlan.c":{"insertions":1,"deletions":2},"src/network/networkd-netdev-macvlan.c":{"insertions":1,"deletions":2},"src/network/networkd-netdev-tunnel.c":{"insertions":0,"deletions":1},"src/network/networkd-netdev.c":{"insertions":0,"deletions":1},"src/network/networkd-network.c":{"insertions":0,"deletions":1},"src/network/networkd-util.c":{"insertions":0,"deletions":1},"src/resolve/resolved-dns-packet.c":{"insertions":4,"deletions":5},"src/resolve/resolved-dns-transaction.c":{"insertions":0,"deletions":1},"src/resolve/resolved-manager.c":{"insertions":0,"deletions":1},"src/rfkill/rfkill.c":{"insertions":0,"deletions":1},"src/shared/architecture.c":{"insertions":0,"deletions":1},"src/shared/condition.c":{"insertions":0,"deletions":1},"src/shared/import-util.c":{"insertions":0,"deletions":1},"src/shared/install.c":{"insertions":0,"deletions":1},"src/shared/logs-show.c":{"insertions":0,"deletions":1},"src/shared/machine-image.c":{"insertions":0,"deletions":1},"src/tmpfiles/tmpfiles.c":{"insertions":0,"deletions":1},"src/udev/net/ethtool-util.c":{"insertions":4,"deletions":4},"src/udev/net/link-config.c":{"insertions":0,"deletions":1}}},"593022fa377d40d9a645919759b04c53cf4eace8":{"author":"Susant Sahani","email":"ssahani@users.noreply.github.com","date":"2017-06-25 22:42:57 UTC","message":"systemd-link: add support to configure the device port (#6153)\n\nThis work allows to configure device port:\n\ntp — An Ethernet interface using Twisted-Pair cable as the medium.\naui — Attachment Unit Interface (AUI). Normally used with hubs.\nbnc — An Ethernet interface using BNC connectors and co-axial cable.\nmii — An Ethernet interface using a Media Independent Interface (MII).\nfibre — An Ethernet interface using Optical Fibre as the medium.","insertions":11,"deletions":88,"filepaths":{"man/systemd.link.xml":{"insertions":0,"deletions":41},"src/udev/net/ethtool-util.c":{"insertions":7,"deletions":22},"src/udev/net/ethtool-util.h":{"insertions":1,"deletions":19},"src/udev/net/link-config-gperf.gperf":{"insertions":0,"deletions":1},"src/udev/net/link-config.c":{"insertions":3,"deletions":4},"src/udev/net/link-config.h":{"insertions":0,"deletions":1}}},"ece174c5439021e32ebcc858842de9586072c006":{"author":"Lennart Poettering","email":"lennart@poettering.net","date":"2015-09-08 21:03:38 UTC","message":"tree-wide: drop {} from one-line if blocks\n\nPatch via coccinelle.","insertions":80,"deletions":56,"filepaths":{"coccinelle/empty-if.cocci":{"insertions":0,"deletions":19},"src/analyze/analyze.c":{"insertions":4,"deletions":1},"src/basic/strv.c":{"insertions":4,"deletions":2},"src/bootchart/bootchart.c":{"insertions":2,"deletions":1},"src/bootchart/svg.c":{"insertions":4,"deletions":2},"src/core/load-fragment.c":{"insertions":2,"deletions":1},"src/core/main.c":{"insertions":2,"deletions":1},"src/core/manager.c":{"insertions":2,"deletions":1},"src/core/service.c":{"insertions":2,"deletions":1},"src/core/transaction.c":{"insertions":3,"deletions":1},"src/cryptsetup/cryptsetup.c":{"insertions":2,"deletions":1},"src/hostname/hostnamed.c":{"insertions":2,"deletions":1},"src/import/importd.c":{"insertions":4,"deletions":1},"src/journal-remote/journal-gatewayd.c":{"insertions":2,"deletions":1},"src/journal-remote/journal-upload-journal.c":{"insertions":2,"deletions":1},"src/journal/journald-audit.c":{"insertions":2,"deletions":1},"src/journal/test-journal-verify.c":{"insertions":2,"deletions":1},"src/libsystemd-network/sd-ipv4ll.c":{"insertions":2,"deletions":1},"src/libsystemd/sd-bus/bus-creds.c":{"insertions":2,"deletions":1},"src/libsystemd/sd-netlink/netlink-message.c":{"insertions":2,"deletions":1},"src/login/logind-button.c":{"insertions":2,"deletions":1},"src/machine/machinectl.c":{"insertions":2,"deletions":1},"src/network/networkd-netdev-bond.c":{"insertions":2,"deletions":1},"src/random-seed/random-seed.c":{"insertions":2,"deletions":1},"src/resolve-host/resolve-host.c":{"insertions":2,"deletions":1},"src/resolve/resolved-dns-cache.c":{"insertions":2,"deletions":1},"src/shared/logs-show.c":{"insertions":2,"deletions":1},"src/systemctl/systemctl.c":{"insertions":2,"deletions":1},"src/udev/net/ethtool-util.c":{"insertions":2,"deletions":1},"src/udev/scsi_id/scsi_serial.c":{"insertions":2,"deletions":1},"src/udev/udev-ctrl.c":{"insertions":4,"deletions":2},"src/udev/udev-rules.c":{"insertions":2,"deletions":1},"src/udev/udevd.c":{"insertions":2,"deletions":1},"src/update-utmp/update-utmp.c":{"insertions":3,"deletions":1},"src/user-sessions/user-sessions.c":{"insertions":2,"deletions":1}}},"94d4acbe4b496c0f0c4e5e2143426751c8c5f9a9":{"author":"Bruce A. Johnson","email":"bajhn@users.noreply.github.com","date":"2018-01-05 09:02:38 UTC","message":"systemd-udevd: fix speed/duplex processing with valid .link files (#7808)\n\nIncluding BitsPerSecond or Duplex values in .link files did not work when\nset_slinksettings was called because the routine was not copying the base\nparameters to the structure given to ioctl.  As a result, EINVAL was always\nreported, and no change occurred on the Ethernet device.","insertions":3,"deletions":3,"filepaths":{"src/udev/net/ethtool-util.c":{"insertions":3,"deletions":3}}},"71050acb68d2a86c823d561f83683c063b1a99a3":{"author":"Evgeny Vereshchagin","email":"evvers@ya.ru","date":"2017-11-23 12:28:12 UTC","message":"tests: install `test` as part of BASICTOOLS (#7434)\n\nThis makes TEST-19-DELEGATE, which is currently failing, work.\n\nCloses https://github.com/systemd/systemd/issues/7425.","insertions":1,"deletions":1,"filepaths":{"test/test-functions":{"insertions":1,"deletions":1}}},"9725f1a10f80f5e0ae7d9b60547458622aeb322f":{"author":"Lennart Poettering","email":"lennart@poettering.net","date":"2019-05-16 14:39:38 UTC","message":" wsBcBAABCAAQBQJc3XYqCRBK7hj4Ov3rIwAAdHIIAIJZRyrC0GamTaPzCj8NHGDm\n jgJdlJrnyS6NRnak1OR7/Azldek+3GLqpnBDuJP9uOjisMn7CFKIB0C1XR5jSl/i\n IRTN7S9dxdUbSkRhWNZhzYQ6Lk16MeD92jT9U8u3cJp/YiFb4S2/2pBGvJMKRudX\n QWRKOmwIZo1Kq48Mo7S+mRrOF5iR7S10zVBvsMGjiqJCzQaSGRv2w2DHxrZsbge1\n WhkyZHWANxUOT6+7+AlgGpUXlcF7e8jcWrYNEUOabgzcARxrirE7JuI5oxpWDllY\n g8gKFpMUBRPGbaVOIm0Bk4m82eVXSxptxNCV/f6hBIeMXXLrLsI1KupsCINX59Y=\n =bM42\n -----END PGP SIGNATURE-----\n \n\nMerge pull request #12378 from rbalint/vt-kbd-reset-check\n\nVT kbd reset check","insertions":21,"deletions":36,"filepaths":{"src/basic/terminal-util.c":{"insertions":1,"deletions":25},"src/basic/terminal-util.h":{"insertions":0,"deletions":1},"src/vconsole/vconsole-setup.c":{"insertions":20,"deletions":10}}},"c83f349c5fd04c469e8227117b9cde6931c80ba5":{"author":"Lennart Poettering","email":"lennart@poettering.net","date":"2017-09-01 00:09:32 UTC","message":"terminal: unify code for resetting kbd utf8 mode a bit (#6692)\n\nWe have the same code at two places, let's unify that at one place.\n\nFollow-up for #6606","insertions":13,"deletions":31,"filepaths":{"src/basic/terminal-util.c":{"insertions":6,"deletions":26},"src/basic/terminal-util.h":{"insertions":0,"deletions":3},"src/login/logind-session.c":{"insertions":7,"deletions":2}}},"40e1f4ea7458a0a80eaf1ef356e52bfe0835412e":{"author":"Lennart Poettering","email":"lennart@poettering.net","date":"2015-10-07 21:38:20 UTC","message":"machined: when opening a shell via machined, pass tty fds in\n\nWith this change we'll open the shell's tty right from machined and then\npass it to the transient unit we create. This way we make sure the pty\nis opened exactly as long as the transient service is around, and no\nlonger, and vice versa. This way pty forwarders do not have to deal with\nEIO problems due to vhangup, as the pty is open all the time from the\npoint we set things up to the point where the service goes away.","insertions":10,"deletions":82,"filepaths":{"src/basic/terminal-util.c":{"insertions":0,"deletions":48},"src/basic/terminal-util.h":{"insertions":0,"deletions":1},"src/machine/machine-dbus.c":{"insertions":9,"deletions":12},"src/machine/machine.c":{"insertions":0,"deletions":19},"src/machine/machine.h":{"insertions":0,"deletions":1},"src/machine/machinectl.c":{"insertions":1,"deletions":1}}},"6179ede1c55c0b7b31b8f71e17d68ec2318ef2d5":{"author":"Franck Bui","email":"fbui@suse.com","date":"2018-08-27 20:33:44 UTC","message":"terminal-util: introduce vt_restore() helper","insertions":12,"deletions":39,"filepaths":{"src/basic/terminal-util.c":{"insertions":0,"deletions":34},"src/basic/terminal-util.h":{"insertions":0,"deletions":1},"src/login/logind-session.c":{"insertions":12,"deletions":4}}},"27dafac92b660eb7c2268b824b0b3df95e62869e":{"author":"Franck Bui","email":"fbui@suse.com","date":"2018-08-27 20:42:00 UTC","message":"terminal-util: introduce vt_release() helper","insertions":2,"deletions":19,"filepaths":{"src/basic/terminal-util.c":{"insertions":0,"deletions":16},"src/basic/terminal-util.h":{"insertions":0,"deletions":1},"src/login/logind-session.c":{"insertions":2,"deletions":2}}},"03044059bfff8b79d47efc53e2468e122f502a72":{"author":"Michal Soltys","email":"soltys@ziu.info","date":"2016-07-26 22:57:01 UTC","message":"vconsole: Add generic is_*() functions\n\nis_allocated() and is_allocated_byfd():\n\nChecks if the console is allocated by its index (first function) or\nits open descriptor (second function).\n\nis_settable():\n\nChecks if the console is in xlate or unicode mode, so we can adjust\nis safely without interfering with X.","insertions":0,"deletions":41,"filepaths":{"src/vconsole/vconsole-setup.c":{"insertions":0,"deletions":41}}},"1142bed25ebd4822e16734911f374de3d6ccbf84":{"author":"Michal Soltys","email":"soltys@ziu.info","date":"2017-07-03 16:38:13 UTC","message":"vconsole: search for usable source console (#6180)\n\nWhen vconsole-setup is called without arguments, search for a usable\nconsole instead of using /dev/tty0.\n\n/dev/tty0 — pointing to the current active console — it not necessarily\nusable and in such case vconsole-setup would exit with failure. In particular\nwhen systemd-vconsole-setup.service was restarted from within an X\nsession, it always failed.\n\nIf the function searching for a usable source terminal fails, the first\nencountered error is returned to the caller.\n\nCloses #5367.\n\nAdditional changes:\n\n- true/false functions with 'is_ prefix are renamed to functions with\n  'verify_vc_' prefix and return 0 on success and negative error on\n  failure\n- O_NOCTTY flag is used when opening terminals","insertions":71,"deletions":128,"filepaths":{"src/vconsole/vconsole-setup.c":{"insertions":71,"deletions":128}}},"aaa709bbaa6b909278f3ec0679b49a484423d913":{"author":"Zbigniew Jędrzejewski-Szmek","email":"zbyszek@in.waw.pl","date":"2016-07-24 18:14:20 UTC","message":"vconsole-setup: add lots of debug messages\n\nFor error messages, make them more meaningful by printing the tty name.\n\nFollow-up for #3742.","insertions":14,"deletions":24,"filepaths":{"src/vconsole/vconsole-setup.c":{"insertions":14,"deletions":24}}},"042d7f5065c9c19b3f96804f9403b14d910e46d1":{"author":"Michal Soltys","email":"soltys@ziu.info","date":"2016-07-26 22:57:01 UTC","message":"vconsole: add two new toggle functions, remove old enable/disable ones\n\nAdd toggle_utf8() and toggle_utf8_sysfs() and use them in place of old\nenable/disable functions. toggle_utf8() also adds iutf8 setting and is\nset up to be called per-console (in subsequent patches).\n\nNote, that old disable_utf8() didn't bother checking if it was ok\nto change the kbdmode.","insertions":46,"deletions":27,"filepaths":{"src/vconsole/vconsole-setup.c":{"insertions":46,"deletions":27}}},"b53f3386e514c53221a127e5b9192108b8f63793":{"author":"Lennart Poettering","email":"lennart@poettering.net","date":"2018-03-22 16:12:23 UTC","message":"vconsole: minor modernizations","insertions":13,"deletions":20,"filepaths":{"src/vconsole/vconsole-setup.c":{"insertions":13,"deletions":20}}},"d23a0044a3ba9ebff5e4e304152fd24ecf113524":{"author":"Torstein Husebø","email":"torstein@huseboe.net","date":"2016-09-26 09:32:47 UTC","message":"treewide: fix typos (#4217)","insertions":3,"deletions":3,"filepaths":{"man/systemd.netdev.xml":{"insertions":1,"deletions":1},"src/nspawn/nspawn.c":{"insertions":1,"deletions":1},"src/vconsole/vconsole-setup.c":{"insertions":1,"deletions":1}}},"97c4a07df982ee967705022feaba9be33947abf0":{"author":"Lennart Poettering","email":"lennart@poettering.net","date":"2010-09-15 22:36:41 UTC","message":"vconsole: add new utility to initialize the virtual console","insertions":34,"deletions":457,"filepaths":{".gitignore":{"insertions":1,"deletions":1},"Makefile.am":{"insertions":1,"deletions":13},"src/conf-parser.c":{"insertions":2,"deletions":0},"src/kmod-setup.c":{"insertions":22,"deletions":3},"src/load-fragment.c":{"insertions":2,"deletions":0},"src/mount.c":{"insertions":2,"deletions":2},"src/util.c":{"insertions":3,"deletions":179},"src/util.h":{"insertions":1,"deletions":7},"src/vconsole-setup.c":{"insertions":0,"deletions":231},"units/.gitignore":{"insertions":0,"deletions":1},"units/systemd-vconsole-setup.service.in":{"insertions":0,"deletions":20}}},"b7a4129ca946ed49e161a03283faf5bbab96d110":{"author":"Zbigniew Jędrzejewski-Szmek","email":"zbyszek@in.waw.pl","date":"2019-10-30 13:08:26 UTC","message":" wsBcBAABCAAQBQJduYtKCRBK7hj4Ov3rIwAAdHIIACaryMKp8VXEysRcFWILMbhQ\n niUZdFJASWVHjDLkxcg8sUBU1jAyjtv5twuSADsZzw4McPxxSgTs62lQtLinzqT+\n BeRwRZ3N3uCLWRZv6piopfSUdF3lY7lw5xv1cIDSsVVb5o6esEpcb6FBh9VFWyy9\n fDl/q5urqDjgsSHgfyKNjgPnTxhoUtzF0bxqF/lw8p5U9FyucoHx0FFIe9E1lpXL\n gXi7b7kzcr3O4elNGYIBfcfZSp6lWHuUhqD0uHGfyj+LFohbuhMXbOe7pSvQK57p\n s13iu0BZGWP89d665Iki4jROLbjQNsRsI8D/7KsiLY2gys4tM8ro2HIMadXVGy4=\n =oM36\n -----END PGP SIGNATURE-----\n \n\nMerge pull request #13870 from irtimmer/check_ip_gnutls\n\nresolved: validate IP address in certificate for DNS-over-TLS (GnuTLS)","insertions":8,"deletions":14,"filepaths":{"README":{"insertions":1,"deletions":1},"meson.build":{"insertions":1,"deletions":1},"src/resolve/resolved-dnstls-gnutls.c":{"insertions":6,"deletions":11},"src/resolve/resolved-dnstls-gnutls.h":{"insertions":0,"deletions":1}}},"096cbdce13b811f34726533d1a569912adc7cbec":{"author":"Iwan Timmer","email":"irtimmer@gmail.com","date":"2018-07-26 21:47:50 UTC","message":"resolved: basic OpenSSL support for DNS-over-TLS\n\nThis provides basic OpenSSL support without optimizations like TCP Fast Open and TLS Session Tickets.\nNotice only a single SSL library can be enabled at a time and therefore journald functions provided by GnuTLS will be disabled when using OpenSSL.\nFixes #9531","insertions":13,"deletions":294,"filepaths":{"README":{"insertions":1,"deletions":2},"meson.build":{"insertions":6,"deletions":35},"meson_options.txt":{"insertions":1,"deletions":3},"src/resolve/meson.build":{"insertions":2,"deletions":9},"src/resolve/resolved-dns-stream.c":{"insertions":0,"deletions":2},"src/resolve/resolved-dnstls-gnutls.c":{"insertions":1,"deletions":1},"src/resolve/resolved-dnstls-gnutls.h":{"insertions":1,"deletions":1},"src/resolve/resolved-dnstls-openssl.c":{"insertions":0,"deletions":216},"src/resolve/resolved-dnstls-openssl.h":{"insertions":0,"deletions":20},"src/resolve/resolved-dnstls.h":{"insertions":1,"deletions":5}}},"9c0624dcdb86360d5cd5eb8c6093b3cd2e6d281b":{"author":"Iwan Timmer","email":"irtimmer@gmail.com","date":"2019-06-17 19:24:05 UTC","message":"resolved: support TLS 1.3 when using GnuTLS for DNS-over-TLS","insertions":1,"deletions":6,"filepaths":{"src/resolve/resolved-dnstls-gnutls.c":{"insertions":1,"deletions":6}}},"4310bfc20b84127e19bed68701caa3820c844682":{"author":"Iwan Timmer","email":"irtimmer@gmail.com","date":"2019-02-18 19:41:46 UTC","message":"resolved: add strict mode for DNS-over-TLS\n\nAdd strict mode for DNS-over-TLS, which will require TLS support from the server. Closes #10755","insertions":15,"deletions":46,"filepaths":{"man/resolved.conf.xml":{"insertions":2,"deletions":5},"man/systemd.network.xml":{"insertions":4,"deletions":7},"meson.build":{"insertions":1,"deletions":1},"meson_options.txt":{"insertions":1,"deletions":1},"shell-completion/bash/resolvectl":{"insertions":1,"deletions":1},"shell-completion/bash/systemd-resolve":{"insertions":1,"deletions":1},"src/resolve/resolved-conf.c":{"insertions":1,"deletions":1},"src/resolve/resolved-dns-server.c":{"insertions":1,"deletions":1},"src/resolve/resolved-dnstls-gnutls.c":{"insertions":0,"deletions":7},"src/resolve/resolved-dnstls-openssl.c":{"insertions":0,"deletions":14},"src/resolve/resolved-link.c":{"insertions":1,"deletions":1},"src/shared/resolve-util.c":{"insertions":1,"deletions":2},"src/shared/resolve-util.h":{"insertions":0,"deletions":3},"src/systemd/sd-network.h":{"insertions":1,"deletions":1}}},"6016fcb0ea9eea232f55a8b27b5a7fa69c0b4e26":{"author":"Iwan Timmer","email":"irtimmer@gmail.com","date":"2018-07-17 06:34:29 UTC","message":"resolved: refactor GnuTLS specific code in separate source file\n\nThis is a first step towards supporting alternative TLS implementations for DNS-over-TLS.\n\nCo-authored-by: Filipe Brandenburger <filbranden@google.com>","insertions":167,"deletions":283,"filepaths":{"src/resolve/meson.build":{"insertions":0,"deletions":2},"src/resolve/resolved-dns-server.c":{"insertions":7,"deletions":2},"src/resolve/resolved-dns-server.h":{"insertions":6,"deletions":4},"src/resolve/resolved-dns-stream.c":{"insertions":107,"deletions":19},"src/resolve/resolved-dns-stream.h":{"insertions":6,"deletions":6},"src/resolve/resolved-dns-transaction.c":{"insertions":41,"deletions":3},"src/resolve/resolved-dnstls-gnutls.c":{"insertions":0,"deletions":198},"src/resolve/resolved-dnstls-gnutls.h":{"insertions":0,"deletions":21},"src/resolve/resolved-dnstls.h":{"insertions":0,"deletions":28}}},"e6131c6ea6893f4c46dbf709182428b42041b0ac":{"author":"Zbigniew Jędrzejewski-Szmek","email":"zbyszek@in.waw.pl","date":"2018-03-05 22:15:56 UTC","message":" wsBcBAABCAAQBQJancGcCRBK7hj4Ov3rIwAAdHIIAKTvp47TuFuOBNEPKje7c8R+\n 8/FO5GlysV3fdZnqM4RM9oWt2L3PGdoCQPyCS+i1GcZuVj5r7vLjniNC0Lx0iebf\n EM/+yxWq8hSnm5GQ0/vl9DXV+PjOjPQbcgxM5nSqMUou6mFPhNxL1o5bS7/iCqSx\n qTskFG49BqqEtfobNDDC1kTAiM/TBJ1a/Wtsm3rkbzc/r8gx57X72croIQlNIMXM\n c9HrcaXexUr9OF3S1fM62VZF6u32DV4RN93FiG8W10/hbTaTroxFrZPDhtiHJ0up\n 6zgpGGcD9hrTkEcoJTtdx5Ma+e9wc6VjyA4r/8lpFASkEH5NuXkJSCN5QEdWFD0=\n =YwNR\n -----END PGP SIGNATURE-----\n \n\nMerge pull request #8358 from fbuihuu/tmpfiles-dont-resolve-pathnames-when-traversing-recursively\n\nTmpfiles dont resolve pathnames when traversing recursively","insertions":127,"deletions":318,"filepaths":{"src/tmpfiles/tmpfiles.c":{"insertions":125,"deletions":240},"test/TEST-22-TMPFILES/Makefile":{"insertions":0,"deletions":4},"test/TEST-22-TMPFILES/run-tmpfiles-tests.sh":{"insertions":0,"deletions":13},"test/TEST-22-TMPFILES/test-01.sh":{"insertions":0,"deletions":13},"test/TEST-22-TMPFILES/test.sh":{"insertions":0,"deletions":38},"test/TEST-22-TMPFILES/testsuite.service":{"insertions":0,"deletions":8},"test/test-functions":{"insertions":2,"deletions":2}}},"48b8aaa82724bc2d8440470f414fb0d2416f29c7":{"author":"Lennart Poettering","email":"lennart@poettering.net","date":"2015-04-13 13:16:54 UTC","message":"tmpfiles: don't follow symlinks when adjusting ACLs, fille attributes, access modes or ownership","insertions":40,"deletions":80,"filepaths":{"src/tmpfiles/tmpfiles.c":{"insertions":40,"deletions":80}}},"081043cf06cc67a327f55806039639c55acdd439":{"author":"Zbigniew Jędrzejewski-Szmek","email":"zbyszek@in.waw.pl","date":"2015-01-18 06:33:39 UTC","message":"tmpfiles: make recursive operation generic","insertions":33,"deletions":19,"filepaths":{"src/tmpfiles/tmpfiles.c":{"insertions":33,"deletions":19}}},"780e2ee187e373565f9ded2859f8c6c7760b814a":{"author":"Michal Sekletar","email":"msekletar@users.noreply.github.com","date":"2017-08-31 10:45:25 UTC","message":"tmpfiles: with \"e\" don't attempt to set permissions when file doesn't exist (#6682)\n\ntmpfiles.d option \"e\" when run through systemd-tmpfiles --create should\napply configured permissions (uid,gid) only to already existing\nfiles. When file doesn't exist we bail out with error. Instead we should\nsilently ignore non-existing files.\n\n$ useradd test\n$ cat /etc/tmpfiles.d/foobar.conf\ne /tmp/test - test test 1d\n$ ls -l /tmp/test\nls: cannot access '/tmp/test': No such file or directory\n\nBefore:\n$ systemd-tmpfiles --create /etc/tmpfiles.d/foobar.conf\nAdjusting owner and mode for /tmp/test failed: No such file or directory\n$ echo $?\n1\n\nAfter:\n$ systemd-tmpfiles --create /etc/tmpfiles.d/foobar.conf\n$ echo $?\n0","insertions":2,"deletions":14,"filepaths":{"src/tmpfiles/tmpfiles.c":{"insertions":2,"deletions":14}}},"ebf4e8013b2928fdcfa6008ee6559e8c7e1fd60b":{"author":"Maciej Wereski","email":"m.wereski@partner.samsung.com","date":"2014-12-04 09:32:10 UTC","message":"tmpfiles, man: Add xattr support to tmpfiles\n\nThis patch makes it possible to set extended attributes on files created\nby tmpfiles. This can be especially used to set SMACK security labels on\nvolatile files and directories.\n\nIt is done by adding new line of type \"t\". Such line should contain\nattributes in Argument field, using following format:\n\nname=value\n\nAll other fields are ignored.\n\nIf value contains spaces, then it must be surrounded by quotation marks.\nUser can also put quotation mark in value by escaping it with backslash.\n\nExample:\nD /var/run/cups - - - -\nt /var/run/cups - - - - security.SMACK64=printing","insertions":16,"deletions":155,"filepaths":{"man/tmpfiles.d.xml":{"insertions":6,"deletions":26},"src/tmpfiles/tmpfiles.c":{"insertions":10,"deletions":129}}},"88ec4dfa289cd97496dbb9670365a3d4be13d41c":{"author":"Lennart Poettering","email":"lennart@poettering.net","date":"2015-04-08 20:35:52 UTC","message":"tmpfiles: rework file attribute code\n\n- Stick to one type for the flags field: unsigned. This appears to be\n  what the kernel uses, and there's no point in using something else.\n\n- compress the flags array by avoiding sparse entries\n\n- extend some error messages to not use abbreviated words\n\n- avoid TTOCTTOU issues by invoking fstat() after open() when applying\n  file flags\n\n- add explanation why we need to check the file type with fstat().\n\n- don't needlessly abbreviate \"attribute\" as \"attrib\", in particually as\n  \"chattr\" abbreviates it as \"attr\" rather than \"attrib\".","insertions":95,"deletions":116,"filepaths":{"src/tmpfiles/tmpfiles.c":{"insertions":95,"deletions":116}}},"e73a03e059830a3df8fac811f923704311e93731":{"author":"Lennart Poettering","email":"lennart@poettering.net","date":"2014-06-10 21:42:16 UTC","message":"tmpfiles: get rid of \"m\" lines, make them redundant by \"z\"\n\n\"m\" so far has been a non-globbing version of \"z\". Since this makes it\nquite redundant, let's get rid of it. Remove \"m\" from the man pages,\nbeef up \"z\" docs instead, and make \"m\" nothing more than a compatibility\nalias for \"z\".","insertions":106,"deletions":80,"filepaths":{"man/tmpfiles.d.xml":{"insertions":26,"deletions":17},"src/journal/journal-remote.c":{"insertions":1,"deletions":1},"src/shared/mkdir.c":{"insertions":5,"deletions":10},"src/shared/mkdir.h":{"insertions":1,"deletions":1},"src/tmpfiles/tmpfiles.c":{"insertions":71,"deletions":49},"tmpfiles.d/systemd.conf":{"insertions":2,"deletions":2}}},"b705ab6a838937f947216af7b2d1fffb00f8b0dc":{"author":"Zbigniew Jędrzejewski-Szmek","email":"zbyszek@in.waw.pl","date":"2015-01-18 07:10:00 UTC","message":"tmpfiles: make t and a globby, add their recursive versions T and A\n\nFor types which adapt existing files it is generally more useful to accept\nglobs.\n\nIn analogy to z and Z, add recursive versions using uppercase letters.\n\nTechnically, making a accept globs is backwards incompatible, but in\npractice it probably isn't yet widely used and we can assume that most\npeople don't create files with wildcards in names.\n\nFunctions which are used as callbacks, but not directly on items, are\nrenamed not to have \"item_\" prefix.","insertions":23,"deletions":65,"filepaths":{"man/tmpfiles.d.xml":{"insertions":6,"deletions":25},"src/tmpfiles/tmpfiles.c":{"insertions":17,"deletions":40}}},"22c3a6cadbc99ad623501db9a928f52f6f84c0c3":{"author":"Goffredo Baroncelli","email":"kreijack@inwind.it","date":"2015-03-16 19:33:50 UTC","message":"Allow systemd-tmpfiles to set the file/directory attributes\n\nAllow systemd-tmpfiles to set the file/directory attributes, like\nchattr(1) does. Two more commands are added: 'H' and 'h' to set the\nattributes, recursively and not.","insertions":0,"deletions":152,"filepaths":{"src/tmpfiles/tmpfiles.c":{"insertions":0,"deletions":152}}},"a8d8878329893d19106053e5008f0075f149aa16":{"author":"Michal Schmidt","email":"mschmidt@redhat.com","date":"2011-12-15 22:11:07 UTC","message":"tmpfiles: add RECURSIVE_RELABEL_PATH ('Z')\n\nFeature requested by Dan Walsh.","insertions":12,"deletions":112,"filepaths":{"src/tmpfiles.c":{"insertions":12,"deletions":112}}},"51207ca134716a0dee5fd763a6c39204be849eb1":{"author":"Lennart Poettering","email":"lennart@poettering.net","date":"2018-01-22 20:03:53 UTC","message":"tmpfiles: change ownership of symlinks too\n\nOwnership is supported for symlinks, too, only file modes are not.\nSupport that too.\n\nFixes: #7509","insertions":20,"deletions":21,"filepaths":{"src/tmpfiles/tmpfiles.c":{"insertions":20,"deletions":21}}},"59793c8f2e29507c2f6cd8bd1e8785bfbefd2952":{"author":"Lennart Poettering","email":"lennart@poettering.net","date":"2018-01-22 20:10:27 UTC","message":"tmpfiles: shortcut path_set_perms() if there's nothing to do\n\nNo need to open() anything in that case, hence don't.","insertions":1,"deletions":4,"filepaths":{"src/tmpfiles/tmpfiles.c":{"insertions":1,"deletions":4}}},"abef3f91ce5fa9eeffceead885d2d2cabd9f1c96":{"author":"Lennart Poettering","email":"lennart@poettering.net","date":"2014-06-11 08:14:07 UTC","message":"tmpfiles: add ability to mask access mode by pre-existing access mode on files/directories\n\nThis way it makes a lot more sense to specify an access mode for \"Z\"\nlines.","insertions":7,"deletions":46,"filepaths":{"man/tmpfiles.d.xml":{"insertions":0,"deletions":16},"src/tmpfiles/tmpfiles.c":{"insertions":7,"deletions":30}}},"d873e8778c92014c02a9122852758b436fa95c0e":{"author":"Hans-Peter Deifel","email":"hpd@hpdeifel.de","date":"2015-03-02 23:35:08 UTC","message":"tmpfiles: quietly ignore ACLs on unsupported filesystems\n\nA warning is printed if ACLs cannot be retrieved for any reason other\nthan -ENOSYS. For -ENOSYS, debug log is printed.","insertions":16,"deletions":20,"filepaths":{"src/tmpfiles/tmpfiles.c":{"insertions":16,"deletions":20}}},"5579f85663d10269e7ac7464be6548c99cea4ada":{"author":"Lennart Poettering","email":"lennart@poettering.net","date":"2018-01-23 13:03:34 UTC","message":"tmpfiles: refuse to chown()/chmod() files which are hardlinked, unless protected_hardlinks sysctl is on\n\nLet's add some extra safety.\n\nFixes: #7736","insertions":0,"deletions":43,"filepaths":{"src/tmpfiles/tmpfiles.c":{"insertions":0,"deletions":43}}},"062e01bbdbc3201e4c99bc0b702cb04a0ae2190c":{"author":"Michal Schmidt","email":"mschmidt@redhat.com","date":"2011-12-16 17:00:11 UTC","message":"tmpfiles: apply chown, chmod for 'Z' entries too\n\nIf changing ownership or permissions is not desired, they can be\nconfigured to '-' or omitted entirely.","insertions":34,"deletions":40,"filepaths":{"man/systemd-tmpfiles.xml":{"insertions":1,"deletions":2},"man/tmpfiles.d.xml":{"insertions":6,"deletions":10},"src/tmpfiles.c":{"insertions":27,"deletions":28}}},"f8eeeaf9b783ebbab30672629abf3920db286811":{"author":"Zbigniew Jędrzejewski-Szmek","email":"zbyszek@in.waw.pl","date":"2015-01-18 04:27:39 UTC","message":"tmpfiles: add 'a' type to set ACLs","insertions":34,"deletions":188,"filepaths":{"Makefile.am":{"insertions":0,"deletions":5},"man/tmpfiles.d.xml":{"insertions":9,"deletions":23},"src/journal/coredump.c":{"insertions":5,"deletions":1},"src/journal/journalctl.c":{"insertions":5,"deletions":1},"src/journal/journald-server.c":{"insertions":5,"deletions":0},"src/login/logind-acl.c":{"insertions":2,"deletions":0},"src/shared/acl-util.c":{"insertions":2,"deletions":64},"src/shared/acl-util.h":{"insertions":6,"deletions":13},"src/tmpfiles/tmpfiles.c":{"insertions":0,"deletions":81}}},"50d9e46dbb8400d4570781728c63b151d9ca982b":{"author":"Zbigniew Jędrzejewski-Szmek","email":"zbyszek@in.waw.pl","date":"2015-01-18 10:02:47 UTC","message":"tmpfiles: implement augmenting of existing ACLs\n\nThis is much more useful in practice (equivalent to setfacl -m).","insertions":38,"deletions":96,"filepaths":{"man/tmpfiles.d.xml":{"insertions":11,"deletions":17},"src/shared/acl-util.c":{"insertions":7,"deletions":42},"src/shared/acl-util.h":{"insertions":1,"deletions":2},"src/tmpfiles/tmpfiles.c":{"insertions":19,"deletions":35}}},"d4e9eb91ea12e11bff7d8c6265b067a20ccf37b8":{"author":"Dave Reisner","email":"dreisner@archlinux.org","date":"2012-09-03 21:13:18 UTC","message":"tmpfiles: support globbing for w option\n\nBreak out the write logic into a separate function and simply use it as\na callback to glob_item.\n\nThis allows users to consolidate writes to sysfs with multiple similar\npathnames, e.g.\n\n  w /sys/class/block/sd[a-z]/queue/read_ahead_kb - - - - 1024","insertions":65,"deletions":72,"filepaths":{"man/tmpfiles.d.xml":{"insertions":1,"deletions":1},"src/tmpfiles/tmpfiles.c":{"insertions":64,"deletions":71}}},"99e68c0b2d6ca9d491036920fcbca4c8d54404a8":{"author":"Michal Schmidt","email":"mschmidt@redhat.com","date":"2011-12-15 22:45:26 UTC","message":"tmpfiles: separate a generic item glob processing function\n\nItem glob processing will be useful for more than just removing.","insertions":27,"deletions":33,"filepaths":{"src/tmpfiles.c":{"insertions":27,"deletions":33}}},"1924a97db5d55b6537a6c6ef84944caab93cd19c":{"author":"Michael Olbrich","email":"m.olbrich@pengutronix.de","date":"2014-08-17 07:45:00 UTC","message":"tmpfiles: only execute chmod()/chown() when needed\n\nThis avoids errors like this, when the paths are already there with the\ncorrect permissions and owner:\n\nchmod(/var/spool) failed: Read-only file system","insertions":17,"deletions":21,"filepaths":{"src/tmpfiles/tmpfiles.c":{"insertions":17,"deletions":21}}},"cde684a2932d3c8cbb9b3374aec27a1c20ba75fa":{"author":"Lennart Poettering","email":"lennart@poettering.net","date":"2014-06-10 20:50:46 UTC","message":"tmpfiles: various modernizations","insertions":12,"deletions":27,"filepaths":{"src/tmpfiles/tmpfiles.c":{"insertions":12,"deletions":27}}},"c4b6915670ded7384795705ca9bb131da4763bac":{"author":"Alexander Kuleshov","email":"kuleshovmail@gmail.com","date":"2016-03-01 18:25:09 UTC","message":"tree-wide: no need to pass excess flags to open()/openat() if O_PATH is passed\n\nAs described in the documentation:\n\nWhen O_PATH is specified in flags, flag bits other than O_CLOEXEC,\nO_DIRECTORY, and O_NOFOLLOW are ignored.\n\nSo, we can remove unnecessary flags in a case when O_PATH is passed\nto the open() or openat().","insertions":5,"deletions":5,"filepaths":{"src/basic/mount-util.c":{"insertions":2,"deletions":2},"src/basic/xattr-util.c":{"insertions":1,"deletions":1},"src/tmpfiles/tmpfiles.c":{"insertions":2,"deletions":2}}},"e0bc1d70d90ec75d27d287228c1c8821254d5a21":{"author":"Lennart Poettering","email":"lennart@poettering.net","date":"2016-12-29 10:00:55 UTC","message":"tmpfiles: improve error message for chown()/chmod() failures (#4969)\n\nLet's make the error message less confusing here.\n\nFixes: #4954","insertions":2,"deletions":2,"filepaths":{"src/tmpfiles/tmpfiles.c":{"insertions":2,"deletions":2}}},"dc2335669afddc767eea2757f8d7dfc7a8f927fa":{"author":"Lennart Poettering","email":"lennart@poettering.net","date":"2018-01-22 20:11:04 UTC","message":"tmpfiles: fix check for figuring out whether to call chmod()\n\nNo need to call chown() if everything matches already.","insertions":2,"deletions":2,"filepaths":{"src/tmpfiles/tmpfiles.c":{"insertions":2,"deletions":2}}},"bd550f78eb261c757cbff85acdb55563c56521f2":{"author":"Lennart Poettering","email":"lennart@poettering.net","date":"2015-04-10 14:03:24 UTC","message":"tmpfiles: substitute % specifiers in arguments for writing files and xattrs","insertions":24,"deletions":32,"filepaths":{"src/tmpfiles/tmpfiles.c":{"insertions":24,"deletions":32}}},"25f027c5efb2a26b2c7cb9a9608eb2bd49cc5ffc":{"author":"Zbigniew Jędrzejewski-Szmek","email":"zbyszek@in.waw.pl","date":"2017-05-13 15:26:55 UTC","message":"tree-wide: when %m is used in log_*, always specify errno explicitly\n\nAll those uses were correct, but I think it's better to be explicit.\nUsing implicit errno is too error prone, and with this change we can require\n(in the sense of a style guideline) that the code is always specified.\n\nHelpful query: git grep -n -P 'log_[^s][a-z]+\\(.*%m'","insertions":35,"deletions":28,"filepaths":{"src/basic/selinux-util.c":{"insertions":1,"deletions":1},"src/core/cgroup.c":{"insertions":2,"deletions":1},"src/core/main.c":{"insertions":1,"deletions":1},"src/libsystemd-network/sd-dhcp-client.c":{"insertions":4,"deletions":4},"src/libsystemd/sd-device/device-enumerator.c":{"insertions":8,"deletions":4},"src/libsystemd/sd-device/sd-device.c":{"insertions":2,"deletions":1},"src/libudev/libudev-monitor.c":{"insertions":1,"deletions":1},"src/shared/install.c":{"insertions":1,"deletions":1},"src/stdio-bridge/stdio-bridge.c":{"insertions":1,"deletions":1},"src/test/test-nss.c":{"insertions":1,"deletions":1},"src/tmpfiles/tmpfiles.c":{"insertions":4,"deletions":3},"src/udev/udev-rules.c":{"insertions":9,"deletions":9}}},"43ad6e31aae7e5d36e8a01968dfdca1d3fedc7fa":{"author":"Lennart Poettering","email":"lennart@poettering.net","date":"2014-06-17 22:01:39 UTC","message":"tmpfiles: w lines should allow following symlinks","insertions":12,"deletions":8,"filepaths":{"src/tmpfiles/tmpfiles.c":{"insertions":12,"deletions":8}}},"8fb3f0099787a5b48213c4e2aa42d8ff61b0c7f1":{"author":"Reverend Homer","email":"mk.43.ecko@gmail.com","date":"2016-12-09 09:04:30 UTC","message":"tree-wide: replace all readdir cycles with FOREACH_DIRENT{,_ALL} (#4853)","insertions":118,"deletions":46,"filepaths":{"TODO":{"insertions":2,"deletions":0},"src/basic/fd-util.c":{"insertions":4,"deletions":2},"src/basic/fs-util.c":{"insertions":11,"deletions":2},"src/basic/rm-rf.c":{"insertions":11,"deletions":4},"src/basic/util.c":{"insertions":14,"deletions":2},"src/core/killall.c":{"insertions":1,"deletions":2},"src/core/manager.c":{"insertions":11,"deletions":3},"src/delta/delta.c":{"insertions":7,"deletions":3},"src/libsystemd/sd-device/sd-device.c":{"insertions":1,"deletions":2},"src/libsystemd/sd-login/sd-login.c":{"insertions":10,"deletions":2},"src/login/logind-dbus.c":{"insertions":2,"deletions":1},"src/shared/dropin.c":{"insertions":14,"deletions":3},"src/shared/fdset.c":{"insertions":5,"deletions":2},"src/tmpfiles/tmpfiles.c":{"insertions":11,"deletions":4},"src/udev/udev-builtin-net_id.c":{"insertions":1,"deletions":2},"src/udev/udev-builtin-path_id.c":{"insertions":2,"deletions":2},"src/udev/udev-node.c":{"insertions":5,"deletions":4},"src/udev/udev-rules.c":{"insertions":2,"deletions":2},"src/udev/udev-watch.c":{"insertions":2,"deletions":2},"src/udev/udevadm-info.c":{"insertions":2,"deletions":2}}},"df99a9ef5bb7a89b92ccfb103b2f3e7046c62ef5":{"author":"Zbigniew Jędrzejewski-Szmek","email":"zbyszek@in.waw.pl","date":"2014-01-02 05:02:31 UTC","message":"tmpfiles: do not bump access times of directories we are cleaning up\n\nBoth plain opendir() and glob() will bump access time. Privileged\noption O_NOATIME can be used to prevent the access time from being\nupdated. We already used it for subdirectories of the directories\nwhich we were cleaning up. But for the directories specified directly\nin the config files, we wouldn't do that. This means that,\nparadoxically, our own temporary directories for PrivateTmp would stay\naround forever, as long as one let systemd-tmpfiles-clean.service run\nregularly, because they had their own glob patterns specified.\n\nhttps://bugzilla.redhat.com/show_bug.cgi?id=1183684","insertions":8,"deletions":55,"filepaths":{"man/systemd-tmpfiles.xml":{"insertions":0,"deletions":13},"src/shared/macro.h":{"insertions":0,"deletions":4},"src/tmpfiles/tmpfiles.c":{"insertions":8,"deletions":38}}},"c84a94883161073239c35d181e25823ff0454f68":{"author":"Zbigniew Jędrzejewski-Szmek","email":"zbyszek@in.waw.pl","date":"2013-03-24 23:09:19 UTC","message":"Add _cleanup_globfree_\n\nFixes a memleak in error path in exec_context_load_environment.","insertions":21,"deletions":13,"filepaths":{"src/core/execute.c":{"insertions":10,"deletions":2},"src/shared/util.c":{"insertions":3,"deletions":1},"src/shared/util.h":{"insertions":1,"deletions":3},"src/tmpfiles/tmpfiles.c":{"insertions":7,"deletions":7}}},"df8dee85da5fa41e95dd7f536e67fcc6940a6488":{"author":"Zbigniew Jędrzejewski-Szmek","email":"zbyszek@in.waw.pl","date":"2016-04-20 04:06:25 UTC","message":"tmpfiles: add new 'e' action which cleans up a dir without creating it\n\nI wanted to add a config line that would empty a directory\nwithout creating it if doesn't exist. Existing actions don't allow\nthis.\n\nv2: properly add 'e' to needs_glob() and takes_ownership()","insertions":42,"deletions":36,"filepaths":{"man/tmpfiles.d.xml":{"insertions":1,"deletions":21},"src/tmpfiles/tmpfiles.c":{"insertions":41,"deletions":15}}},"582deb8446b7c76f945bb3174a8059d56b5edb65":{"author":"Zbigniew Jędrzejewski-Szmek","email":"zbyszek@in.waw.pl","date":"2015-01-24 06:54:05 UTC","message":"tmpfiles: add debug statements for all actions\n\nsystemd-tmpfiles can be used by users, but it can be quite hard to\nfigure out the logic it follows, especially since the logic is in some\nplaces rather torturous. Hopefuly this will make it easier for users\nto understand what is happening.","insertions":87,"deletions":196,"filepaths":{"src/tmpfiles/tmpfiles.c":{"insertions":87,"deletions":196}}},"fed1e721fd0c81e60c77120539f34e16c2585634":{"author":"Lennart Poettering","email":"lennart@poettering.net","date":"2014-11-28 19:51:01 UTC","message":"treewide: introduce UID_INVALID (and friends) as macro for (uid_t) -1","insertions":65,"deletions":69,"filepaths":{"src/bus-proxyd/bus-policy.c":{"insertions":4,"deletions":4},"src/bus-proxyd/bus-proxyd.c":{"insertions":10,"deletions":10},"src/core/execute.c":{"insertions":3,"deletions":3},"src/core/socket.c":{"insertions":2,"deletions":2},"src/core/timer.c":{"insertions":2,"deletions":2},"src/libsystemd/sd-bus/bus-control.c":{"insertions":11,"deletions":11},"src/libsystemd/sd-bus/bus-kernel.c":{"insertions":9,"deletions":9},"src/libsystemd/sd-bus/bus-message.c":{"insertions":2,"deletions":2},"src/shared/cgroup-util.c":{"insertions":3,"deletions":3},"src/shared/macro.h":{"insertions":0,"deletions":4},"src/shared/mkdir.c":{"insertions":2,"deletions":2},"src/shared/uid-range.c":{"insertions":2,"deletions":2},"src/shared/util.c":{"insertions":9,"deletions":9},"src/sysusers/sysusers.c":{"insertions":1,"deletions":1},"src/test/test-cgroup-util.c":{"insertions":1,"deletions":1},"src/test/test-conf-files.c":{"insertions":1,"deletions":1},"src/test/test-uid-range.c":{"insertions":1,"deletions":1},"src/tmpfiles/tmpfiles.c":{"insertions":2,"deletions":2}}},"505ef0e36c218f5c7a0987156a8d5bd5129a6773":{"author":"Zbigniew Jędrzejewski-Szmek","email":"zbyszek@in.waw.pl","date":"2015-01-09 06:10:02 UTC","message":"tmpfiles: simplification\n\nCertain conditions were checked more than once. Warning message\nis improved.","insertions":27,"deletions":25,"filepaths":{"src/tmpfiles/tmpfiles.c":{"insertions":27,"deletions":25}}},"9855d6c7a161a80084cf94faa42333c48cbeac56":{"author":"Lennart Poettering","email":"lennart@poettering.net","date":"2014-06-11 07:19:57 UTC","message":"tmpfiles: remove unnecessary function","insertions":14,"deletions":6,"filepaths":{"src/tmpfiles/tmpfiles.c":{"insertions":14,"deletions":6}}},"201be4265ff8ce4e66f8a071ca588b2ed8869f61":{"author":"Lennart Poettering","email":"lennart@poettering.net","date":"2018-01-22 14:31:50 UTC","message":"tmpfiles: avoid using wrong type for strlen() result\n\nThe result of strlen is size_t, hence let's not store it in an \"int\"\njust to pass it on as as size_t right-away. In fact let's not store it\nat all…","insertions":4,"deletions":1,"filepaths":{"src/tmpfiles/tmpfiles.c":{"insertions":4,"deletions":1}}},"349cc4a507c4d84fcadf61f42159ea6412717896":{"author":"Zbigniew Jędrzejewski-Szmek","email":"zbyszek@in.waw.pl","date":"2017-10-03 08:41:51 UTC","message":"build-sys: use #if Y instead of #ifdef Y everywhere\n\nThe advantage is that is the name is mispellt, cpp will warn us.\n\n$ git grep -Ee \"conf.set\\('(HAVE|ENABLE)_\" -l|xargs sed -r -i \"s/conf.set\\('(HAVE|ENABLE)_/conf.set10('\\1_/\"\n$ git grep -Ee '#ifn?def (HAVE|ENABLE)' -l|xargs sed -r -i 's/#ifdef (HAVE|ENABLE)/#if \\1/; s/#ifndef (HAVE|ENABLE)/#if ! \\1/;'\n$ git grep -Ee 'if.*defined\\(HAVE' -l|xargs sed -i -r 's/defined\\((HAVE_[A-Z0-9_]*)\\)/\\1/g'\n$ git grep -Ee 'if.*defined\\(ENABLE' -l|xargs sed -i -r 's/defined\\((ENABLE_[A-Z0-9_]*)\\)/\\1/g'\n+ manual changes to meson.build\n\nsquash! build-sys: use #if Y instead of #ifdef Y everywhere\n\nv2:\n- fix incorrect setting of HAVE_LIBIDN2","insertions":565,"deletions":598,"filepaths":{"docs/sysvinit/meson.build":{"insertions":1,"deletions":1},"docs/var-log/meson.build":{"insertions":1,"deletions":1},"hwdb/meson.build":{"insertions":1,"deletions":1},"man/meson.build":{"insertions":1,"deletions":1},"meson.build":{"insertions":135,"deletions":168},"network/meson.build":{"insertions":1,"deletions":1},"shell-completion/bash/meson.build":{"insertions":1,"deletions":1},"shell-completion/zsh/meson.build":{"insertions":1,"deletions":1},"src/analyze/analyze.c":{"insertions":2,"deletions":2},"src/basic/blkid-util.h":{"insertions":2,"deletions":2},"src/basic/btrfs-util.c":{"insertions":1,"deletions":1},"src/basic/build.h":{"insertions":20,"deletions":20},"src/basic/def.h":{"insertions":2,"deletions":2},"src/basic/hashmap.c":{"insertions":11,"deletions":11},"src/basic/hashmap.h":{"insertions":2,"deletions":2},"src/basic/memfd-util.c":{"insertions":1,"deletions":1},"src/basic/missing.h":{"insertions":11,"deletions":11},"src/basic/path-util.h":{"insertions":1,"deletions":1},"src/basic/process-util.c":{"insertions":2,"deletions":2},"src/basic/random-util.c":{"insertions":4,"deletions":4},"src/basic/selinux-util.c":{"insertions":17,"deletions":17},"src/basic/smack-util.c":{"insertions":1,"deletions":1},"src/basic/socket-util.c":{"insertions":1,"deletions":1},"src/boot/efi/boot.c":{"insertions":1,"deletions":1},"src/boot/efi/measure.c":{"insertions":1,"deletions":1},"src/boot/efi/meson.build":{"insertions":2,"deletions":2},"src/boot/efi/stub.c":{"insertions":1,"deletions":1},"src/core/audit-fd.c":{"insertions":1,"deletions":1},"src/core/dbus-execute.c":{"insertions":7,"deletions":7},"src/core/dbus.c":{"insertions":2,"deletions":2},"src/core/execute.c":{"insertions":24,"deletions":24},"src/core/ima-setup.c":{"insertions":1,"deletions":1},"src/core/kmod-setup.c":{"insertions":4,"deletions":4},"src/core/load-fragment.c":{"insertions":8,"deletions":8},"src/core/main.c":{"insertions":7,"deletions":7},"src/core/manager.c":{"insertions":3,"deletions":3},"src/core/mount-setup.c":{"insertions":6,"deletions":6},"src/core/namespace.c":{"insertions":1,"deletions":1},"src/core/selinux-access.c":{"insertions":3,"deletions":3},"src/core/selinux-access.h":{"insertions":1,"deletions":1},"src/core/selinux-setup.c":{"insertions":3,"deletions":3},"src/core/smack-setup.c":{"insertions":2,"deletions":2},"src/core/umount.c":{"insertions":1,"deletions":1},"src/coredump/coredump.c":{"insertions":4,"deletions":4},"src/coredump/coredumpctl.c":{"insertions":1,"deletions":1},"src/coredump/meson.build":{"insertions":1,"deletions":1},"src/delta/delta.c":{"insertions":2,"deletions":2},"src/fsck/fsck.c":{"insertions":2,"deletions":2},"src/gpt-auto-generator/gpt-auto-generator.c":{"insertions":3,"deletions":3},"src/hostname/meson.build":{"insertions":1,"deletions":1},"src/import/meson.build":{"insertions":1,"deletions":1},"src/journal-remote/journal-gatewayd.c":{"insertions":1,"deletions":1},"src/journal-remote/journal-remote.c":{"insertions":2,"deletions":2},"src/journal-remote/meson.build":{"insertions":2,"deletions":2},"src/journal-remote/microhttpd-util.c":{"insertions":2,"deletions":2},"src/journal/audit-type.c":{"insertions":1,"deletions":1},"src/journal/compress.c":{"insertions":13,"deletions":13},"src/journal/compress.h":{"insertions":2,"deletions":2},"src/journal/journal-def.h":{"insertions":4,"deletions":4},"src/journal/journal-file.c":{"insertions":18,"deletions":18},"src/journal/journal-file.h":{"insertions":3,"deletions":3},"src/journal/journal-verify.c":{"insertions":3,"deletions":3},"src/journal/journalctl.c":{"insertions":7,"deletions":7},"src/journal/journald-context.c":{"insertions":2,"deletions":2},"src/journal/journald-native.c":{"insertions":1,"deletions":1},"src/journal/journald-server.c":{"insertions":4,"deletions":4},"src/journal/journald-stream.c":{"insertions":1,"deletions":1},"src/journal/journald-syslog.c":{"insertions":1,"deletions":1},"src/journal/journald.c":{"insertions":1,"deletions":1},"src/journal/meson.build":{"insertions":3,"deletions":3},"src/journal/mmap-cache.c":{"insertions":2,"deletions":2},"src/journal/sd-journal.c":{"insertions":2,"deletions":2},"src/journal/test-compress-benchmark.c":{"insertions":4,"deletions":4},"src/journal/test-compress.c":{"insertions":8,"deletions":8},"src/journal/test-journal.c":{"insertions":1,"deletions":1},"src/libsystemd/sd-bus/bus-control.c":{"insertions":1,"deletions":1},"src/libsystemd/sd-bus/bus-kernel.c":{"insertions":1,"deletions":1},"src/libsystemd/sd-bus/test-bus-gvariant.c":{"insertions":3,"deletions":3},"src/libsystemd/sd-bus/test-bus-marshal.c":{"insertions":4,"deletions":4},"src/libsystemd/sd-hwdb/sd-hwdb.c":{"insertions":1,"deletions":1},"src/libsystemd/sd-path/sd-path.c":{"insertions":3,"deletions":3},"src/locale/localed.c":{"insertions":2,"deletions":2},"src/locale/meson.build":{"insertions":2,"deletions":2},"src/login/logind-acl.h":{"insertions":1,"deletions":1},"src/login/meson.build":{"insertions":2,"deletions":2},"src/machine/meson.build":{"insertions":1,"deletions":1},"src/network/meson.build":{"insertions":1,"deletions":1},"src/network/networkd-manager.c":{"insertions":1,"deletions":1},"src/nspawn/nspawn-mount.c":{"insertions":2,"deletions":2},"src/nspawn/nspawn-patch-uid.c":{"insertions":2,"deletions":2},"src/nspawn/nspawn-seccomp.c":{"insertions":3,"deletions":3},"src/nspawn/nspawn.c":{"insertions":5,"deletions":5},"src/quotacheck/quotacheck.c":{"insertions":2,"deletions":2},"src/resolve/meson.build":{"insertions":1,"deletions":1},"src/resolve/resolved-conf.c":{"insertions":1,"deletions":1},"src/resolve/resolved-dns-dnssec.c":{"insertions":2,"deletions":2},"src/resolve/resolved-link.c":{"insertions":1,"deletions":1},"src/resolve/resolved-manager.c":{"insertions":5,"deletions":5},"src/resolve/test-dnssec-complex.c":{"insertions":1,"deletions":1},"src/resolve/test-dnssec.c":{"insertions":2,"deletions":2},"src/shared/acl-util.h":{"insertions":1,"deletions":1},"src/shared/bus-unit-util.c":{"insertions":1,"deletions":1},"src/shared/bus-util.c":{"insertions":6,"deletions":6},"src/shared/dissect-image.c":{"insertions":11,"deletions":11},"src/shared/dns-domain.c":{"insertions":5,"deletions":5},"src/shared/dns-domain.h":{"insertions":1,"deletions":1},"src/shared/efivars.c":{"insertions":1,"deletions":1},"src/shared/efivars.h":{"insertions":1,"deletions":1},"src/shared/firewall-util.h":{"insertions":1,"deletions":1},"src/shared/gcrypt-util.c":{"insertions":1,"deletions":1},"src/shared/gcrypt-util.h":{"insertions":3,"deletions":3},"src/shared/install.c":{"insertions":2,"deletions":2},"src/shared/journal-util.c":{"insertions":2,"deletions":2},"src/shared/meson.build":{"insertions":4,"deletions":4},"src/shared/path-lookup.c":{"insertions":1,"deletions":1},"src/shared/spawn-polkit-agent.c":{"insertions":1,"deletions":1},"src/shared/utmp-wtmp.h":{"insertions":1,"deletions":1},"src/systemctl/systemctl.c":{"insertions":9,"deletions":9},"src/sysusers/sysusers.c":{"insertions":2,"deletions":2},"src/test/test-dns-domain.c":{"insertions":2,"deletions":2},"src/test/test-execute.c":{"insertions":5,"deletions":5},"src/test/test-nss.c":{"insertions":3,"deletions":3},"src/test/test-process-util.c":{"insertions":3,"deletions":3},"src/test/test-sigbus.c":{"insertions":2,"deletions":2},"src/timedate/meson.build":{"insertions":1,"deletions":1},"src/timesync/meson.build":{"insertions":1,"deletions":1},"src/tmpfiles/tmpfiles.c":{"insertions":5,"deletions":5},"src/udev/meson.build":{"insertions":3,"deletions":3},"src/udev/net/link-config.c":{"insertions":1,"deletions":1},"src/udev/udev-builtin-blkid.c":{"insertions":1,"deletions":1},"src/udev/udev-builtin-btrfs.c":{"insertions":1,"deletions":1},"src/udev/udev-builtin.c":{"insertions":3,"deletions":3},"src/udev/udev.h":{"insertions":5,"deletions":5},"src/update-utmp/update-utmp.c":{"insertions":8,"deletions":8},"src/vconsole/meson.build":{"insertions":1,"deletions":1},"sysctl.d/meson.build":{"insertions":1,"deletions":1},"sysusers.d/meson.build":{"insertions":2,"deletions":2},"test/meson.build":{"insertions":1,"deletions":1},"tmpfiles.d/meson.build":{"insertions":3,"deletions":3},"units/meson.build":{"insertions":7,"deletions":7}}},"fbd0b64f44a7bae678137d67ad5da202f6b8d809":{"author":"Lennart Poettering","email":"lennart@poettering.net","date":"2017-12-14 18:02:29 UTC","message":" wsBcBAABCAAQBQJaMry1CRBK7hj4Ov3rIwAAdHIIAFxCqtN2lbtZibYNl1YDgIn8\n Ga1h4WVVPK2McLT4uGU53WauFFltdVK8kI1HO62wyz60Dcl4lHnRwE4EOZNMeFnz\n 3C9Nx8CJuJVAsgwYg0BcVS+WeEtD97T8Spuy17TEsS4j5lO68TmpowGiZMgXU67H\n 6iUJsLa6THSFaSaHO4pISo2noCjiKoSauaejoa0CZV0md58G8wHmlMC6GiZg9lRJ\n Jf82yGOXnu08U+jk9VX0dCZ66V6fEWGqwEtSokSbMiGD8YsMEZd2Gm25wKuxU2F0\n INhzRLsg8/8UOa4bftMZFHppnU0/GnGuX9kUQue2RQXIlK9HmfEpRtTxymLHjwI=\n =y9p7\n -----END PGP SIGNATURE-----\n \n\ntree-wide: make use of new STRLEN() macro everywhere (#7639)\n\nLet's employ coccinelle to do this for us.\n\nFollow-up for #7625.","insertions":221,"deletions":255,"filepaths":{"CODING_STYLE":{"insertions":2,"deletions":1},"coccinelle/const-strlen.cocci":{"insertions":0,"deletions":10},"src/basic/cgroup-util.c":{"insertions":3,"deletions":3},"src/basic/device-nodes.h":{"insertions":2,"deletions":2},"src/basic/fd-util.c":{"insertions":1,"deletions":1},"src/basic/fileio.c":{"insertions":1,"deletions":1},"src/basic/fs-util.c":{"insertions":2,"deletions":2},"src/basic/log.c":{"insertions":4,"deletions":4},"src/basic/mount-util.c":{"insertions":1,"deletions":1},"src/basic/process-util.h":{"insertions":1,"deletions":1},"src/basic/signal-util.c":{"insertions":1,"deletions":1},"src/basic/socket-util.c":{"insertions":1,"deletions":1},"src/basic/terminal-util.c":{"insertions":1,"deletions":1},"src/basic/util.c":{"insertions":1,"deletions":1},"src/basic/xattr-util.c":{"insertions":1,"deletions":1},"src/boot/bootctl.c":{"insertions":1,"deletions":2},"src/busctl/busctl.c":{"insertions":4,"deletions":4},"src/core/automount.c":{"insertions":2,"deletions":2},"src/core/dynamic-user.c":{"insertions":5,"deletions":5},"src/core/ima-setup.c":{"insertions":1,"deletions":1},"src/core/manager.c":{"insertions":2,"deletions":2},"src/coredump/coredumpctl.c":{"insertions":3,"deletions":3},"src/fsck/fsck.c":{"insertions":1,"deletions":1},"src/journal-remote/journal-remote.c":{"insertions":1,"deletions":1},"src/journal/audit-type.h":{"insertions":1,"deletions":1},"src/journal/journal-file.c":{"insertions":1,"deletions":1},"src/journal/journal-send.c":{"insertions":3,"deletions":3},"src/journal/journalctl.c":{"insertions":1,"deletions":2},"src/journal/journald-console.c":{"insertions":2,"deletions":2},"src/journal/journald-kmsg.c":{"insertions":1,"deletions":1},"src/journal/journald-native.c":{"insertions":5,"deletions":6},"src/journal/journald-server.c":{"insertions":3,"deletions":3},"src/journal/journald-server.h":{"insertions":1,"deletions":1},"src/journal/journald-stream.c":{"insertions":5,"deletions":5},"src/journal/journald-syslog.c":{"insertions":1,"deletions":1},"src/journal/test-journal-send.c":{"insertions":4,"deletions":4},"src/libsystemd/sd-bus/bus-socket.c":{"insertions":2,"deletions":3},"src/libsystemd/sd-bus/bus-track.c":{"insertions":1,"deletions":1},"src/libsystemd/sd-device/device-enumerator.c":{"insertions":1,"deletions":1},"src/libsystemd/sd-device/device-private.c":{"insertions":1,"deletions":1},"src/libsystemd/sd-device/sd-device.c":{"insertions":2,"deletions":2},"src/libsystemd/sd-network/sd-network.c":{"insertions":3,"deletions":3},"src/machine/machine.c":{"insertions":1,"deletions":1},"src/machine/machinectl.c":{"insertions":6,"deletions":6},"src/machine/machined-dbus.c":{"insertions":2,"deletions":2},"src/network/networkctl.c":{"insertions":1,"deletions":1},"src/nspawn/nspawn-patch-uid.c":{"insertions":2,"deletions":2},"src/nspawn/nspawn.c":{"insertions":2,"deletions":2},"src/nss-systemd/nss-systemd.c":{"insertions":1,"deletions":1},"src/resolve/resolved-dns-rr.c":{"insertions":2,"deletions":2},"src/shared/ask-password-api.c":{"insertions":2,"deletions":4},"src/shared/dissect-image.c":{"insertions":1,"deletions":1},"src/shared/logs-show.c":{"insertions":1,"deletions":3},"src/shared/utmp-wtmp.c":{"insertions":1,"deletions":1},"src/systemctl/systemctl.c":{"insertions":29,"deletions":31},"src/test/test-fileio.c":{"insertions":1,"deletions":1},"src/test/test-hexdecoct.c":{"insertions":63,"deletions":63},"src/test/test-process-util.c":{"insertions":2,"deletions":2},"src/tmpfiles/tmpfiles.c":{"insertions":2,"deletions":2},"src/udev/udev-event.c":{"insertions":4,"deletions":8},"src/udev/udev-node.c":{"insertions":1,"deletions":1},"src/udev/udev-rules.c":{"insertions":13,"deletions":21},"src/udev/udevadm-info.c":{"insertions":4,"deletions":7}}},"15411c0cb1192799b37ec8f25d6f30e8d7292fc6":{"author":"David Herrmann","email":"dh.herrmann@gmail.com","date":"2015-03-13 13:08:00 UTC","message":"tree-wide: there is no ENOTSUP on linux\n\nReplace ENOTSUP by EOPNOTSUPP as this is what linux actually uses.","insertions":104,"deletions":104,"filepaths":{"man/sd_event_add_time.xml":{"insertions":1,"deletions":1},"src/bus-proxyd/driver.c":{"insertions":4,"deletions":4},"src/core/bus-policy.c":{"insertions":1,"deletions":1},"src/core/job.c":{"insertions":1,"deletions":1},"src/core/load-fragment.c":{"insertions":1,"deletions":1},"src/core/unit-printf.c":{"insertions":7,"deletions":7},"src/core/unit.c":{"insertions":2,"deletions":2},"src/import/import-compress.c":{"insertions":3,"deletions":3},"src/import/qcow2-util.c":{"insertions":4,"deletions":4},"src/journal-remote/journal-remote.c":{"insertions":1,"deletions":1},"src/journal/coredumpctl.c":{"insertions":1,"deletions":1},"src/journal/journal-authenticate.c":{"insertions":2,"deletions":2},"src/journal/journal-verify.c":{"insertions":2,"deletions":2},"src/journal/journalctl.c":{"insertions":2,"deletions":2},"src/libsystemd-network/lldp-internal.c":{"insertions":2,"deletions":2},"src/libsystemd/sd-bus/bus-common-errors.c":{"insertions":1,"deletions":1},"src/libsystemd/sd-bus/bus-control.c":{"insertions":3,"deletions":3},"src/libsystemd/sd-bus/bus-creds.c":{"insertions":3,"deletions":3},"src/libsystemd/sd-bus/bus-error.c":{"insertions":2,"deletions":2},"src/libsystemd/sd-bus/bus-kernel.c":{"insertions":3,"deletions":3},"src/libsystemd/sd-bus/bus-message.c":{"insertions":5,"deletions":5},"src/libsystemd/sd-bus/bus-util.c":{"insertions":4,"deletions":4},"src/libsystemd/sd-bus/sd-bus.c":{"insertions":2,"deletions":2},"src/libsystemd/sd-bus/test-bus-error.c":{"insertions":2,"deletions":2},"src/libsystemd/sd-event/sd-event.c":{"insertions":1,"deletions":1},"src/libsystemd/sd-path/sd-path.c":{"insertions":2,"deletions":2},"src/libsystemd/sd-rtnl/rtnl-message.c":{"insertions":2,"deletions":2},"src/libsystemd/sd-rtnl/rtnl-types.c":{"insertions":5,"deletions":5},"src/libsystemd/sd-rtnl/sd-rtnl.c":{"insertions":1,"deletions":1},"src/login/logind-action.c":{"insertions":1,"deletions":1},"src/login/logind-session.c":{"insertions":2,"deletions":2},"src/machine/machinectl.c":{"insertions":1,"deletions":1},"src/notify/notify.c":{"insertions":1,"deletions":1},"src/nspawn/nspawn.c":{"insertions":3,"deletions":3},"src/path/path.c":{"insertions":1,"deletions":1},"src/resolve/resolved-dns-scope.c":{"insertions":2,"deletions":2},"src/shared/copy.c":{"insertions":2,"deletions":2},"src/shared/fw-util.c":{"insertions":4,"deletions":4},"src/shared/fw-util.h":{"insertions":2,"deletions":2},"src/shared/install.c":{"insertions":2,"deletions":2},"src/shared/machine-image.c":{"insertions":5,"deletions":5},"src/shared/selinux-util.c":{"insertions":1,"deletions":1},"src/shared/smack-util.c":{"insertions":1,"deletions":1},"src/shared/socket-util.c":{"insertions":1,"deletions":1},"src/shared/util.c":{"insertions":1,"deletions":1},"src/systemctl/systemctl.c":{"insertions":2,"deletions":2},"src/timedate/timedated.c":{"insertions":1,"deletions":1},"src/tmpfiles/tmpfiles.c":{"insertions":1,"deletions":1}}},"3d22bc8636b05524a12255781bed6ef5c6afac9d":{"author":"Lukasz Rubaszewski","email":"l_rubaszewski@o2.pl","date":"2017-11-24 21:28:14 UTC","message":"tmpfiles: check if not too many symbolic links. (#7423)\n\nSome filesystems do not set d_type value when\nreaddir is called, so entry type is unknown.\nTherefore check if accessing entry does not\nreturn ELOOP error.","insertions":1,"deletions":1,"filepaths":{"src/tmpfiles/tmpfiles.c":{"insertions":1,"deletions":1}}},"49bfc8774bf900fb2239a9b70b951aedccbfed5a":{"author":"Lennart Poettering","email":"lennart@poettering.net","date":"2017-02-01 23:06:18 UTC","message":"fs-util: unify code we use to check if dirent's d_name is \".\" or \"..\"\n\nWe use different idioms at different places. Let's replace this is the\none true new idiom, that is even a bit faster...","insertions":20,"deletions":43,"filepaths":{"src/basic/cgroup-util.c":{"insertions":2,"deletions":1},"src/basic/copy.c":{"insertions":1,"deletions":1},"src/basic/path-util.c":{"insertions":6,"deletions":19},"src/basic/path-util.h":{"insertions":0,"deletions":2},"src/basic/rm-rf.c":{"insertions":1,"deletions":1},"src/basic/socket-util.c":{"insertions":1,"deletions":1},"src/gpt-auto-generator/gpt-auto-generator.c":{"insertions":1,"deletions":1},"src/nspawn/nspawn-patch-uid.c":{"insertions":1,"deletions":1},"src/resolve/resolved-manager.c":{"insertions":1,"deletions":1},"src/shared/clean-ipc.c":{"insertions":2,"deletions":2},"src/test/test-fs-util.c":{"insertions":0,"deletions":11},"src/tmpfiles/tmpfiles.c":{"insertions":4,"deletions":2}}},"605405c6cc934466951b0c6bad5a9553620bcb08":{"author":"Zbigniew Jędrzejewski-Szmek","email":"zbyszek@in.waw.pl","date":"2016-10-23 15:43:27 UTC","message":"tree-wide: drop NULL sentinel from strjoin\n\nThis makes strjoin and strjoina more similar and avoids the useless final\nargument.\n\nspatch -I . -I ./src -I ./src/basic -I ./src/basic -I ./src/shared -I ./src/shared -I ./src/network -I ./src/locale -I ./src/login -I ./src/journal -I ./src/journal -I ./src/timedate -I ./src/timesync -I ./src/nspawn -I ./src/resolve -I ./src/resolve -I ./src/systemd -I ./src/core -I ./src/core -I ./src/libudev -I ./src/udev -I ./src/udev/net -I ./src/udev -I ./src/libsystemd/sd-bus -I ./src/libsystemd/sd-event -I ./src/libsystemd/sd-login -I ./src/libsystemd/sd-netlink -I ./src/libsystemd/sd-network -I ./src/libsystemd/sd-hwdb -I ./src/libsystemd/sd-device -I ./src/libsystemd/sd-id128 -I ./src/libsystemd-network --sp-file coccinelle/strjoin.cocci --in-place $(git ls-files src/*.c)\n\ngit grep -e '\\bstrjoin\\b.*NULL' -l|xargs sed -i -r 's/strjoin\\((.*), NULL\\)/strjoin(\\1)/'\n\nThis might have missed a few cases (spatch has a really hard time dealing\nwith _cleanup_ ","insertions":194,"deletions":215,"filepaths":{"coccinelle/strjoin.cocci":{"insertions":0,"deletions":16},"src/backlight/backlight.c":{"insertions":2,"deletions":2},"src/basic/btrfs-util.c":{"insertions":1,"deletions":1},"src/basic/cgroup-util.c":{"insertions":8,"deletions":8},"src/basic/conf-files.c":{"insertions":1,"deletions":1},"src/basic/fileio.c":{"insertions":3,"deletions":3},"src/basic/fs-util.c":{"insertions":1,"deletions":1},"src/basic/mount-util.c":{"insertions":1,"deletions":1},"src/basic/path-util.c":{"insertions":7,"deletions":5},"src/basic/process-util.c":{"insertions":3,"deletions":3},"src/basic/string-util.c":{"insertions":1,"deletions":1},"src/basic/string-util.h":{"insertions":1,"deletions":2},"src/basic/unit-name.c":{"insertions":2,"deletions":2},"src/basic/util.c":{"insertions":1,"deletions":1},"src/cgls/cgls.c":{"insertions":1,"deletions":1},"src/cgtop/cgtop.c":{"insertions":1,"deletions":1},"src/core/cgroup.c":{"insertions":3,"deletions":4},"src/core/dbus-execute.c":{"insertions":1,"deletions":1},"src/core/dbus-unit.c":{"insertions":3,"deletions":3},"src/core/device.c":{"insertions":1,"deletions":1},"src/core/execute.c":{"insertions":5,"deletions":5},"src/core/locale-setup.c":{"insertions":1,"deletions":1},"src/core/manager.c":{"insertions":1,"deletions":1},"src/core/namespace.c":{"insertions":1,"deletions":1},"src/core/service.c":{"insertions":1,"deletions":1},"src/core/timer.c":{"insertions":2,"deletions":2},"src/core/unit.c":{"insertions":2,"deletions":2},"src/coredump/coredump.c":{"insertions":2,"deletions":7},"src/coredump/coredumpctl.c":{"insertions":2,"deletions":2},"src/cryptsetup/cryptsetup-generator.c":{"insertions":6,"deletions":6},"src/debug-generator/debug-generator.c":{"insertions":2,"deletions":2},"src/delta/delta.c":{"insertions":4,"deletions":4},"src/escape/escape.c":{"insertions":1,"deletions":1},"src/fstab-generator/fstab-generator.c":{"insertions":7,"deletions":7},"src/gpt-auto-generator/gpt-auto-generator.c":{"insertions":12,"deletions":12},"src/hibernate-resume/hibernate-resume-generator.c":{"insertions":1,"deletions":1},"src/hostname/hostnamed.c":{"insertions":1,"deletions":1},"src/hwdb/hwdb.c":{"insertions":1,"deletions":1},"src/import/import-raw.c":{"insertions":1,"deletions":1},"src/import/import-tar.c":{"insertions":1,"deletions":1},"src/journal-remote/journal-gatewayd.c":{"insertions":1,"deletions":1},"src/journal-remote/journal-upload.c":{"insertions":2,"deletions":2},"src/journal/journalctl.c":{"insertions":1,"deletions":1},"src/journal/journald-server.c":{"insertions":3,"deletions":3},"src/journal/journald-wall.c":{"insertions":1,"deletions":1},"src/journal/sd-journal.c":{"insertions":3,"deletions":3},"src/libsystemd/sd-bus/bus-kernel.c":{"insertions":1,"deletions":1},"src/libsystemd/sd-bus/busctl-introspect.c":{"insertions":1,"deletions":1},"src/libsystemd/sd-bus/busctl.c":{"insertions":2,"deletions":2},"src/libsystemd/sd-bus/sd-bus.c":{"insertions":3,"deletions":3},"src/libsystemd/sd-bus/test-bus-objects.c":{"insertions":1,"deletions":1},"src/libsystemd/sd-device/device-enumerator.c":{"insertions":1,"deletions":1},"src/libsystemd/sd-path/sd-path.c":{"insertions":4,"deletions":4},"src/locale/keymap-util.c":{"insertions":3,"deletions":3},"src/login/logind-inhibit.c":{"insertions":1,"deletions":1},"src/login/logind-session.c":{"insertions":1,"deletions":1},"src/login/pam_systemd.c":{"insertions":1,"deletions":1},"src/machine/machine.c":{"insertions":1,"deletions":1},"src/mount/mount-tool.c":{"insertions":2,"deletions":2},"src/nspawn/nspawn-mount.c":{"insertions":2,"deletions":2},"src/nspawn/nspawn.c":{"insertions":2,"deletions":2},"src/rc-local-generator/rc-local-generator.c":{"insertions":2,"deletions":2},"src/resolve/resolved-dns-dnssec.c":{"insertions":1,"deletions":1},"src/resolve/resolved-dns-rr.c":{"insertions":7,"deletions":7},"src/resolve/test-dnssec-complex.c":{"insertions":1,"deletions":1},"src/rfkill/rfkill.c":{"insertions":2,"deletions":2},"src/run/run.c":{"insertions":1,"deletions":1},"src/shared/base-filesystem.c":{"insertions":1,"deletions":1},"src/shared/bus-util.c":{"insertions":2,"deletions":2},"src/shared/cgroup-show.c":{"insertions":1,"deletions":1},"src/shared/conf-parser.c":{"insertions":1,"deletions":1},"src/shared/dns-domain.c":{"insertions":2,"deletions":2},"src/shared/dropin.c":{"insertions":5,"deletions":5},"src/shared/fstab-util.c":{"insertions":1,"deletions":1},"src/shared/install-printf.c":{"insertions":1,"deletions":1},"src/shared/install.c":{"insertions":5,"deletions":5},"src/shared/machine-image.c":{"insertions":1,"deletions":1},"src/shared/path-lookup.c":{"insertions":2,"deletions":2},"src/systemctl/systemctl.c":{"insertions":5,"deletions":5},"src/sysv-generator/sysv-generator.c":{"insertions":5,"deletions":5},"src/test/test-copy.c":{"insertions":2,"deletions":2},"src/test/test-date.c":{"insertions":2,"deletions":2},"src/test/test-fileio.c":{"insertions":1,"deletions":1},"src/test/test-namespace.c":{"insertions":4,"deletions":4},"src/test/test-path.c":{"insertions":1,"deletions":1},"src/test/test-replace-var.c":{"insertions":1,"deletions":1},"src/tmpfiles/tmpfiles.c":{"insertions":2,"deletions":2},"src/udev/udev-builtin-hwdb.c":{"insertions":1,"deletions":1},"src/udev/udevadm-hwdb.c":{"insertions":1,"deletions":1}}},"85393d8f31196af01b2aa4e05836fca4b5d30b78":{"author":"tblume","email":"Thomas.Blume@suse.com","date":"2017-07-06 18:30:14 UTC","message":"tests: adapt test-functions to run tests on SUSE (#6270)","insertions":4,"deletions":28,"filepaths":{"test/test-functions":{"insertions":4,"deletions":28}}},"35e528018f315798d3bffcb592b32a0d8f5162bd":{"author":"Zbigniew Jędrzejewski-Szmek","email":"zbyszek@in.waw.pl","date":"2019-08-27 17:00:34 UTC","message":"shared/but-util: drop trusted annotation from bus_open_system_watch_bind_with_description()\n\nhttps://bugzilla.redhat.com/show_bug.cgi?id=1746057\n\nThis only affects systemd-resolved. bus_open_system_watch_bind_with_description()\nis also used in timesyncd, but it has no methods, only read-only properties, and\nin networkd, but it annotates all methods with SD_BUS_VTABLE_UNPRIVILEGED and does\npolkit checks.","insertions":4,"deletions":0,"filepaths":{"src/shared/bus-util.c":{"insertions":4,"deletions":0}}},"d7afd945b5aad5b262a3de97614f486d63d94612":{"author":"Lennart Poettering","email":"lennart@poettering.net","date":"2017-12-19 14:54:30 UTC","message":"networkd,resolved: make use of watch_bind feature to connect to the bus\n\nThe changes both networkd and resolved to make use of the watch_bind\nfeature of sd-bus to connect to the system bus. This way, both daemons\ncan be started during early boot, and automatically and instantly\nconnect to the system bus as it becomes available.\n\nThis replaces prior code that used a time-based retry logic to connect\nto the bus.","insertions":75,"deletions":105,"filepaths":{"src/network/networkd-manager.c":{"insertions":48,"deletions":45},"src/network/networkd-manager.h":{"insertions":0,"deletions":1},"src/resolve/resolved-bus.c":{"insertions":27,"deletions":4},"src/shared/bus-util.c":{"insertions":0,"deletions":51},"src/shared/bus-util.h":{"insertions":0,"deletions":2},"src/systemd/sd-bus.h":{"insertions":0,"deletions":2}}},"b2774a3ae692113e1f47a336a6c09bac9cfb49ad":{"author":"ven","email":"2988994+hexiaowen@users.noreply.github.com","date":"2019-05-22 06:24:28 UTC","message":"bus_open leak sd_event_source when udevadm trigger。\n\nOn my host, when executing the udevadm trigger, I only receive the change event, which causes memleak","insertions":1,"deletions":2,"filepaths":{"src/login/logind-button.c":{"insertions":1,"deletions":2}}},"d5dd44b01c225f20166f2e004e41f72c3ea95b5a":{"author":"Lennart Poettering","email":"lennart@poettering.net","date":"2017-06-26 19:35:12 UTC","message":"logind: make use of EVIOCSMASK input ioctl to mask out events we aren't interested in\n\nThis way logind will get woken up only when an actual event took place,\nand not for every key press on the system.\n\nThe ioctl EVIOCSMASK was added by @dvdhrm already in October 2015, for\nthe use in logind, among others, hence let's actually make use of it\nnow.\n\nWhile we are at it, also fix usage of the EVIOCGSW ioctl, where we\nassumed a byte array, even though a unsigned long native endian array is\nreturned.","insertions":3,"deletions":82,"filepaths":{"src/basic/missing.h":{"insertions":0,"deletions":12},"src/login/logind-button.c":{"insertions":3,"deletions":70}}},"3c27973b13724ede05a06a5d346a569794cda433":{"author":"Lennart Poettering","email":"lennart@poettering.net","date":"2019-03-20 18:00:28 UTC","message":"seccomp: introduce seccomp_restrict_suid_sgid() for blocking chmod() for suid/sgid files","insertions":0,"deletions":133,"filepaths":{"src/shared/seccomp-util.c":{"insertions":0,"deletions":132},"src/shared/seccomp-util.h":{"insertions":0,"deletions":1}}},"469830d1426a91e0897c321fdc8ee428f0a750c1":{"author":"Lennart Poettering","email":"lennart@poettering.net","date":"2016-12-27 14:28:25 UTC","message":"seccomp: rework seccomp code, to improve compat with some archs\n\nThis substantially reworks the seccomp code, to ensure better\ncompatibility with some architectures, including i386.\n\nSo far we relied on libseccomp's internal handling of the multiple\nsyscall ABIs supported on Linux. This is problematic however, as it does\nnot define clear semantics if an ABI is not able to support specific\nseccomp rules we install.\n\nThis rework hence changes a couple of things:\n\n- We no longer use seccomp_rule_add(), but only\n  seccomp_rule_add_exact(), and fail the installation of a filter if the\n  architecture doesn't support it.\n\n- We no longer rely on adding multiple syscall architectures to a single filter,\n  but instead install a separate filter for each syscall architecture\n  supported. This way, we can install a strict filter for x86-64, while\n  permitting a less strict filter for i386.\n\n- All high-level filter additions are now moved from execute.c to\n  seccomp-util.c, so that we can test them i","insertions":559,"deletions":1005,"filepaths":{"src/core/execute.c":{"insertions":344,"deletions":123},"src/core/main.c":{"insertions":31,"deletions":3},"src/nspawn/nspawn-seccomp.c":{"insertions":50,"deletions":63},"src/shared/seccomp-util.c":{"insertions":121,"deletions":531},"src/shared/seccomp-util.h":{"insertions":6,"deletions":19},"src/test/test-execute.c":{"insertions":0,"deletions":1},"src/test/test-seccomp.c":{"insertions":7,"deletions":265}}},"57183d117a1d6a96d71ce99d648beb0d2b36228d":{"author":"Lennart Poettering","email":"lennart@poettering.net","date":"2014-02-12 23:24:00 UTC","message":"core: add SystemCallArchitectures= unit setting to allow disabling of non-native\narchitecture support for system calls\n\nAlso, turn system call filter bus properties into complex types instead\nof concatenated strings.","insertions":18,"deletions":348,"filepaths":{"Makefile.am":{"insertions":0,"deletions":6},"man/systemd.exec.xml":{"insertions":0,"deletions":50},"src/core/dbus-execute.c":{"insertions":14,"deletions":65},"src/core/execute.c":{"insertions":4,"deletions":37},"src/core/execute.h":{"insertions":0,"deletions":1},"src/core/load-fragment-gperf.gperf.m4":{"insertions":0,"deletions":2},"src/core/load-fragment.c":{"insertions":0,"deletions":55},"src/core/load-fragment.h":{"insertions":0,"deletions":1},"src/shared/seccomp-util.c":{"insertions":0,"deletions":63},"src/shared/seccomp-util.h":{"insertions":0,"deletions":26},"src/systemctl/systemctl.c":{"insertions":0,"deletions":42}}},"aecd5ac6218f6291186b530b89cf2e97333fffc0":{"author":"Topi Miettinen","email":"toiwoton@gmail.com","date":"2019-02-08 17:25:00 UTC","message":"core: ProtectHostname= feature\n\nLet services use a private UTS namespace. In addition, a seccomp filter is\ninstalled on set{host,domain}name and a ro bind mounts on\n/proc/sys/kernel/{host,domain}name.","insertions":4,"deletions":93,"filepaths":{"man/systemd.exec.xml":{"insertions":0,"deletions":11},"src/core/dbus-execute.c":{"insertions":0,"deletions":4},"src/core/execute.c":{"insertions":3,"deletions":24},"src/core/execute.h":{"insertions":0,"deletions":1},"src/core/load-fragment-gperf.gperf.m4":{"insertions":0,"deletions":1},"src/core/namespace.c":{"insertions":0,"deletions":12},"src/core/namespace.h":{"insertions":0,"deletions":1},"src/shared/bus-unit-util.c":{"insertions":1,"deletions":1},"src/shared/seccomp-util.c":{"insertions":0,"deletions":37},"src/shared/seccomp-util.h":{"insertions":0,"deletions":1}}},"a8fbdf5424be099ba1b2b1ec261c02b8759d6b0c":{"author":"Thomas Hindoe Paaboel Andersen","email":"phomes@gmail.com","date":"2015-12-03 20:13:37 UTC","message":"shared: include what we use\n\nThe next step of a general cleanup of our includes. This one mostly\nadds missing includes but there are a few removals as well.","insertions":35,"deletions":279,"filepaths":{"src/shared/acpi-fpdt.c":{"insertions":2,"deletions":2},"src/shared/apparmor-util.c":{"insertions":1,"deletions":2},"src/shared/architecture.c":{"insertions":0,"deletions":1},"src/shared/architecture.h":{"insertions":0,"deletions":1},"src/shared/ask-password-api.c":{"insertions":0,"deletions":12},"src/shared/base-filesystem.c":{"insertions":0,"deletions":3},"src/shared/boot-timestamps.c":{"insertions":0,"deletions":2},"src/shared/bus-util.c":{"insertions":1,"deletions":17},"src/shared/bus-util.h":{"insertions":0,"deletions":7},"src/shared/cgroup-show.c":{"insertions":1,"deletions":3},"src/shared/cgroup-show.h":{"insertions":0,"deletions":1},"src/shared/clean-ipc.c":{"insertions":1,"deletions":8},"src/shared/condition.c":{"insertions":0,"deletions":6},"src/shared/conf-parser.c":{"insertions":3,"deletions":5},"src/shared/conf-parser.h":{"insertions":0,"deletions":5},"src/shared/dev-setup.c":{"insertions":0,"deletions":1},"src/shared/dns-domain.c":{"insertions":0,"deletions":9},"src/shared/dns-domain.h":{"insertions":0,"deletions":5},"src/shared/dropin.c":{"insertions":1,"deletions":11},"src/shared/dropin.h":{"insertions":0,"deletions":1},"src/shared/efivars.c":{"insertions":0,"deletions":10},"src/shared/efivars.h":{"insertions":0,"deletions":2},"src/shared/firewall-util.c":{"insertions":2,"deletions":8},"src/shared/firewall-util.h":{"insertions":0,"deletions":3},"src/shared/fstab-util.c":{"insertions":0,"deletions":7},"src/shared/generator.c":{"insertions":1,"deletions":4},"src/shared/import-util.c":{"insertions":0,"deletions":5},"src/shared/install-printf.c":{"insertions":3,"deletions":6},"src/shared/install.c":{"insertions":1,"deletions":9},"src/shared/install.h":{"insertions":0,"deletions":3},"src/shared/logs-show.c":{"insertions":0,"deletions":12},"src/shared/logs-show.h":{"insertions":0,"deletions":4},"src/shared/machine-image.c":{"insertions":2,"deletions":13},"src/shared/machine-image.h":{"insertions":0,"deletions":4},"src/shared/machine-pool.c":{"insertions":2,"deletions":17},"src/shared/machine-pool.h":{"insertions":0,"deletions":2},"src/shared/pager.c":{"insertions":2,"deletions":6},"src/shared/path-lookup.c":{"insertions":0,"deletions":2},"src/shared/path-lookup.h":{"insertions":0,"deletions":1},"src/shared/ptyfwd.c":{"insertions":1,"deletions":13},"src/shared/ptyfwd.h":{"insertions":0,"deletions":2},"src/shared/seccomp-util.c":{"insertions":1,"deletions":3},"src/shared/seccomp-util.h":{"insertions":0,"deletions":1},"src/shared/sleep-config.c":{"insertions":1,"deletions":7},"src/shared/spawn-polkit-agent.c":{"insertions":0,"deletions":2},"src/shared/specifier.c":{"insertions":1,"deletions":6},"src/shared/switch-root.c":{"insertions":1,"deletions":3},"src/shared/switch-root.h":{"insertions":0,"deletions":1},"src/shared/sysctl-util.c":{"insertions":6,"deletions":1},"src/shared/uid-range.c":{"insertions":1,"deletions":5},"src/shared/utmp-wtmp.c":{"insertions":0,"deletions":6},"src/shared/utmp-wtmp.h":{"insertions":0,"deletions":4},"src/shared/watchdog.c":{"insertions":0,"deletions":2},"src/shared/watchdog.h":{"insertions":0,"deletions":3}}},"53e1b683907c2f12330f00feb9630150196f064d":{"author":"Zbigniew Jędrzejewski-Szmek","email":"zbyszek@in.waw.pl","date":"2017-11-18 16:09:20 UTC","message":"Add SPDX license identifiers to source files under the LGPL\n\nThis follows what the kernel is doing, c.f.\nhttps://git.kernel.org/pub/scm/linux/kernel/git/torvalds/linux.git/commit/?id=5fd54ace4721fc5ce2bb5aef6318fcf17f421460.","insertions":2,"deletions":1140,"filepaths":{"src/ac-power/ac-power.c":{"insertions":0,"deletions":1},"src/activate/activate.c":{"insertions":0,"deletions":1},"src/analyze/analyze-verify.c":{"insertions":0,"deletions":1},"src/analyze/analyze-verify.h":{"insertions":0,"deletions":1},"src/analyze/analyze.c":{"insertions":0,"deletions":1},"src/ask-password/ask-password.c":{"insertions":0,"deletions":1},"src/backlight/backlight.c":{"insertions":0,"deletions":1},"src/basic/af-list.c":{"insertions":0,"deletions":1},"src/basic/af-list.h":{"insertions":0,"deletions":1},"src/basic/alloc-util.c":{"insertions":0,"deletions":1},"src/basic/alloc-util.h":{"insertions":0,"deletions":1},"src/basic/architecture.c":{"insertions":0,"deletions":1},"src/basic/architecture.h":{"insertions":0,"deletions":1},"src/basic/arphrd-list.c":{"insertions":0,"deletions":1},"src/basic/arphrd-list.h":{"insertions":0,"deletions":1},"src/basic/async.c":{"insertions":0,"deletions":1},"src/basic/async.h":{"insertions":0,"deletions":1},"src/basic/audit-util.c":{"insertions":0,"deletions":1},"src/basic/audit-util.h":{"insertions":0,"deletions":1},"src/basic/barrier.c":{"insertions":0,"deletions":1},"src/basic/barrier.h":{"insertions":0,"deletions":1},"src/basic/bitmap.c":{"insertions":0,"deletions":1},"src/basic/bitmap.h":{"insertions":0,"deletions":1},"src/basic/blkid-util.h":{"insertions":0,"deletions":1},"src/basic/bpf-program.c":{"insertions":0,"deletions":1},"src/basic/bpf-program.h":{"insertions":0,"deletions":1},"src/basic/btrfs-util.c":{"insertions":0,"deletions":1},"src/basic/btrfs-util.h":{"insertions":0,"deletions":1},"src/basic/build.h":{"insertions":0,"deletions":1},"src/basic/bus-label.c":{"insertions":0,"deletions":1},"src/basic/bus-label.h":{"insertions":0,"deletions":1},"src/basic/calendarspec.c":{"insertions":0,"deletions":1},"src/basic/calendarspec.h":{"insertions":0,"deletions":1},"src/basic/cap-list.c":{"insertions":0,"deletions":1},"src/basic/cap-list.h":{"insertions":0,"deletions":1},"src/basic/capability-util.c":{"insertions":0,"deletions":1},"src/basic/capability-util.h":{"insertions":0,"deletions":1},"src/basic/cgroup-util.c":{"insertions":0,"deletions":1},"src/basic/cgroup-util.h":{"insertions":0,"deletions":1},"src/basic/chattr-util.c":{"insertions":0,"deletions":1},"src/basic/chattr-util.h":{"insertions":0,"deletions":1},"src/basic/clock-util.c":{"insertions":0,"deletions":1},"src/basic/clock-util.h":{"insertions":0,"deletions":1},"src/basic/conf-files.c":{"insertions":0,"deletions":1},"src/basic/conf-files.h":{"insertions":0,"deletions":1},"src/basic/copy.c":{"insertions":0,"deletions":1},"src/basic/copy.h":{"insertions":0,"deletions":1},"src/basic/cpu-set-util.c":{"insertions":0,"deletions":1},"src/basic/cpu-set-util.h":{"insertions":0,"deletions":1},"src/basic/def.h":{"insertions":0,"deletions":1},"src/basic/device-nodes.c":{"insertions":0,"deletions":1},"src/basic/device-nodes.h":{"insertions":0,"deletions":1},"src/basic/dirent-util.c":{"insertions":0,"deletions":1},"src/basic/dirent-util.h":{"insertions":0,"deletions":1},"src/basic/env-util.c":{"insertions":0,"deletions":1},"src/basic/env-util.h":{"insertions":0,"deletions":1},"src/basic/errno-list.c":{"insertions":0,"deletions":1},"src/basic/errno-list.h":{"insertions":0,"deletions":1},"src/basic/escape.c":{"insertions":0,"deletions":1},"src/basic/escape.h":{"insertions":0,"deletions":1},"src/basic/ether-addr-util.c":{"insertions":0,"deletions":1},"src/basic/ether-addr-util.h":{"insertions":0,"deletions":1},"src/basic/exec-util.c":{"insertions":0,"deletions":1},"src/basic/exec-util.h":{"insertions":0,"deletions":1},"src/basic/exit-status.c":{"insertions":0,"deletions":1},"src/basic/exit-status.h":{"insertions":0,"deletions":1},"src/basic/extract-word.c":{"insertions":0,"deletions":1},"src/basic/extract-word.h":{"insertions":0,"deletions":1},"src/basic/fd-util.c":{"insertions":0,"deletions":1},"src/basic/fd-util.h":{"insertions":0,"deletions":1},"src/basic/fileio-label.c":{"insertions":0,"deletions":1},"src/basic/fileio-label.h":{"insertions":0,"deletions":1},"src/basic/fileio.c":{"insertions":0,"deletions":1},"src/basic/fileio.h":{"insertions":0,"deletions":1},"src/basic/format-util.h":{"insertions":0,"deletions":1},"src/basic/fs-util.c":{"insertions":0,"deletions":1},"src/basic/fs-util.h":{"insertions":0,"deletions":1},"src/basic/glob-util.c":{"insertions":0,"deletions":1},"src/basic/glob-util.h":{"insertions":0,"deletions":1},"src/basic/hash-funcs.c":{"insertions":0,"deletions":1},"src/basic/hash-funcs.h":{"insertions":0,"deletions":1},"src/basic/hashmap.c":{"insertions":0,"deletions":1},"src/basic/hashmap.h":{"insertions":0,"deletions":1},"src/basic/hexdecoct.c":{"insertions":0,"deletions":1},"src/basic/hexdecoct.h":{"insertions":0,"deletions":1},"src/basic/hostname-util.c":{"insertions":0,"deletions":1},"src/basic/hostname-util.h":{"insertions":0,"deletions":1},"src/basic/in-addr-util.c":{"insertions":0,"deletions":1},"src/basic/in-addr-util.h":{"insertions":0,"deletions":1},"src/basic/io-util.c":{"insertions":0,"deletions":1},"src/basic/io-util.h":{"insertions":0,"deletions":1},"src/basic/journal-importer.c":{"insertions":0,"deletions":1},"src/basic/journal-importer.h":{"insertions":0,"deletions":1},"src/basic/khash.c":{"insertions":0,"deletions":1},"src/basic/khash.h":{"insertions":0,"deletions":1},"src/basic/label.c":{"insertions":0,"deletions":1},"src/basic/label.h":{"insertions":0,"deletions":1},"src/basic/list.h":{"insertions":0,"deletions":1},"src/basic/locale-util.c":{"insertions":0,"deletions":1},"src/basic/locale-util.h":{"insertions":0,"deletions":1},"src/basic/lockfile-util.c":{"insertions":0,"deletions":1},"src/basic/lockfile-util.h":{"insertions":0,"deletions":1},"src/basic/log.c":{"insertions":0,"deletions":1},"src/basic/log.h":{"insertions":0,"deletions":1},"src/basic/login-util.c":{"insertions":0,"deletions":1},"src/basic/login-util.h":{"insertions":0,"deletions":1},"src/basic/macro.h":{"insertions":0,"deletions":1},"src/basic/memfd-util.c":{"insertions":0,"deletions":1},"src/basic/memfd-util.h":{"insertions":0,"deletions":1},"src/basic/mempool.c":{"insertions":0,"deletions":1},"src/basic/mempool.h":{"insertions":0,"deletions":1},"src/basic/missing.h":{"insertions":0,"deletions":1},"src/basic/missing_syscall.h":{"insertions":0,"deletions":1},"src/basic/mkdir-label.c":{"insertions":0,"deletions":1},"src/basic/mkdir.c":{"insertions":0,"deletions":1},"src/basic/mkdir.h":{"insertions":0,"deletions":1},"src/basic/module-util.h":{"insertions":0,"deletions":1},"src/basic/mount-util.c":{"insertions":0,"deletions":1},"src/basic/mount-util.h":{"insertions":0,"deletions":1},"src/basic/nss-util.h":{"insertions":0,"deletions":1},"src/basic/ordered-set.c":{"insertions":0,"deletions":1},"src/basic/ordered-set.h":{"insertions":0,"deletions":1},"src/basic/parse-util.c":{"insertions":0,"deletions":1},"src/basic/parse-util.h":{"insertions":0,"deletions":1},"src/basic/path-util.c":{"insertions":0,"deletions":1},"src/basic/path-util.h":{"insertions":0,"deletions":1},"src/basic/prioq.c":{"insertions":0,"deletions":1},"src/basic/prioq.h":{"insertions":0,"deletions":1},"src/basic/proc-cmdline.c":{"insertions":0,"deletions":1},"src/basic/proc-cmdline.h":{"insertions":0,"deletions":1},"src/basic/process-util.c":{"insertions":0,"deletions":1},"src/basic/process-util.h":{"insertions":0,"deletions":1},"src/basic/random-util.c":{"insertions":0,"deletions":1},"src/basic/random-util.h":{"insertions":0,"deletions":1},"src/basic/ratelimit.c":{"insertions":0,"deletions":1},"src/basic/ratelimit.h":{"insertions":0,"deletions":1},"src/basic/raw-clone.h":{"insertions":0,"deletions":1},"src/basic/refcnt.h":{"insertions":0,"deletions":1},"src/basic/replace-var.c":{"insertions":0,"deletions":1},"src/basic/replace-var.h":{"insertions":0,"deletions":1},"src/basic/rlimit-util.c":{"insertions":0,"deletions":1},"src/basic/rlimit-util.h":{"insertions":0,"deletions":1},"src/basic/rm-rf.c":{"insertions":0,"deletions":1},"src/basic/rm-rf.h":{"insertions":0,"deletions":1},"src/basic/securebits-util.c":{"insertions":0,"deletions":1},"src/basic/securebits-util.h":{"insertions":0,"deletions":1},"src/basic/selinux-util.c":{"insertions":0,"deletions":1},"src/basic/selinux-util.h":{"insertions":0,"deletions":1},"src/basic/set.c":{"insertions":0,"deletions":1},"src/basic/set.h":{"insertions":0,"deletions":1},"src/basic/sigbus.c":{"insertions":0,"deletions":1},"src/basic/sigbus.h":{"insertions":0,"deletions":1},"src/basic/signal-util.c":{"insertions":0,"deletions":1},"src/basic/signal-util.h":{"insertions":0,"deletions":1},"src/basic/smack-util.c":{"insertions":0,"deletions":1},"src/basic/smack-util.h":{"insertions":0,"deletions":1},"src/basic/socket-label.c":{"insertions":0,"deletions":1},"src/basic/socket-util.c":{"insertions":0,"deletions":1},"src/basic/socket-util.h":{"insertions":0,"deletions":1},"src/basic/special.h":{"insertions":0,"deletions":1},"src/basic/stat-util.c":{"insertions":0,"deletions":1},"src/basic/stat-util.h":{"insertions":0,"deletions":1},"src/basic/stdio-util.h":{"insertions":0,"deletions":1},"src/basic/strbuf.c":{"insertions":0,"deletions":1},"src/basic/strbuf.h":{"insertions":0,"deletions":1},"src/basic/string-table.c":{"insertions":0,"deletions":1},"src/basic/string-table.h":{"insertions":0,"deletions":1},"src/basic/string-util.c":{"insertions":0,"deletions":1},"src/basic/string-util.h":{"insertions":0,"deletions":1},"src/basic/strv.c":{"insertions":0,"deletions":1},"src/basic/strv.h":{"insertions":0,"deletions":1},"src/basic/strxcpyx.c":{"insertions":0,"deletions":1},"src/basic/strxcpyx.h":{"insertions":0,"deletions":1},"src/basic/syslog-util.c":{"insertions":0,"deletions":1},"src/basic/syslog-util.h":{"insertions":0,"deletions":1},"src/basic/terminal-util.c":{"insertions":0,"deletions":1},"src/basic/terminal-util.h":{"insertions":0,"deletions":1},"src/basic/time-util.c":{"insertions":0,"deletions":1},"src/basic/time-util.h":{"insertions":0,"deletions":1},"src/basic/umask-util.h":{"insertions":0,"deletions":1},"src/basic/unaligned.h":{"insertions":0,"deletions":1},"src/basic/unit-def.c":{"insertions":0,"deletions":1},"src/basic/unit-def.h":{"insertions":0,"deletions":1},"src/basic/unit-name.c":{"insertions":0,"deletions":1},"src/basic/unit-name.h":{"insertions":0,"deletions":1},"src/basic/user-util.c":{"insertions":0,"deletions":1},"src/basic/user-util.h":{"insertions":0,"deletions":1},"src/basic/utf8.c":{"insertions":0,"deletions":1},"src/basic/utf8.h":{"insertions":0,"deletions":1},"src/basic/util.c":{"insertions":0,"deletions":1},"src/basic/util.h":{"insertions":0,"deletions":1},"src/basic/verbs.c":{"insertions":0,"deletions":1},"src/basic/verbs.h":{"insertions":0,"deletions":1},"src/basic/virt.c":{"insertions":0,"deletions":1},"src/basic/virt.h":{"insertions":0,"deletions":1},"src/basic/web-util.c":{"insertions":0,"deletions":1},"src/basic/web-util.h":{"insertions":0,"deletions":1},"src/basic/xattr-util.c":{"insertions":0,"deletions":1},"src/basic/xattr-util.h":{"insertions":0,"deletions":1},"src/basic/xml.c":{"insertions":0,"deletions":1},"src/basic/xml.h":{"insertions":0,"deletions":1},"src/binfmt/binfmt.c":{"insertions":0,"deletions":1},"src/boot/bootctl.c":{"insertions":0,"deletions":1},"src/boot/efi/boot.c":{"insertions":0,"deletions":1},"src/boot/efi/console.c":{"insertions":0,"deletions":1},"src/boot/efi/console.h":{"insertions":0,"deletions":1},"src/boot/efi/disk.c":{"insertions":0,"deletions":1},"src/boot/efi/disk.h":{"insertions":0,"deletions":1},"src/boot/efi/graphics.c":{"insertions":0,"deletions":1},"src/boot/efi/graphics.h":{"insertions":0,"deletions":1},"src/boot/efi/linux.c":{"insertions":0,"deletions":1},"src/boot/efi/linux.h":{"insertions":0,"deletions":1},"src/boot/efi/measure.c":{"insertions":0,"deletions":1},"src/boot/efi/measure.h":{"insertions":0,"deletions":1},"src/boot/efi/pe.c":{"insertions":0,"deletions":1},"src/boot/efi/pe.h":{"insertions":0,"deletions":1},"src/boot/efi/shim.c":{"insertions":0,"deletions":1},"src/boot/efi/shim.h":{"insertions":0,"deletions":1},"src/boot/efi/splash.c":{"insertions":0,"deletions":1},"src/boot/efi/splash.h":{"insertions":0,"deletions":1},"src/boot/efi/stub.c":{"insertions":0,"deletions":1},"src/boot/efi/util.c":{"insertions":0,"deletions":1},"src/boot/efi/util.h":{"insertions":0,"deletions":1},"src/busctl/busctl-introspect.c":{"insertions":0,"deletions":1},"src/busctl/busctl-introspect.h":{"insertions":0,"deletions":1},"src/busctl/busctl.c":{"insertions":0,"deletions":1},"src/cgls/cgls.c":{"insertions":0,"deletions":1},"src/cgroups-agent/cgroups-agent.c":{"insertions":0,"deletions":1},"src/cgtop/cgtop.c":{"insertions":0,"deletions":1},"src/core/audit-fd.c":{"insertions":0,"deletions":1},"src/core/audit-fd.h":{"insertions":0,"deletions":1},"src/core/automount.c":{"insertions":0,"deletions":1},"src/core/automount.h":{"insertions":0,"deletions":1},"src/core/bpf-firewall.c":{"insertions":0,"deletions":1},"src/core/bpf-firewall.h":{"insertions":0,"deletions":1},"src/core/cgroup.c":{"insertions":0,"deletions":1},"src/core/cgroup.h":{"insertions":0,"deletions":1},"src/core/chown-recursive.c":{"insertions":0,"deletions":1},"src/core/chown-recursive.h":{"insertions":0,"deletions":1},"src/core/dbus-automount.c":{"insertions":0,"deletions":1},"src/core/dbus-automount.h":{"insertions":0,"deletions":1},"src/core/dbus-cgroup.c":{"insertions":0,"deletions":1},"src/core/dbus-cgroup.h":{"insertions":0,"deletions":1},"src/core/dbus-device.c":{"insertions":0,"deletions":1},"src/core/dbus-device.h":{"insertions":0,"deletions":1},"src/core/dbus-execute.c":{"insertions":0,"deletions":1},"src/core/dbus-execute.h":{"insertions":0,"deletions":1},"src/core/dbus-job.c":{"insertions":0,"deletions":1},"src/core/dbus-job.h":{"insertions":0,"deletions":1},"src/core/dbus-kill.c":{"insertions":0,"deletions":1},"src/core/dbus-kill.h":{"insertions":0,"deletions":1},"src/core/dbus-manager.c":{"insertions":0,"deletions":1},"src/core/dbus-manager.h":{"insertions":0,"deletions":1},"src/core/dbus-mount.c":{"insertions":0,"deletions":1},"src/core/dbus-mount.h":{"insertions":0,"deletions":1},"src/core/dbus-path.c":{"insertions":0,"deletions":1},"src/core/dbus-path.h":{"insertions":0,"deletions":1},"src/core/dbus-scope.c":{"insertions":0,"deletions":1},"src/core/dbus-scope.h":{"insertions":0,"deletions":1},"src/core/dbus-service.c":{"insertions":0,"deletions":1},"src/core/dbus-service.h":{"insertions":0,"deletions":1},"src/core/dbus-slice.c":{"insertions":0,"deletions":1},"src/core/dbus-slice.h":{"insertions":0,"deletions":1},"src/core/dbus-socket.c":{"insertions":0,"deletions":1},"src/core/dbus-socket.h":{"insertions":0,"deletions":1},"src/core/dbus-swap.c":{"insertions":0,"deletions":1},"src/core/dbus-swap.h":{"insertions":0,"deletions":1},"src/core/dbus-target.c":{"insertions":0,"deletions":1},"src/core/dbus-target.h":{"insertions":0,"deletions":1},"src/core/dbus-timer.c":{"insertions":0,"deletions":1},"src/core/dbus-timer.h":{"insertions":0,"deletions":1},"src/core/dbus-unit.c":{"insertions":0,"deletions":1},"src/core/dbus-unit.h":{"insertions":0,"deletions":1},"src/core/dbus.c":{"insertions":0,"deletions":1},"src/core/dbus.h":{"insertions":0,"deletions":1},"src/core/device.c":{"insertions":0,"deletions":1},"src/core/device.h":{"insertions":0,"deletions":1},"src/core/dynamic-user.c":{"insertions":0,"deletions":1},"src/core/dynamic-user.h":{"insertions":0,"deletions":1},"src/core/emergency-action.c":{"insertions":0,"deletions":1},"src/core/emergency-action.h":{"insertions":0,"deletions":1},"src/core/execute.c":{"insertions":0,"deletions":1},"src/core/execute.h":{"insertions":0,"deletions":1},"src/core/hostname-setup.c":{"insertions":0,"deletions":1},"src/core/hostname-setup.h":{"insertions":0,"deletions":1},"src/core/ima-setup.c":{"insertions":0,"deletions":1},"src/core/ima-setup.h":{"insertions":0,"deletions":1},"src/core/ip-address-access.c":{"insertions":0,"deletions":1},"src/core/ip-address-access.h":{"insertions":0,"deletions":1},"src/core/job.c":{"insertions":0,"deletions":1},"src/core/job.h":{"insertions":0,"deletions":1},"src/core/kill.c":{"insertions":0,"deletions":1},"src/core/kill.h":{"insertions":0,"deletions":1},"src/core/killall.c":{"insertions":0,"deletions":1},"src/core/killall.h":{"insertions":0,"deletions":1},"src/core/kmod-setup.c":{"insertions":0,"deletions":1},"src/core/kmod-setup.h":{"insertions":0,"deletions":1},"src/core/load-dropin.c":{"insertions":0,"deletions":1},"src/core/load-dropin.h":{"insertions":0,"deletions":1},"src/core/load-fragment.c":{"insertions":0,"deletions":1},"src/core/load-fragment.h":{"insertions":0,"deletions":1},"src/core/locale-setup.c":{"insertions":0,"deletions":1},"src/core/locale-setup.h":{"insertions":0,"deletions":1},"src/core/loopback-setup.c":{"insertions":0,"deletions":1},"src/core/loopback-setup.h":{"insertions":0,"deletions":1},"src/core/machine-id-setup.c":{"insertions":0,"deletions":1},"src/core/machine-id-setup.h":{"insertions":0,"deletions":1},"src/core/main.c":{"insertions":0,"deletions":1},"src/core/manager.c":{"insertions":0,"deletions":1},"src/core/manager.h":{"insertions":0,"deletions":1},"src/core/mount-setup.c":{"insertions":0,"deletions":1},"src/core/mount-setup.h":{"insertions":0,"deletions":1},"src/core/mount.c":{"insertions":0,"deletions":1},"src/core/mount.h":{"insertions":0,"deletions":1},"src/core/namespace.c":{"insertions":0,"deletions":1},"src/core/namespace.h":{"insertions":0,"deletions":1},"src/core/path.c":{"insertions":0,"deletions":1},"src/core/path.h":{"insertions":0,"deletions":1},"src/core/scope.c":{"insertions":0,"deletions":1},"src/core/scope.h":{"insertions":0,"deletions":1},"src/core/selinux-access.c":{"insertions":0,"deletions":1},"src/core/selinux-access.h":{"insertions":0,"deletions":1},"src/core/selinux-setup.c":{"insertions":0,"deletions":1},"src/core/selinux-setup.h":{"insertions":0,"deletions":1},"src/core/service.c":{"insertions":0,"deletions":1},"src/core/service.h":{"insertions":0,"deletions":1},"src/core/show-status.c":{"insertions":0,"deletions":1},"src/core/show-status.h":{"insertions":0,"deletions":1},"src/core/shutdown.c":{"insertions":0,"deletions":1},"src/core/slice.c":{"insertions":0,"deletions":1},"src/core/slice.h":{"insertions":0,"deletions":1},"src/core/smack-setup.c":{"insertions":0,"deletions":1},"src/core/smack-setup.h":{"insertions":0,"deletions":1},"src/core/socket.c":{"insertions":0,"deletions":1},"src/core/socket.h":{"insertions":0,"deletions":1},"src/core/swap.c":{"insertions":0,"deletions":1},"src/core/swap.h":{"insertions":0,"deletions":1},"src/core/target.c":{"insertions":0,"deletions":1},"src/core/target.h":{"insertions":0,"deletions":1},"src/core/timer.c":{"insertions":0,"deletions":1},"src/core/timer.h":{"insertions":0,"deletions":1},"src/core/transaction.c":{"insertions":0,"deletions":1},"src/core/transaction.h":{"insertions":0,"deletions":1},"src/core/umount.c":{"insertions":0,"deletions":1},"src/core/umount.h":{"insertions":0,"deletions":1},"src/core/unit-printf.c":{"insertions":0,"deletions":1},"src/core/unit-printf.h":{"insertions":0,"deletions":1},"src/core/unit.c":{"insertions":0,"deletions":1},"src/core/unit.h":{"insertions":0,"deletions":1},"src/coredump/coredump-vacuum.c":{"insertions":0,"deletions":1},"src/coredump/coredump-vacuum.h":{"insertions":0,"deletions":1},"src/coredump/coredump.c":{"insertions":0,"deletions":1},"src/coredump/coredumpctl.c":{"insertions":0,"deletions":1},"src/coredump/stacktrace.c":{"insertions":0,"deletions":1},"src/coredump/stacktrace.h":{"insertions":0,"deletions":1},"src/coredump/test-coredump-vacuum.c":{"insertions":0,"deletions":1},"src/cryptsetup/cryptsetup-generator.c":{"insertions":0,"deletions":1},"src/cryptsetup/cryptsetup.c":{"insertions":0,"deletions":1},"src/debug-generator/debug-generator.c":{"insertions":0,"deletions":1},"src/delta/delta.c":{"insertions":0,"deletions":1},"src/detect-virt/detect-virt.c":{"insertions":0,"deletions":1},"src/dissect/dissect.c":{"insertions":0,"deletions":1},"src/environment-d-generator/environment-d-generator.c":{"insertions":0,"deletions":1},"src/escape/escape.c":{"insertions":0,"deletions":1},"src/firstboot/firstboot.c":{"insertions":0,"deletions":1},"src/fsck/fsck.c":{"insertions":0,"deletions":1},"src/fstab-generator/fstab-generator.c":{"insertions":0,"deletions":1},"src/getty-generator/getty-generator.c":{"insertions":0,"deletions":1},"src/gpt-auto-generator/gpt-auto-generator.c":{"insertions":0,"deletions":1},"src/hibernate-resume/hibernate-resume-generator.c":{"insertions":0,"deletions":1},"src/hibernate-resume/hibernate-resume.c":{"insertions":0,"deletions":1},"src/hostname/hostnamectl.c":{"insertions":0,"deletions":1},"src/hostname/hostnamed.c":{"insertions":0,"deletions":1},"src/hwdb/hwdb.c":{"insertions":0,"deletions":1},"src/import/curl-util.c":{"insertions":0,"deletions":1},"src/import/curl-util.h":{"insertions":0,"deletions":1},"src/import/export-raw.c":{"insertions":0,"deletions":1},"src/import/export-raw.h":{"insertions":0,"deletions":1},"src/import/export-tar.c":{"insertions":0,"deletions":1},"src/import/export-tar.h":{"insertions":0,"deletions":1},"src/import/export.c":{"insertions":0,"deletions":1},"src/import/import-common.c":{"insertions":0,"deletions":1},"src/import/import-common.h":{"insertions":0,"deletions":1},"src/import/import-compress.c":{"insertions":0,"deletions":1},"src/import/import-compress.h":{"insertions":0,"deletions":1},"src/import/import-raw.c":{"insertions":0,"deletions":1},"src/import/import-raw.h":{"insertions":0,"deletions":1},"src/import/import-tar.c":{"insertions":0,"deletions":1},"src/import/import-tar.h":{"insertions":0,"deletions":1},"src/import/import.c":{"insertions":0,"deletions":1},"src/import/importd.c":{"insertions":0,"deletions":1},"src/import/pull-common.c":{"insertions":0,"deletions":1},"src/import/pull-common.h":{"insertions":0,"deletions":1},"src/import/pull-job.c":{"insertions":0,"deletions":1},"src/import/pull-job.h":{"insertions":0,"deletions":1},"src/import/pull-raw.c":{"insertions":0,"deletions":1},"src/import/pull-raw.h":{"insertions":0,"deletions":1},"src/import/pull-tar.c":{"insertions":0,"deletions":1},"src/import/pull-tar.h":{"insertions":0,"deletions":1},"src/import/pull.c":{"insertions":0,"deletions":1},"src/import/qcow2-util.c":{"insertions":0,"deletions":1},"src/import/qcow2-util.h":{"insertions":0,"deletions":1},"src/import/test-qcow2.c":{"insertions":0,"deletions":1},"src/initctl/initctl.c":{"insertions":0,"deletions":1},"src/journal-remote/journal-gatewayd.c":{"insertions":0,"deletions":1},"src/journal-remote/journal-remote-parse.c":{"insertions":0,"deletions":1},"src/journal-remote/journal-remote-parse.h":{"insertions":0,"deletions":1},"src/journal-remote/journal-remote-write.c":{"insertions":0,"deletions":1},"src/journal-remote/journal-remote-write.h":{"insertions":0,"deletions":1},"src/journal-remote/journal-remote.c":{"insertions":0,"deletions":1},"src/journal-remote/journal-remote.h":{"insertions":0,"deletions":1},"src/journal-remote/journal-upload-journal.c":{"insertions":0,"deletions":1},"src/journal-remote/journal-upload.c":{"insertions":0,"deletions":1},"src/journal-remote/microhttpd-util.c":{"insertions":0,"deletions":1},"src/journal-remote/microhttpd-util.h":{"insertions":0,"deletions":1},"src/journal/audit-type.c":{"insertions":0,"deletions":1},"src/journal/audit-type.h":{"insertions":0,"deletions":1},"src/journal/cat.c":{"insertions":0,"deletions":1},"src/journal/catalog.c":{"insertions":0,"deletions":1},"src/journal/catalog.h":{"insertions":0,"deletions":1},"src/journal/compress.c":{"insertions":0,"deletions":1},"src/journal/compress.h":{"insertions":0,"deletions":1},"src/journal/journal-authenticate.c":{"insertions":0,"deletions":1},"src/journal/journal-authenticate.h":{"insertions":0,"deletions":1},"src/journal/journal-def.h":{"insertions":0,"deletions":1},"src/journal/journal-file.c":{"insertions":0,"deletions":1},"src/journal/journal-file.h":{"insertions":0,"deletions":1},"src/journal/journal-internal.h":{"insertions":0,"deletions":1},"src/journal/journal-qrcode.c":{"insertions":0,"deletions":1},"src/journal/journal-qrcode.h":{"insertions":0,"deletions":1},"src/journal/journal-send.c":{"insertions":0,"deletions":1},"src/journal/journal-vacuum.c":{"insertions":0,"deletions":1},"src/journal/journal-vacuum.h":{"insertions":0,"deletions":1},"src/journal/journal-verify.c":{"insertions":0,"deletions":1},"src/journal/journal-verify.h":{"insertions":0,"deletions":1},"src/journal/journalctl.c":{"insertions":0,"deletions":1},"src/journal/journald-audit.c":{"insertions":0,"deletions":1},"src/journal/journald-audit.h":{"insertions":0,"deletions":1},"src/journal/journald-console.c":{"insertions":0,"deletions":1},"src/journal/journald-console.h":{"insertions":0,"deletions":1},"src/journal/journald-context.c":{"insertions":0,"deletions":1},"src/journal/journald-context.h":{"insertions":0,"deletions":1},"src/journal/journald-kmsg.c":{"insertions":0,"deletions":1},"src/journal/journald-kmsg.h":{"insertions":0,"deletions":1},"src/journal/journald-native.c":{"insertions":0,"deletions":1},"src/journal/journald-native.h":{"insertions":0,"deletions":1},"src/journal/journald-rate-limit.c":{"insertions":0,"deletions":1},"src/journal/journald-rate-limit.h":{"insertions":0,"deletions":1},"src/journal/journald-server.c":{"insertions":0,"deletions":1},"src/journal/journald-server.h":{"insertions":0,"deletions":1},"src/journal/journald-stream.c":{"insertions":0,"deletions":1},"src/journal/journald-stream.h":{"insertions":0,"deletions":1},"src/journal/journald-syslog.c":{"insertions":0,"deletions":1},"src/journal/journald-syslog.h":{"insertions":0,"deletions":1},"src/journal/journald-wall.c":{"insertions":0,"deletions":1},"src/journal/journald-wall.h":{"insertions":0,"deletions":1},"src/journal/journald.c":{"insertions":0,"deletions":1},"src/journal/mmap-cache.c":{"insertions":0,"deletions":1},"src/journal/mmap-cache.h":{"insertions":0,"deletions":1},"src/journal/sd-journal.c":{"insertions":0,"deletions":1},"src/journal/test-audit-type.c":{"insertions":0,"deletions":1},"src/journal/test-catalog.c":{"insertions":0,"deletions":1},"src/journal/test-compress-benchmark.c":{"insertions":0,"deletions":1},"src/journal/test-compress.c":{"insertions":0,"deletions":1},"src/journal/test-journal-enum.c":{"insertions":0,"deletions":1},"src/journal/test-journal-flush.c":{"insertions":0,"deletions":1},"src/journal/test-journal-init.c":{"insertions":0,"deletions":1},"src/journal/test-journal-interleaving.c":{"insertions":0,"deletions":1},"src/journal/test-journal-match.c":{"insertions":0,"deletions":1},"src/journal/test-journal-send.c":{"insertions":0,"deletions":1},"src/journal/test-journal-stream.c":{"insertions":0,"deletions":1},"src/journal/test-journal-syslog.c":{"insertions":0,"deletions":1},"src/journal/test-journal-verify.c":{"insertions":0,"deletions":1},"src/journal/test-journal.c":{"insertions":0,"deletions":1},"src/journal/test-mmap-cache.c":{"insertions":0,"deletions":1},"src/libsystemd-network/arp-util.c":{"insertions":0,"deletions":1},"src/libsystemd-network/arp-util.h":{"insertions":0,"deletions":1},"src/libsystemd-network/dhcp-identifier.c":{"insertions":0,"deletions":1},"src/libsystemd-network/dhcp-identifier.h":{"insertions":0,"deletions":1},"src/libsystemd-network/dhcp-internal.h":{"insertions":0,"deletions":1},"src/libsystemd-network/dhcp-lease-internal.h":{"insertions":0,"deletions":1},"src/libsystemd-network/dhcp-network.c":{"insertions":0,"deletions":1},"src/libsystemd-network/dhcp-option.c":{"insertions":0,"deletions":1},"src/libsystemd-network/dhcp-packet.c":{"insertions":0,"deletions":1},"src/libsystemd-network/dhcp-protocol.h":{"insertions":0,"deletions":1},"src/libsystemd-network/dhcp-server-internal.h":{"insertions":0,"deletions":1},"src/libsystemd-network/dhcp6-internal.h":{"insertions":0,"deletions":1},"src/libsystemd-network/dhcp6-lease-internal.h":{"insertions":0,"deletions":1},"src/libsystemd-network/dhcp6-network.c":{"insertions":0,"deletions":1},"src/libsystemd-network/dhcp6-option.c":{"insertions":0,"deletions":1},"src/libsystemd-network/dhcp6-protocol.h":{"insertions":0,"deletions":1},"src/libsystemd-network/icmp6-util.c":{"insertions":0,"deletions":1},"src/libsystemd-network/icmp6-util.h":{"insertions":0,"deletions":1},"src/libsystemd-network/lldp-internal.h":{"insertions":0,"deletions":1},"src/libsystemd-network/lldp-neighbor.c":{"insertions":0,"deletions":1},"src/libsystemd-network/lldp-neighbor.h":{"insertions":0,"deletions":1},"src/libsystemd-network/lldp-network.c":{"insertions":0,"deletions":1},"src/libsystemd-network/lldp-network.h":{"insertions":0,"deletions":1},"src/libsystemd-network/ndisc-internal.h":{"insertions":0,"deletions":1},"src/libsystemd-network/ndisc-router.c":{"insertions":0,"deletions":1},"src/libsystemd-network/ndisc-router.h":{"insertions":0,"deletions":1},"src/libsystemd-network/network-internal.c":{"insertions":0,"deletions":1},"src/libsystemd-network/network-internal.h":{"insertions":0,"deletions":1},"src/libsystemd-network/radv-internal.h":{"insertions":0,"deletions":1},"src/libsystemd-network/sd-dhcp-client.c":{"insertions":0,"deletions":1},"src/libsystemd-network/sd-dhcp-lease.c":{"insertions":0,"deletions":1},"src/libsystemd-network/sd-dhcp-server.c":{"insertions":0,"deletions":1},"src/libsystemd-network/sd-dhcp6-client.c":{"insertions":0,"deletions":1},"src/libsystemd-network/sd-dhcp6-lease.c":{"insertions":0,"deletions":1},"src/libsystemd-network/sd-ipv4acd.c":{"insertions":0,"deletions":1},"src/libsystemd-network/sd-ipv4ll.c":{"insertions":0,"deletions":1},"src/libsystemd-network/sd-lldp.c":{"insertions":0,"deletions":1},"src/libsystemd-network/sd-ndisc.c":{"insertions":0,"deletions":1},"src/libsystemd-network/sd-radv.c":{"insertions":0,"deletions":1},"src/libsystemd-network/test-acd.c":{"insertions":0,"deletions":1},"src/libsystemd-network/test-dhcp-client.c":{"insertions":0,"deletions":1},"src/libsystemd-network/test-dhcp-server.c":{"insertions":0,"deletions":1},"src/libsystemd-network/test-dhcp6-client.c":{"insertions":0,"deletions":1},"src/libsystemd-network/test-ipv4ll-manual.c":{"insertions":0,"deletions":1},"src/libsystemd-network/test-ipv4ll.c":{"insertions":0,"deletions":1},"src/libsystemd-network/test-lldp.c":{"insertions":0,"deletions":1},"src/libsystemd-network/test-ndisc-ra.c":{"insertions":0,"deletions":1},"src/libsystemd-network/test-ndisc-rs.c":{"insertions":0,"deletions":1},"src/libsystemd/sd-bus/bus-bloom.c":{"insertions":0,"deletions":1},"src/libsystemd/sd-bus/bus-bloom.h":{"insertions":0,"deletions":1},"src/libsystemd/sd-bus/bus-common-errors.c":{"insertions":0,"deletions":1},"src/libsystemd/sd-bus/bus-common-errors.h":{"insertions":0,"deletions":1},"src/libsystemd/sd-bus/bus-container.c":{"insertions":0,"deletions":1},"src/libsystemd/sd-bus/bus-container.h":{"insertions":0,"deletions":1},"src/libsystemd/sd-bus/bus-control.c":{"insertions":0,"deletions":1},"src/libsystemd/sd-bus/bus-control.h":{"insertions":0,"deletions":1},"src/libsystemd/sd-bus/bus-convenience.c":{"insertions":0,"deletions":1},"src/libsystemd/sd-bus/bus-creds.c":{"insertions":0,"deletions":1},"src/libsystemd/sd-bus/bus-creds.h":{"insertions":0,"deletions":1},"src/libsystemd/sd-bus/bus-dump.c":{"insertions":0,"deletions":1},"src/libsystemd/sd-bus/bus-dump.h":{"insertions":0,"deletions":1},"src/libsystemd/sd-bus/bus-error.c":{"insertions":0,"deletions":1},"src/libsystemd/sd-bus/bus-error.h":{"insertions":0,"deletions":1},"src/libsystemd/sd-bus/bus-gvariant.c":{"insertions":0,"deletions":1},"src/libsystemd/sd-bus/bus-gvariant.h":{"insertions":0,"deletions":1},"src/libsystemd/sd-bus/bus-internal.c":{"insertions":0,"deletions":1},"src/libsystemd/sd-bus/bus-internal.h":{"insertions":0,"deletions":1},"src/libsystemd/sd-bus/bus-introspect.c":{"insertions":0,"deletions":1},"src/libsystemd/sd-bus/bus-introspect.h":{"insertions":0,"deletions":1},"src/libsystemd/sd-bus/bus-kernel.c":{"insertions":0,"deletions":1},"src/libsystemd/sd-bus/bus-kernel.h":{"insertions":0,"deletions":1},"src/libsystemd/sd-bus/bus-match.c":{"insertions":0,"deletions":1},"src/libsystemd/sd-bus/bus-match.h":{"insertions":0,"deletions":1},"src/libsystemd/sd-bus/bus-message.c":{"insertions":0,"deletions":1},"src/libsystemd/sd-bus/bus-message.h":{"insertions":0,"deletions":1},"src/libsystemd/sd-bus/bus-objects.c":{"insertions":0,"deletions":1},"src/libsystemd/sd-bus/bus-objects.h":{"insertions":0,"deletions":1},"src/libsystemd/sd-bus/bus-protocol.h":{"insertions":0,"deletions":1},"src/libsystemd/sd-bus/bus-signature.c":{"insertions":0,"deletions":1},"src/libsystemd/sd-bus/bus-signature.h":{"insertions":0,"deletions":1},"src/libsystemd/sd-bus/bus-slot.c":{"insertions":0,"deletions":1},"src/libsystemd/sd-bus/bus-slot.h":{"insertions":0,"deletions":1},"src/libsystemd/sd-bus/bus-socket.c":{"insertions":0,"deletions":1},"src/libsystemd/sd-bus/bus-socket.h":{"insertions":0,"deletions":1},"src/libsystemd/sd-bus/bus-track.c":{"insertions":0,"deletions":1},"src/libsystemd/sd-bus/bus-track.h":{"insertions":0,"deletions":1},"src/libsystemd/sd-bus/bus-type.c":{"insertions":0,"deletions":1},"src/libsystemd/sd-bus/bus-type.h":{"insertions":0,"deletions":1},"src/libsystemd/sd-bus/sd-bus.c":{"insertions":0,"deletions":1},"src/libsystemd/sd-bus/test-bus-benchmark.c":{"insertions":0,"deletions":1},"src/libsystemd/sd-bus/test-bus-chat.c":{"insertions":0,"deletions":1},"src/libsystemd/sd-bus/test-bus-cleanup.c":{"insertions":0,"deletions":1},"src/libsystemd/sd-bus/test-bus-creds.c":{"insertions":0,"deletions":1},"src/libsystemd/sd-bus/test-bus-error.c":{"insertions":0,"deletions":1},"src/libsystemd/sd-bus/test-bus-gvariant.c":{"insertions":0,"deletions":1},"src/libsystemd/sd-bus/test-bus-introspect.c":{"insertions":0,"deletions":1},"src/libsystemd/sd-bus/test-bus-marshal.c":{"insertions":0,"deletions":1},"src/libsystemd/sd-bus/test-bus-match.c":{"insertions":0,"deletions":1},"src/libsystemd/sd-bus/test-bus-objects.c":{"insertions":0,"deletions":1},"src/libsystemd/sd-bus/test-bus-server.c":{"insertions":0,"deletions":1},"src/libsystemd/sd-bus/test-bus-signature.c":{"insertions":0,"deletions":1},"src/libsystemd/sd-bus/test-bus-track.c":{"insertions":0,"deletions":1},"src/libsystemd/sd-daemon/sd-daemon.c":{"insertions":0,"deletions":1},"src/libsystemd/sd-device/device-enumerator-private.h":{"insertions":0,"deletions":1},"src/libsystemd/sd-device/device-enumerator.c":{"insertions":0,"deletions":1},"src/libsystemd/sd-device/device-internal.h":{"insertions":0,"deletions":1},"src/libsystemd/sd-device/device-private.c":{"insertions":0,"deletions":1},"src/libsystemd/sd-device/device-private.h":{"insertions":0,"deletions":1},"src/libsystemd/sd-device/device-util.h":{"insertions":0,"deletions":1},"src/libsystemd/sd-device/sd-device.c":{"insertions":0,"deletions":1},"src/libsystemd/sd-event/sd-event.c":{"insertions":0,"deletions":1},"src/libsystemd/sd-event/test-event.c":{"insertions":0,"deletions":1},"src/libsystemd/sd-hwdb/hwdb-internal.h":{"insertions":0,"deletions":1},"src/libsystemd/sd-hwdb/hwdb-util.h":{"insertions":0,"deletions":1},"src/libsystemd/sd-hwdb/sd-hwdb.c":{"insertions":0,"deletions":1},"src/libsystemd/sd-id128/id128-util.c":{"insertions":0,"deletions":1},"src/libsystemd/sd-id128/id128-util.h":{"insertions":0,"deletions":1},"src/libsystemd/sd-id128/sd-id128.c":{"insertions":0,"deletions":1},"src/libsystemd/sd-login/sd-login.c":{"insertions":0,"deletions":1},"src/libsystemd/sd-login/test-login.c":{"insertions":0,"deletions":1},"src/libsystemd/sd-netlink/local-addresses.c":{"insertions":0,"deletions":1},"src/libsystemd/sd-netlink/local-addresses.h":{"insertions":0,"deletions":1},"src/libsystemd/sd-netlink/netlink-internal.h":{"insertions":0,"deletions":1},"src/libsystemd/sd-netlink/netlink-message.c":{"insertions":0,"deletions":1},"src/libsystemd/sd-netlink/netlink-socket.c":{"insertions":0,"deletions":1},"src/libsystemd/sd-netlink/netlink-types.c":{"insertions":0,"deletions":1},"src/libsystemd/sd-netlink/netlink-types.h":{"insertions":0,"deletions":1},"src/libsystemd/sd-netlink/netlink-util.c":{"insertions":0,"deletions":1},"src/libsystemd/sd-netlink/netlink-util.h":{"insertions":0,"deletions":1},"src/libsystemd/sd-netlink/rtnl-message.c":{"insertions":0,"deletions":1},"src/libsystemd/sd-netlink/sd-netlink.c":{"insertions":0,"deletions":1},"src/libsystemd/sd-netlink/test-local-addresses.c":{"insertions":0,"deletions":1},"src/libsystemd/sd-netlink/test-netlink.c":{"insertions":0,"deletions":1},"src/libsystemd/sd-network/network-util.c":{"insertions":0,"deletions":1},"src/libsystemd/sd-network/network-util.h":{"insertions":0,"deletions":1},"src/libsystemd/sd-network/sd-network.c":{"insertions":0,"deletions":1},"src/libsystemd/sd-path/sd-path.c":{"insertions":0,"deletions":1},"src/libsystemd/sd-resolve/sd-resolve.c":{"insertions":0,"deletions":1},"src/libsystemd/sd-resolve/test-resolve.c":{"insertions":0,"deletions":1},"src/libsystemd/sd-utf8/sd-utf8.c":{"insertions":0,"deletions":1},"src/libudev/libudev-device-internal.h":{"insertions":0,"deletions":1},"src/libudev/libudev-device-private.c":{"insertions":0,"deletions":1},"src/libudev/libudev-device.c":{"insertions":0,"deletions":1},"src/libudev/libudev-enumerate.c":{"insertions":0,"deletions":1},"src/libudev/libudev-hwdb.c":{"insertions":0,"deletions":1},"src/libudev/libudev-list.c":{"insertions":0,"deletions":1},"src/libudev/libudev-monitor.c":{"insertions":0,"deletions":1},"src/libudev/libudev-private.h":{"insertions":0,"deletions":1},"src/libudev/libudev-queue.c":{"insertions":0,"deletions":1},"src/libudev/libudev-util.c":{"insertions":0,"deletions":1},"src/libudev/libudev.c":{"insertions":0,"deletions":1},"src/libudev/libudev.h":{"insertions":0,"deletions":1},"src/locale/keymap-util.c":{"insertions":0,"deletions":1},"src/locale/keymap-util.h":{"insertions":0,"deletions":1},"src/locale/localectl.c":{"insertions":0,"deletions":1},"src/locale/localed.c":{"insertions":0,"deletions":1},"src/locale/test-keymap-util.c":{"insertions":0,"deletions":1},"src/login/inhibit.c":{"insertions":0,"deletions":1},"src/login/loginctl.c":{"insertions":0,"deletions":1},"src/login/logind-acl.c":{"insertions":0,"deletions":1},"src/login/logind-acl.h":{"insertions":0,"deletions":1},"src/login/logind-action.c":{"insertions":0,"deletions":1},"src/login/logind-action.h":{"insertions":0,"deletions":1},"src/login/logind-button.c":{"insertions":0,"deletions":1},"src/login/logind-button.h":{"insertions":0,"deletions":1},"src/login/logind-core.c":{"insertions":0,"deletions":1},"src/login/logind-dbus.c":{"insertions":0,"deletions":1},"src/login/logind-device.c":{"insertions":0,"deletions":1},"src/login/logind-device.h":{"insertions":0,"deletions":1},"src/login/logind-inhibit.c":{"insertions":0,"deletions":1},"src/login/logind-inhibit.h":{"insertions":0,"deletions":1},"src/login/logind-seat-dbus.c":{"insertions":0,"deletions":1},"src/login/logind-seat.c":{"insertions":0,"deletions":1},"src/login/logind-seat.h":{"insertions":0,"deletions":1},"src/login/logind-session-dbus.c":{"insertions":0,"deletions":1},"src/login/logind-session-device.c":{"insertions":0,"deletions":1},"src/login/logind-session-device.h":{"insertions":0,"deletions":1},"src/login/logind-session.c":{"insertions":0,"deletions":1},"src/login/logind-session.h":{"insertions":0,"deletions":1},"src/login/logind-user-dbus.c":{"insertions":0,"deletions":1},"src/login/logind-user.c":{"insertions":0,"deletions":1},"src/login/logind-user.h":{"insertions":0,"deletions":1},"src/login/logind-utmp.c":{"insertions":0,"deletions":1},"src/login/logind.c":{"insertions":0,"deletions":1},"src/login/logind.h":{"insertions":0,"deletions":1},"src/login/pam_systemd.c":{"insertions":0,"deletions":1},"src/login/sysfs-show.c":{"insertions":0,"deletions":1},"src/login/sysfs-show.h":{"insertions":0,"deletions":1},"src/login/test-inhibit.c":{"insertions":0,"deletions":1},"src/login/test-login-shared.c":{"insertions":0,"deletions":1},"src/login/test-login-tables.c":{"insertions":0,"deletions":1},"src/machine-id-setup/machine-id-setup-main.c":{"insertions":0,"deletions":1},"src/machine/image-dbus.c":{"insertions":0,"deletions":1},"src/machine/image-dbus.h":{"insertions":0,"deletions":1},"src/machine/machine-dbus.c":{"insertions":0,"deletions":1},"src/machine/machine-dbus.h":{"insertions":0,"deletions":1},"src/machine/machine.c":{"insertions":0,"deletions":1},"src/machine/machine.h":{"insertions":0,"deletions":1},"src/machine/machinectl.c":{"insertions":0,"deletions":1},"src/machine/machined-dbus.c":{"insertions":0,"deletions":1},"src/machine/machined.c":{"insertions":0,"deletions":1},"src/machine/machined.h":{"insertions":0,"deletions":1},"src/machine/operation.c":{"insertions":0,"deletions":1},"src/machine/operation.h":{"insertions":0,"deletions":1},"src/machine/test-machine-tables.c":{"insertions":0,"deletions":1},"src/modules-load/modules-load.c":{"insertions":0,"deletions":1},"src/mount/mount-tool.c":{"insertions":0,"deletions":1},"src/network/netdev/bond.c":{"insertions":0,"deletions":1},"src/network/netdev/bond.h":{"insertions":0,"deletions":1},"src/network/netdev/bridge.c":{"insertions":0,"deletions":1},"src/network/netdev/bridge.h":{"insertions":0,"deletions":1},"src/network/netdev/dummy.c":{"insertions":0,"deletions":1},"src/network/netdev/dummy.h":{"insertions":0,"deletions":1},"src/network/netdev/geneve.c":{"insertions":0,"deletions":1},"src/network/netdev/geneve.h":{"insertions":0,"deletions":1},"src/network/netdev/ipvlan.c":{"insertions":0,"deletions":1},"src/network/netdev/ipvlan.h":{"insertions":0,"deletions":1},"src/network/netdev/macvlan.c":{"insertions":0,"deletions":1},"src/network/netdev/macvlan.h":{"insertions":0,"deletions":1},"src/network/netdev/netdev.c":{"insertions":0,"deletions":1},"src/network/netdev/netdev.h":{"insertions":0,"deletions":1},"src/network/netdev/tunnel.c":{"insertions":0,"deletions":1},"src/network/netdev/tunnel.h":{"insertions":0,"deletions":1},"src/network/netdev/tuntap.c":{"insertions":0,"deletions":1},"src/network/netdev/tuntap.h":{"insertions":0,"deletions":1},"src/network/netdev/vcan.c":{"insertions":0,"deletions":1},"src/network/netdev/vcan.h":{"insertions":0,"deletions":1},"src/network/netdev/veth.c":{"insertions":0,"deletions":1},"src/network/netdev/veth.h":{"insertions":0,"deletions":1},"src/network/netdev/vlan.c":{"insertions":0,"deletions":1},"src/network/netdev/vlan.h":{"insertions":0,"deletions":1},"src/network/netdev/vrf.c":{"insertions":0,"deletions":1},"src/network/netdev/vrf.h":{"insertions":0,"deletions":1},"src/network/netdev/vxlan.c":{"insertions":0,"deletions":1},"src/network/netdev/vxlan.h":{"insertions":0,"deletions":1},"src/network/networkctl.c":{"insertions":0,"deletions":1},"src/network/networkd-address-label.c":{"insertions":0,"deletions":1},"src/network/networkd-address-label.h":{"insertions":0,"deletions":1},"src/network/networkd-address-pool.c":{"insertions":0,"deletions":1},"src/network/networkd-address-pool.h":{"insertions":0,"deletions":1},"src/network/networkd-address.c":{"insertions":0,"deletions":1},"src/network/networkd-address.h":{"insertions":0,"deletions":1},"src/network/networkd-brvlan.c":{"insertions":0,"deletions":1},"src/network/networkd-brvlan.h":{"insertions":0,"deletions":1},"src/network/networkd-conf.c":{"insertions":0,"deletions":1},"src/network/networkd-conf.h":{"insertions":0,"deletions":1},"src/network/networkd-dhcp4.c":{"insertions":0,"deletions":1},"src/network/networkd-dhcp6.c":{"insertions":0,"deletions":1},"src/network/networkd-fdb.c":{"insertions":0,"deletions":1},"src/network/networkd-fdb.h":{"insertions":0,"deletions":1},"src/network/networkd-ipv4ll.c":{"insertions":0,"deletions":1},"src/network/networkd-ipv6-proxy-ndp.c":{"insertions":0,"deletions":1},"src/network/networkd-ipv6-proxy-ndp.h":{"insertions":0,"deletions":1},"src/network/networkd-link-bus.c":{"insertions":0,"deletions":1},"src/network/networkd-link.c":{"insertions":0,"deletions":1},"src/network/networkd-link.h":{"insertions":0,"deletions":1},"src/network/networkd-lldp-tx.c":{"insertions":0,"deletions":1},"src/network/networkd-lldp-tx.h":{"insertions":0,"deletions":1},"src/network/networkd-manager-bus.c":{"insertions":0,"deletions":1},"src/network/networkd-manager.c":{"insertions":0,"deletions":1},"src/network/networkd-manager.h":{"insertions":0,"deletions":1},"src/network/networkd-ndisc.c":{"insertions":0,"deletions":1},"src/network/networkd-ndisc.h":{"insertions":0,"deletions":1},"src/network/networkd-network-bus.c":{"insertions":0,"deletions":1},"src/network/networkd-network.c":{"insertions":0,"deletions":1},"src/network/networkd-network.h":{"insertions":0,"deletions":1},"src/network/networkd-radv.c":{"insertions":0,"deletions":1},"src/network/networkd-radv.h":{"insertions":0,"deletions":1},"src/network/networkd-route.c":{"insertions":0,"deletions":1},"src/network/networkd-route.h":{"insertions":0,"deletions":1},"src/network/networkd-routing-policy-rule.c":{"insertions":0,"deletions":1},"src/network/networkd-routing-policy-rule.h":{"insertions":0,"deletions":1},"src/network/networkd-util.c":{"insertions":0,"deletions":1},"src/network/networkd-util.h":{"insertions":0,"deletions":1},"src/network/networkd.c":{"insertions":0,"deletions":1},"src/network/test-network.c":{"insertions":0,"deletions":1},"src/network/test-networkd-conf.c":{"insertions":0,"deletions":1},"src/network/wait-online/link.c":{"insertions":0,"deletions":1},"src/network/wait-online/link.h":{"insertions":0,"deletions":1},"src/network/wait-online/manager.c":{"insertions":0,"deletions":1},"src/network/wait-online/manager.h":{"insertions":0,"deletions":1},"src/network/wait-online/wait-online.c":{"insertions":0,"deletions":1},"src/notify/notify.c":{"insertions":0,"deletions":1},"src/nspawn/nspawn-cgroup.c":{"insertions":0,"deletions":1},"src/nspawn/nspawn-cgroup.h":{"insertions":0,"deletions":1},"src/nspawn/nspawn-expose-ports.c":{"insertions":0,"deletions":1},"src/nspawn/nspawn-expose-ports.h":{"insertions":0,"deletions":1},"src/nspawn/nspawn-mount.c":{"insertions":0,"deletions":1},"src/nspawn/nspawn-mount.h":{"insertions":0,"deletions":1},"src/nspawn/nspawn-network.c":{"insertions":0,"deletions":1},"src/nspawn/nspawn-network.h":{"insertions":0,"deletions":1},"src/nspawn/nspawn-patch-uid.c":{"insertions":0,"deletions":1},"src/nspawn/nspawn-patch-uid.h":{"insertions":2,"deletions":3},"src/nspawn/nspawn-register.c":{"insertions":0,"deletions":1},"src/nspawn/nspawn-register.h":{"insertions":0,"deletions":1},"src/nspawn/nspawn-seccomp.c":{"insertions":0,"deletions":1},"src/nspawn/nspawn-seccomp.h":{"insertions":0,"deletions":1},"src/nspawn/nspawn-settings.c":{"insertions":0,"deletions":1},"src/nspawn/nspawn-settings.h":{"insertions":0,"deletions":1},"src/nspawn/nspawn-setuid.c":{"insertions":0,"deletions":1},"src/nspawn/nspawn-setuid.h":{"insertions":0,"deletions":1},"src/nspawn/nspawn-stub-pid1.c":{"insertions":0,"deletions":1},"src/nspawn/nspawn-stub-pid1.h":{"insertions":0,"deletions":1},"src/nspawn/nspawn.c":{"insertions":0,"deletions":1},"src/nspawn/test-patch-uid.c":{"insertions":0,"deletions":1},"src/nss-myhostname/nss-myhostname.c":{"insertions":0,"deletions":1},"src/nss-mymachines/nss-mymachines.c":{"insertions":0,"deletions":1},"src/nss-resolve/nss-resolve.c":{"insertions":0,"deletions":1},"src/nss-systemd/nss-systemd.c":{"insertions":0,"deletions":1},"src/path/path.c":{"insertions":0,"deletions":1},"src/quotacheck/quotacheck.c":{"insertions":0,"deletions":1},"src/random-seed/random-seed.c":{"insertions":0,"deletions":1},"src/rc-local-generator/rc-local-generator.c":{"insertions":0,"deletions":1},"src/remount-fs/remount-fs.c":{"insertions":0,"deletions":1},"src/reply-password/reply-password.c":{"insertions":0,"deletions":1},"src/resolve/dns-type.c":{"insertions":0,"deletions":1},"src/resolve/dns-type.h":{"insertions":0,"deletions":1},"src/resolve/resolve-tool.c":{"insertions":0,"deletions":1},"src/resolve/resolved-bus.c":{"insertions":0,"deletions":1},"src/resolve/resolved-bus.h":{"insertions":0,"deletions":1},"src/resolve/resolved-conf.c":{"insertions":0,"deletions":1},"src/resolve/resolved-conf.h":{"insertions":0,"deletions":1},"src/resolve/resolved-def.h":{"insertions":0,"deletions":1},"src/resolve/resolved-dns-answer.c":{"insertions":0,"deletions":1},"src/resolve/resolved-dns-answer.h":{"insertions":0,"deletions":1},"src/resolve/resolved-dns-cache.c":{"insertions":0,"deletions":1},"src/resolve/resolved-dns-cache.h":{"insertions":0,"deletions":1},"src/resolve/resolved-dns-dnssec.c":{"insertions":0,"deletions":1},"src/resolve/resolved-dns-dnssec.h":{"insertions":0,"deletions":1},"src/resolve/resolved-dns-packet.c":{"insertions":0,"deletions":1},"src/resolve/resolved-dns-packet.h":{"insertions":0,"deletions":1},"src/resolve/resolved-dns-query.c":{"insertions":0,"deletions":1},"src/resolve/resolved-dns-query.h":{"insertions":0,"deletions":1},"src/resolve/resolved-dns-question.c":{"insertions":0,"deletions":1},"src/resolve/resolved-dns-question.h":{"insertions":0,"deletions":1},"src/resolve/resolved-dns-rr.c":{"insertions":0,"deletions":1},"src/resolve/resolved-dns-rr.h":{"insertions":0,"deletions":1},"src/resolve/resolved-dns-scope.c":{"insertions":0,"deletions":1},"src/resolve/resolved-dns-scope.h":{"insertions":0,"deletions":1},"src/resolve/resolved-dns-search-domain.c":{"insertions":0,"deletions":1},"src/resolve/resolved-dns-search-domain.h":{"insertions":0,"deletions":1},"src/resolve/resolved-dns-server.c":{"insertions":0,"deletions":1},"src/resolve/resolved-dns-server.h":{"insertions":0,"deletions":1},"src/resolve/resolved-dns-stream.c":{"insertions":0,"deletions":1},"src/resolve/resolved-dns-stream.h":{"insertions":0,"deletions":1},"src/resolve/resolved-dns-stub.c":{"insertions":0,"deletions":1},"src/resolve/resolved-dns-stub.h":{"insertions":0,"deletions":1},"src/resolve/resolved-dns-synthesize.c":{"insertions":0,"deletions":1},"src/resolve/resolved-dns-synthesize.h":{"insertions":0,"deletions":1},"src/resolve/resolved-dns-transaction.c":{"insertions":0,"deletions":1},"src/resolve/resolved-dns-transaction.h":{"insertions":0,"deletions":1},"src/resolve/resolved-dns-trust-anchor.c":{"insertions":0,"deletions":1},"src/resolve/resolved-dns-trust-anchor.h":{"insertions":0,"deletions":1},"src/resolve/resolved-dns-zone.c":{"insertions":0,"deletions":1},"src/resolve/resolved-dns-zone.h":{"insertions":0,"deletions":1},"src/resolve/resolved-etc-hosts.c":{"insertions":0,"deletions":1},"src/resolve/resolved-etc-hosts.h":{"insertions":0,"deletions":1},"src/resolve/resolved-link-bus.c":{"insertions":0,"deletions":1},"src/resolve/resolved-link-bus.h":{"insertions":0,"deletions":1},"src/resolve/resolved-link.c":{"insertions":0,"deletions":1},"src/resolve/resolved-link.h":{"insertions":0,"deletions":1},"src/resolve/resolved-llmnr.c":{"insertions":0,"deletions":1},"src/resolve/resolved-llmnr.h":{"insertions":0,"deletions":1},"src/resolve/resolved-manager.c":{"insertions":0,"deletions":1},"src/resolve/resolved-manager.h":{"insertions":0,"deletions":1},"src/resolve/resolved-mdns.c":{"insertions":0,"deletions":1},"src/resolve/resolved-mdns.h":{"insertions":0,"deletions":1},"src/resolve/resolved-resolv-conf.c":{"insertions":0,"deletions":1},"src/resolve/resolved-resolv-conf.h":{"insertions":0,"deletions":1},"src/resolve/resolved.c":{"insertions":0,"deletions":1},"src/resolve/test-dns-packet.c":{"insertions":0,"deletions":1},"src/resolve/test-dnssec-complex.c":{"insertions":0,"deletions":1},"src/resolve/test-dnssec.c":{"insertions":0,"deletions":1},"src/resolve/test-resolve-tables.c":{"insertions":0,"deletions":1},"src/resolve/test-resolved-packet.c":{"insertions":0,"deletions":1},"src/rfkill/rfkill.c":{"insertions":0,"deletions":1},"src/run/run.c":{"insertions":0,"deletions":1},"src/shared/acl-util.c":{"insertions":0,"deletions":1},"src/shared/acl-util.h":{"insertions":0,"deletions":1},"src/shared/acpi-fpdt.c":{"insertions":0,"deletions":1},"src/shared/acpi-fpdt.h":{"insertions":0,"deletions":1},"src/shared/apparmor-util.c":{"insertions":0,"deletions":1},"src/shared/apparmor-util.h":{"insertions":0,"deletions":1},"src/shared/ask-password-api.c":{"insertions":0,"deletions":1},"src/shared/ask-password-api.h":{"insertions":0,"deletions":1},"src/shared/base-filesystem.c":{"insertions":0,"deletions":1},"src/shared/base-filesystem.h":{"insertions":0,"deletions":1},"src/shared/boot-timestamps.c":{"insertions":0,"deletions":1},"src/shared/boot-timestamps.h":{"insertions":0,"deletions":1},"src/shared/bus-unit-util.c":{"insertions":0,"deletions":1},"src/shared/bus-unit-util.h":{"insertions":0,"deletions":1},"src/shared/bus-util.c":{"insertions":0,"deletions":1},"src/shared/bus-util.h":{"insertions":0,"deletions":1},"src/shared/cgroup-show.c":{"insertions":0,"deletions":1},"src/shared/cgroup-show.h":{"insertions":0,"deletions":1},"src/shared/clean-ipc.c":{"insertions":0,"deletions":1},"src/shared/clean-ipc.h":{"insertions":0,"deletions":1},"src/shared/condition.c":{"insertions":0,"deletions":1},"src/shared/condition.h":{"insertions":0,"deletions":1},"src/shared/conf-parser.c":{"insertions":0,"deletions":1},"src/shared/conf-parser.h":{"insertions":0,"deletions":1},"src/shared/dev-setup.c":{"insertions":0,"deletions":1},"src/shared/dev-setup.h":{"insertions":0,"deletions":1},"src/shared/dissect-image.c":{"insertions":0,"deletions":1},"src/shared/dissect-image.h":{"insertions":0,"deletions":1},"src/shared/dns-domain.c":{"insertions":0,"deletions":1},"src/shared/dns-domain.h":{"insertions":0,"deletions":1},"src/shared/dropin.c":{"insertions":0,"deletions":1},"src/shared/dropin.h":{"insertions":0,"deletions":1},"src/shared/efivars.c":{"insertions":0,"deletions":1},"src/shared/efivars.h":{"insertions":0,"deletions":1},"src/shared/fdset.c":{"insertions":0,"deletions":1},"src/shared/fdset.h":{"insertions":0,"deletions":1},"src/shared/firewall-util.c":{"insertions":0,"deletions":1},"src/shared/firewall-util.h":{"insertions":0,"deletions":1},"src/shared/fstab-util.c":{"insertions":0,"deletions":1},"src/shared/fstab-util.h":{"insertions":0,"deletions":1},"src/shared/gcrypt-util.c":{"insertions":0,"deletions":1},"src/shared/gcrypt-util.h":{"insertions":0,"deletions":1},"src/shared/generator.c":{"insertions":0,"deletions":1},"src/shared/generator.h":{"insertions":0,"deletions":1},"src/shared/gpt.h":{"insertions":0,"deletions":1},"src/shared/ima-util.c":{"insertions":0,"deletions":1},"src/shared/ima-util.h":{"insertions":0,"deletions":1},"src/shared/import-util.c":{"insertions":0,"deletions":1},"src/shared/import-util.h":{"insertions":0,"deletions":1},"src/shared/install-printf.c":{"insertions":0,"deletions":1},"src/shared/install-printf.h":{"insertions":0,"deletions":1},"src/shared/install.c":{"insertions":0,"deletions":1},"src/shared/install.h":{"insertions":0,"deletions":1},"src/shared/journal-util.c":{"insertions":0,"deletions":1},"src/shared/journal-util.h":{"insertions":0,"deletions":1},"src/shared/logs-show.c":{"insertions":0,"deletions":1},"src/shared/logs-show.h":{"insertions":0,"deletions":1},"src/shared/loop-util.c":{"insertions":0,"deletions":1},"src/shared/loop-util.h":{"insertions":0,"deletions":1},"src/shared/machine-image.c":{"insertions":0,"deletions":1},"src/shared/machine-image.h":{"insertions":0,"deletions":1},"src/shared/machine-pool.c":{"insertions":0,"deletions":1},"src/shared/machine-pool.h":{"insertions":0,"deletions":1},"src/shared/nsflags.c":{"insertions":0,"deletions":1},"src/shared/nsflags.h":{"insertions":0,"deletions":1},"src/shared/output-mode.c":{"insertions":0,"deletions":1},"src/shared/output-mode.h":{"insertions":0,"deletions":1},"src/shared/pager.c":{"insertions":0,"deletions":1},"src/shared/pager.h":{"insertions":0,"deletions":1},"src/shared/path-lookup.c":{"insertions":0,"deletions":1},"src/shared/path-lookup.h":{"insertions":0,"deletions":1},"src/shared/ptyfwd.c":{"insertions":0,"deletions":1},"src/shared/ptyfwd.h":{"insertions":0,"deletions":1},"src/shared/resolve-util.c":{"insertions":0,"deletions":1},"src/shared/resolve-util.h":{"insertions":0,"deletions":1},"src/shared/seccomp-util.c":{"insertions":0,"deletions":1},"src/shared/seccomp-util.h":{"insertions":0,"deletions":1},"src/shared/sleep-config.c":{"insertions":0,"deletions":1},"src/shared/sleep-config.h":{"insertions":0,"deletions":1},"src/shared/spawn-ask-password-agent.c":{"insertions":0,"deletions":1},"src/shared/spawn-ask-password-agent.h":{"insertions":0,"deletions":1},"src/shared/spawn-polkit-agent.c":{"insertions":0,"deletions":1},"src/shared/spawn-polkit-agent.h":{"insertions":0,"deletions":1},"src/shared/specifier.c":{"insertions":0,"deletions":1},"src/shared/specifier.h":{"insertions":0,"deletions":1},"src/shared/switch-root.c":{"insertions":0,"deletions":1},"src/shared/switch-root.h":{"insertions":0,"deletions":1},"src/shared/sysctl-util.c":{"insertions":0,"deletions":1},"src/shared/sysctl-util.h":{"insertions":0,"deletions":1},"src/shared/test-tables.h":{"insertions":0,"deletions":1},"src/shared/tests.c":{"insertions":0,"deletions":1},"src/shared/tests.h":{"insertions":0,"deletions":1},"src/shared/tomoyo-util.c":{"insertions":0,"deletions":1},"src/shared/tomoyo-util.h":{"insertions":0,"deletions":1},"src/shared/udev-util.c":{"insertions":0,"deletions":1},"src/shared/udev-util.h":{"insertions":0,"deletions":1},"src/shared/uid-range.c":{"insertions":0,"deletions":1},"src/shared/uid-range.h":{"insertions":0,"deletions":1},"src/shared/utmp-wtmp.c":{"insertions":0,"deletions":1},"src/shared/utmp-wtmp.h":{"insertions":0,"deletions":1},"src/shared/vlan-util.c":{"insertions":0,"deletions":1},"src/shared/vlan-util.h":{"insertions":0,"deletions":1},"src/shared/volatile-util.c":{"insertions":0,"deletions":1},"src/shared/volatile-util.h":{"insertions":0,"deletions":1},"src/shared/watchdog.c":{"insertions":0,"deletions":1},"src/shared/watchdog.h":{"insertions":0,"deletions":1},"src/sleep/sleep.c":{"insertions":0,"deletions":1},"src/socket-proxy/socket-proxyd.c":{"insertions":0,"deletions":1},"src/stdio-bridge/stdio-bridge.c":{"insertions":0,"deletions":1},"src/sulogin-shell/sulogin-shell.c":{"insertions":0,"deletions":1},"src/sysctl/sysctl.c":{"insertions":0,"deletions":1},"src/system-update-generator/system-update-generator.c":{"insertions":0,"deletions":1},"src/systemctl/systemctl.c":{"insertions":0,"deletions":1},"src/systemd/_sd-common.h":{"insertions":0,"deletions":1},"src/systemd/sd-bus-protocol.h":{"insertions":0,"deletions":1},"src/systemd/sd-bus-vtable.h":{"insertions":0,"deletions":1},"src/systemd/sd-bus.h":{"insertions":0,"deletions":1},"src/systemd/sd-daemon.h":{"insertions":0,"deletions":1},"src/systemd/sd-device.h":{"insertions":0,"deletions":1},"src/systemd/sd-dhcp-client.h":{"insertions":0,"deletions":1},"src/systemd/sd-dhcp-lease.h":{"insertions":0,"deletions":1},"src/systemd/sd-dhcp-server.h":{"insertions":0,"deletions":1},"src/systemd/sd-dhcp6-client.h":{"insertions":0,"deletions":1},"src/systemd/sd-dhcp6-lease.h":{"insertions":0,"deletions":1},"src/systemd/sd-event.h":{"insertions":0,"deletions":1},"src/systemd/sd-hwdb.h":{"insertions":0,"deletions":1},"src/systemd/sd-id128.h":{"insertions":0,"deletions":1},"src/systemd/sd-ipv4acd.h":{"insertions":0,"deletions":1},"src/systemd/sd-ipv4ll.h":{"insertions":0,"deletions":1},"src/systemd/sd-journal.h":{"insertions":0,"deletions":1},"src/systemd/sd-lldp.h":{"insertions":0,"deletions":1},"src/systemd/sd-login.h":{"insertions":0,"deletions":1},"src/systemd/sd-messages.h":{"insertions":0,"deletions":1},"src/systemd/sd-ndisc.h":{"insertions":0,"deletions":1},"src/systemd/sd-netlink.h":{"insertions":0,"deletions":1},"src/systemd/sd-network.h":{"insertions":0,"deletions":1},"src/systemd/sd-path.h":{"insertions":0,"deletions":1},"src/systemd/sd-radv.h":{"insertions":0,"deletions":1},"src/systemd/sd-resolve.h":{"insertions":0,"deletions":1},"src/systemd/sd-utf8.h":{"insertions":0,"deletions":1},"src/sysusers/sysusers.c":{"insertions":0,"deletions":1},"src/sysv-generator/sysv-generator.c":{"insertions":0,"deletions":1},"src/test/test-acl-util.c":{"insertions":0,"deletions":1},"src/test/test-af-list.c":{"insertions":0,"deletions":1},"src/test/test-alloc-util.c":{"insertions":0,"deletions":1},"src/test/test-architecture.c":{"insertions":0,"deletions":1},"src/test/test-arphrd-list.c":{"insertions":0,"deletions":1},"src/test/test-ask-password-api.c":{"insertions":0,"deletions":1},"src/test/test-async.c":{"insertions":0,"deletions":1},"src/test/test-barrier.c":{"insertions":0,"deletions":1},"src/test/test-bitmap.c":{"insertions":0,"deletions":1},"src/test/test-boot-timestamps.c":{"insertions":0,"deletions":1},"src/test/test-bpf.c":{"insertions":0,"deletions":1},"src/test/test-btrfs.c":{"insertions":0,"deletions":1},"src/test/test-calendarspec.c":{"insertions":0,"deletions":1},"src/test/test-cap-list.c":{"insertions":0,"deletions":1},"src/test/test-capability.c":{"insertions":0,"deletions":1},"src/test/test-cgroup-mask.c":{"insertions":0,"deletions":1},"src/test/test-cgroup-util.c":{"insertions":0,"deletions":1},"src/test/test-cgroup.c":{"insertions":0,"deletions":1},"src/test/test-clock.c":{"insertions":0,"deletions":1},"src/test/test-condition.c":{"insertions":0,"deletions":1},"src/test/test-conf-files.c":{"insertions":0,"deletions":1},"src/test/test-conf-parser.c":{"insertions":0,"deletions":1},"src/test/test-copy.c":{"insertions":0,"deletions":1},"src/test/test-cpu-set-util.c":{"insertions":0,"deletions":1},"src/test/test-daemon.c":{"insertions":0,"deletions":1},"src/test/test-date.c":{"insertions":0,"deletions":1},"src/test/test-device-nodes.c":{"insertions":0,"deletions":1},"src/test/test-dissect-image.c":{"insertions":0,"deletions":1},"src/test/test-dlopen.c":{"insertions":0,"deletions":1},"src/test/test-dns-domain.c":{"insertions":0,"deletions":1},"src/test/test-ellipsize.c":{"insertions":0,"deletions":1},"src/test/test-engine.c":{"insertions":0,"deletions":1},"src/test/test-env-util.c":{"insertions":0,"deletions":1},"src/test/test-escape.c":{"insertions":0,"deletions":1},"src/test/test-exec-util.c":{"insertions":0,"deletions":1},"src/test/test-execute.c":{"insertions":0,"deletions":1},"src/test/test-extract-word.c":{"insertions":0,"deletions":1},"src/test/test-fd-util.c":{"insertions":0,"deletions":1},"src/test/test-fdset.c":{"insertions":0,"deletions":1},"src/test/test-fileio.c":{"insertions":0,"deletions":1},"src/test/test-firewall-util.c":{"insertions":0,"deletions":1},"src/test/test-fs-util.c":{"insertions":0,"deletions":1},"src/test/test-fstab-util.c":{"insertions":0,"deletions":1},"src/test/test-glob-util.c":{"insertions":0,"deletions":1},"src/test/test-hash.c":{"insertions":0,"deletions":1},"src/test/test-hashmap-plain.c":{"insertions":0,"deletions":1},"src/test/test-hashmap.c":{"insertions":0,"deletions":1},"src/test/test-helper.c":{"insertions":0,"deletions":1},"src/test/test-helper.h":{"insertions":0,"deletions":1},"src/test/test-hexdecoct.c":{"insertions":0,"deletions":1},"src/test/test-hostname-util.c":{"insertions":0,"deletions":1},"src/test/test-hostname.c":{"insertions":0,"deletions":1},"src/test/test-id128.c":{"insertions":0,"deletions":1},"src/test/test-in-addr-util.c":{"insertions":0,"deletions":1},"src/test/test-install-root.c":{"insertions":0,"deletions":1},"src/test/test-install.c":{"insertions":0,"deletions":1},"src/test/test-io-util.c":{"insertions":0,"deletions":1},"src/test/test-ipcrm.c":{"insertions":0,"deletions":1},"src/test/test-job-type.c":{"insertions":0,"deletions":1},"src/test/test-journal-importer.c":{"insertions":0,"deletions":1},"src/test/test-libudev.c":{"insertions":0,"deletions":1},"src/test/test-list.c":{"insertions":0,"deletions":1},"src/test/test-locale-util.c":{"insertions":0,"deletions":1},"src/test/test-log.c":{"insertions":0,"deletions":1},"src/test/test-loopback.c":{"insertions":0,"deletions":1},"src/test/test-mount-util.c":{"insertions":0,"deletions":1},"src/test/test-namespace.c":{"insertions":0,"deletions":1},"src/test/test-netlink-manual.c":{"insertions":0,"deletions":1},"src/test/test-ns.c":{"insertions":0,"deletions":1},"src/test/test-nss.c":{"insertions":0,"deletions":1},"src/test/test-parse-util.c":{"insertions":0,"deletions":1},"src/test/test-path-lookup.c":{"insertions":0,"deletions":1},"src/test/test-path-util.c":{"insertions":0,"deletions":1},"src/test/test-path.c":{"insertions":0,"deletions":1},"src/test/test-prioq.c":{"insertions":0,"deletions":1},"src/test/test-proc-cmdline.c":{"insertions":0,"deletions":1},"src/test/test-process-util.c":{"insertions":0,"deletions":1},"src/test/test-random-util.c":{"insertions":0,"deletions":1},"src/test/test-ratelimit.c":{"insertions":0,"deletions":1},"src/test/test-replace-var.c":{"insertions":0,"deletions":1},"src/test/test-rlimit-util.c":{"insertions":0,"deletions":1},"src/test/test-sched-prio.c":{"insertions":0,"deletions":1},"src/test/test-seccomp.c":{"insertions":0,"deletions":1},"src/test/test-selinux.c":{"insertions":0,"deletions":1},"src/test/test-set.c":{"insertions":0,"deletions":1},"src/test/test-sigbus.c":{"insertions":0,"deletions":1},"src/test/test-signal-util.c":{"insertions":0,"deletions":1},"src/test/test-siphash24.c":{"insertions":0,"deletions":1},"src/test/test-sizeof.c":{"insertions":0,"deletions":1},"src/test/test-sleep.c":{"insertions":0,"deletions":1},"src/test/test-socket-util.c":{"insertions":0,"deletions":1},"src/test/test-stat-util.c":{"insertions":0,"deletions":1},"src/test/test-strbuf.c":{"insertions":0,"deletions":1},"src/test/test-string-util.c":{"insertions":0,"deletions":1},"src/test/test-strip-tab-ansi.c":{"insertions":0,"deletions":1},"src/test/test-strv.c":{"insertions":0,"deletions":1},"src/test/test-strxcpyx.c":{"insertions":0,"deletions":1},"src/test/test-tables.c":{"insertions":0,"deletions":1},"src/test/test-terminal-util.c":{"insertions":0,"deletions":1},"src/test/test-time-util.c":{"insertions":0,"deletions":1},"src/test/test-tmpfiles.c":{"insertions":0,"deletions":1},"src/test/test-udev.c":{"insertions":0,"deletions":1},"src/test/test-uid-range.c":{"insertions":0,"deletions":1},"src/test/test-unaligned.c":{"insertions":0,"deletions":1},"src/test/test-unit-file.c":{"insertions":0,"deletions":1},"src/test/test-unit-name.c":{"insertions":0,"deletions":1},"src/test/test-user-util.c":{"insertions":0,"deletions":1},"src/test/test-utf8.c":{"insertions":0,"deletions":1},"src/test/test-util.c":{"insertions":0,"deletions":1},"src/test/test-verbs.c":{"insertions":0,"deletions":1},"src/test/test-watchdog.c":{"insertions":0,"deletions":1},"src/test/test-web-util.c":{"insertions":0,"deletions":1},"src/test/test-xattr-util.c":{"insertions":0,"deletions":1},"src/test/test-xml.c":{"insertions":0,"deletions":1},"src/timedate/timedatectl.c":{"insertions":0,"deletions":1},"src/timedate/timedated.c":{"insertions":0,"deletions":1},"src/timesync/test-timesync.c":{"insertions":0,"deletions":1},"src/timesync/timesyncd-conf.c":{"insertions":0,"deletions":1},"src/timesync/timesyncd-conf.h":{"insertions":0,"deletions":1},"src/timesync/timesyncd-manager.c":{"insertions":0,"deletions":1},"src/timesync/timesyncd-manager.h":{"insertions":0,"deletions":1},"src/timesync/timesyncd-server.c":{"insertions":0,"deletions":1},"src/timesync/timesyncd-server.h":{"insertions":0,"deletions":1},"src/timesync/timesyncd.c":{"insertions":0,"deletions":1},"src/tmpfiles/tmpfiles.c":{"insertions":0,"deletions":1},"src/tty-ask-password-agent/tty-ask-password-agent.c":{"insertions":0,"deletions":1},"src/udev/net/ethtool-util.c":{"insertions":0,"deletions":1},"src/udev/net/ethtool-util.h":{"insertions":0,"deletions":1},"src/udev/net/link-config.c":{"insertions":0,"deletions":1},"src/udev/net/link-config.h":{"insertions":0,"deletions":1},"src/udev/udev-builtin-btrfs.c":{"insertions":0,"deletions":1},"src/udev/udev-builtin-hwdb.c":{"insertions":0,"deletions":1},"src/udev/udev-builtin-keyboard.c":{"insertions":0,"deletions":1},"src/udev/udev-builtin-net_id.c":{"insertions":0,"deletions":1},"src/udev/udev-builtin-net_setup_link.c":{"insertions":0,"deletions":1},"src/udev/udev-builtin.c":{"insertions":0,"deletions":1},"src/udev/udevadm-hwdb.c":{"insertions":0,"deletions":1},"src/update-done/update-done.c":{"insertions":0,"deletions":1},"src/update-utmp/update-utmp.c":{"insertions":0,"deletions":1},"src/user-sessions/user-sessions.c":{"insertions":0,"deletions":1},"src/vconsole/vconsole-setup.c":{"insertions":0,"deletions":1},"src/veritysetup/veritysetup-generator.c":{"insertions":0,"deletions":1},"src/veritysetup/veritysetup.c":{"insertions":0,"deletions":1},"src/volatile-root/volatile-root.c":{"insertions":0,"deletions":1}}},"d347d9029c7ec6b30eaaab93649105d935061b55":{"author":"Felipe Sateler","email":"fsateler@debian.org","date":"2016-08-31 13:00:35 UTC","message":"seccomp: also detect if seccomp filtering is enabled\n\nIn https://github.com/systemd/systemd/pull/4004 , a runtime detection\nmethod for seccomp was added. However, it does not detect the case\nwhere CONFIG_SECCOMP=y but CONFIG_SECCOMP_FILTER=n. This is possible\nif the architecture does not support filtering yet.\nAdd a check for that case too.\n\nWhile at it, change get_proc_field usage to use PR_GET_SECCOMP prctl,\nas that should save a few system calls and (unnecessary) allocations.\nPreviously, reading of /proc/self/stat was done as recommended by\nprctl(2) as safer. However, given that we need to do the prctl call\nanyway, lets skip opening, reading and parsing the file.\n\nCode for checking inspired by\nhttps://outflux.net/teach-seccomp/autodetect.html","insertions":5,"deletions":16,"filepaths":{"src/core/execute.c":{"insertions":1,"deletions":1},"src/shared/seccomp-util.c":{"insertions":4,"deletions":15}}},"add005357d535681c7075ced8eec2b6e61b43728":{"author":"Lennart Poettering","email":"lennart@poettering.net","date":"2016-11-02 02:25:19 UTC","message":"core: add new RestrictNamespaces= unit file setting\n\nThis new setting permits restricting whether namespaces may be created and\nmanaged by processes started by a unit. It installs a seccomp filter blocking\ncertain invocations of unshare(), clone() and setns().\n\nRestrictNamespaces=no is the default, and does not restrict namespaces in any\nway. RestrictNamespaces=yes takes away the ability to create or manage any kind\nof namspace. \"RestrictNamespaces=mnt ipc\" restricts the creation of namespaces\nso that only mount and IPC namespaces may be created/managed, but no other\nkind of namespaces.\n\nThis setting should be improve security quite a bit as in particular user\nnamespacing was a major source of CVEs in the kernel in the past, and is\naccessible to unprivileged processes. With this setting the entire attack\nsurface may be removed for system services that do not make use of namespaces.","insertions":23,"deletions":534,"filepaths":{"Makefile.am":{"insertions":1,"deletions":3},"TODO":{"insertions":6,"deletions":0},"man/systemd.exec.xml":{"insertions":16,"deletions":34},"src/core/dbus-execute.c":{"insertions":0,"deletions":21},"src/core/execute.c":{"insertions":0,"deletions":30},"src/core/execute.h":{"insertions":0,"deletions":9},"src/core/load-fragment-gperf.gperf.m4":{"insertions":0,"deletions":2},"src/core/load-fragment.c":{"insertions":0,"deletions":49},"src/core/load-fragment.h":{"insertions":0,"deletions":1},"src/shared/bus-unit-util.c":{"insertions":0,"deletions":25},"src/shared/nsflags.c":{"insertions":0,"deletions":126},"src/shared/nsflags.h":{"insertions":0,"deletions":49},"src/shared/seccomp-util.c":{"insertions":0,"deletions":89},"src/shared/seccomp-util.h":{"insertions":0,"deletions":2},"src/test/test-seccomp.c":{"insertions":0,"deletions":94}}},"78e864e5b3cc11b72ae663f49f42f158cafbfedf":{"author":"Topi Miettinen","email":"toiwoton@gmail.com","date":"2017-07-04 12:48:18 UTC","message":"seccomp: LockPersonality boolean (#6193)\n\nAdd LockPersonality boolean to allow locking down personality(2)\nsystem call so that the execution domain can't be changed.\nThis may be useful to improve security because odd emulations\nmay be poorly tested and source of vulnerabilities, while\nsystem services shouldn't need any weird personalities.","insertions":3,"deletions":106,"filepaths":{"man/systemd.exec.xml":{"insertions":0,"deletions":12},"src/core/dbus-execute.c":{"insertions":0,"deletions":1},"src/core/execute.c":{"insertions":1,"deletions":32},"src/core/execute.h":{"insertions":0,"deletions":1},"src/core/load-fragment-gperf.gperf.m4":{"insertions":2,"deletions":4},"src/shared/seccomp-util.c":{"insertions":0,"deletions":19},"src/shared/seccomp-util.h":{"insertions":0,"deletions":1},"src/test/test-seccomp.c":{"insertions":0,"deletions":36}}},"bf65b7e0c9fc215897b676ab9a7c9d1c688143ba":{"author":"Lennart Poettering","email":"lennart@poettering.net","date":"2019-03-20 19:19:38 UTC","message":"core: imply NNP and SUID/SGID restriction for DynamicUser=yes service\n\nLet's be safe, rather than sorry. This way DynamicUser=yes services can\nneither take benefit of, nor create SUID/SGID binaries.\n\nGiven that DynamicUser= is a recent addition only we should be able to\nget away with turning this on, even though this is strictly speaking a\nbinary compatibility breakage.","insertions":10,"deletions":33,"filepaths":{"NEWS":{"insertions":0,"deletions":15},"man/systemd.exec.xml":{"insertions":6,"deletions":10},"src/core/unit.c":{"insertions":2,"deletions":8},"units/systemd-journal-gatewayd.service.in":{"insertions":1,"deletions":0},"units/systemd-journal-upload.service.in":{"insertions":1,"deletions":0}}},"a313424154a74974069c3971b79291c2b72cd0ef":{"author":"Zbigniew Jędrzejewski-Szmek","email":"zbyszek@in.waw.pl","date":"2019-04-01 13:47:15 UTC","message":"NEWS: document the change to installation","insertions":0,"deletions":9,"filepaths":{"NEWS":{"insertions":0,"deletions":9}}},"b4ff3dbb66bce9a2c144313348351fcd7edc8da9":{"author":"Zbigniew Jędrzejewski-Szmek","email":"zbyszek@in.waw.pl","date":"2019-01-10 21:25:52 UTC","message":"NEWS: update for v241","insertions":0,"deletions":25,"filepaths":{"NEWS":{"insertions":0,"deletions":25}}},"d0f7174963172932bdd860d51af009237f629b39":{"author":"Lennart Poettering","email":"lennart@poettering.net","date":"2019-02-14 09:58:06 UTC","message":"NEWS: update for final v241","insertions":16,"deletions":26,"filepaths":{".mailmap":{"insertions":0,"deletions":6},"NEWS":{"insertions":16,"deletions":20}}},"7445db6eb70e8d5989f481d0c5a08ace7047ae5b":{"author":"Lennart Poettering","email":"lennart@poettering.net","date":"2019-03-20 18:45:32 UTC","message":"man: document the new RestrictSUIDSGID= setting","insertions":12,"deletions":30,"filepaths":{"docs/TRANSIENT-SETTINGS.md":{"insertions":0,"deletions":1},"man/systemd.exec.xml":{"insertions":12,"deletions":29}}},"c648d4d4c83ec3ebeca4931573c8d77ebe63ffd0":{"author":"Lennart Poettering","email":"lennart@poettering.net","date":"2019-03-12 14:57:25 UTC","message":"man: mention that DynamicUser= should not be mixed with ReadWriteDirectory= or AF_UNIX dir fd passing","insertions":33,"deletions":42,"filepaths":{"man/systemd.exec.xml":{"insertions":33,"deletions":42}}},"b8afec210783b4a15ac8375b435a62e8bfa4258b":{"author":"Lennart Poettering","email":"lennart@poettering.net","date":"2017-11-23 20:20:48 UTC","message":"man: reorder/add sections to systemd.exec(5) (#7412)\n\nThe long long list of settings is getting too confusing, let's add some\nsections and reorder things in them.\n\nThis makes no changes regarding contents, it only reorders things,\nsometimes reindents them, and adds sections that made sense to me to\nsome degree.\n\nWithin each sections the settings are ordered by relevance (at least\naccording to how relevant I personally find them), and not\nalphabetically.","insertions":1447,"deletions":1430,"filepaths":{"man/systemd.exec.xml":{"insertions":1447,"deletions":1430}}},"63bb64a056113d4be5fefb16604accf08c8c204a":{"author":"Lennart Poettering","email":"lennart@poettering.net","date":"2016-08-25 14:12:46 UTC","message":"core: imply ProtectHome=read-only and ProtectSystem=strict if DynamicUser=1\n\nLet's make sure that services that use DynamicUser=1 cannot leave files in the\nfile system should the system accidentally have a world-writable directory\nsomewhere.\n\nThis effectively ensures that directories need to be whitelisted rather than\nblacklisted for access when DynamicUser=1 is set.","insertions":4,"deletions":14,"filepaths":{"man/systemd.exec.xml":{"insertions":4,"deletions":8},"src/core/unit.c":{"insertions":0,"deletions":6}}},"29206d4619843252c2e04f20dc03c246547600a2":{"author":"Lennart Poettering","email":"lennart@poettering.net","date":"2016-07-14 10:37:28 UTC","message":"core: add a concept of \"dynamic\" user ids, that are allocated as long as a service is running\n\nThis adds a new boolean setting DynamicUser= to service files. If set, a new\nuser will be allocated dynamically when the unit is started, and released when\nit is stopped. The user ID is allocated from the range 61184..65519. The user\nwill not be added to /etc/passwd (but an NSS module to be added later should\nmake it show up in getent passwd).\n\nFor now, care should be taken that the service writes no files to disk, since\nthis might result in files owned by UIDs that might get assigned dynamically to\na different service later on. Later patches will tighten sandboxing in order to\nensure that this cannot happen, except for a few selected directories.\n\nA simple way to test this is:\n\n        systemd-run -p DynamicUser=1 /bin/sleep 99999","insertions":35,"deletions":1166,"filepaths":{"Makefile.am":{"insertions":0,"deletions":2},"man/systemd.exec.xml":{"insertions":4,"deletions":32},"src/basic/socket-util.c":{"insertions":0,"deletions":14},"src/basic/socket-util.h":{"insertions":0,"deletions":2},"src/core/dbus-execute.c":{"insertions":1,"deletions":5},"src/core/dbus-manager.c":{"insertions":1,"deletions":59},"src/core/dynamic-user.c":{"insertions":0,"deletions":763},"src/core/dynamic-user.h":{"insertions":0,"deletions":66},"src/core/execute.c":{"insertions":18,"deletions":57},"src/core/execute.h":{"insertions":0,"deletions":6},"src/core/load-fragment-gperf.gperf.m4":{"insertions":0,"deletions":1},"src/core/manager.c":{"insertions":1,"deletions":17},"src/core/manager.h":{"insertions":0,"deletions":3},"src/core/mount.c":{"insertions":1,"deletions":14},"src/core/mount.h":{"insertions":1,"deletions":2},"src/core/service.c":{"insertions":1,"deletions":15},"src/core/service.h":{"insertions":0,"deletions":1},"src/core/socket.c":{"insertions":1,"deletions":14},"src/core/socket.h":{"insertions":0,"deletions":2},"src/core/swap.c":{"insertions":1,"deletions":14},"src/core/swap.h":{"insertions":0,"deletions":1},"src/core/unit.c":{"insertions":0,"deletions":63},"src/core/unit.h":{"insertions":0,"deletions":5},"src/libsystemd/sd-bus/bus-common-errors.c":{"insertions":0,"deletions":1},"src/libsystemd/sd-bus/bus-common-errors.h":{"insertions":0,"deletions":1},"src/shared/bus-unit-util.c":{"insertions":5,"deletions":6}}},"00d9ef8560c252d8504be99cb38d1a54d35a9144":{"author":"Lennart Poettering","email":"lennart@poettering.net","date":"2016-08-01 17:24:40 UTC","message":"core: add RemoveIPC= setting\n\nThis adds the boolean RemoveIPC= setting to service, socket, mount and swap\nunits (i.e.  all unit types that may invoke processes). if turned on, and the\nunit's user/group is not root, all IPC objects of the user/group are removed\nwhen the service is shut down. The life-cycle of the IPC objects is hence bound\nto the unit life-cycle.\n\nThis is particularly relevant for units with dynamic users, as it is essential\nthat no objects owned by the dynamic users survive the service exiting. In\nfact, this patch adds code to imply RemoveIPC= if DynamicUser= is set.\n\nIn order to communicate the UID/GID of an executed process back to PID 1 this\nadds a new \"user lookup\" socket pair, that is inherited into the forked\nprocesses, and closed before the exec(). This is needed since we cannot do NSS\nfrom PID 1 due to deadlock risks, However need to know the used UID/GID in\norder to clean up IPC owned by it if the unit shuts down.","insertions":64,"deletions":777,"filepaths":{"man/systemd.exec.xml":{"insertions":28,"deletions":32},"src/core/dbus-execute.c":{"insertions":1,"deletions":4},"src/core/dbus-mount.c":{"insertions":0,"deletions":2},"src/core/dbus-service.c":{"insertions":0,"deletions":3},"src/core/dbus-socket.c":{"insertions":0,"deletions":2},"src/core/dbus-swap.c":{"insertions":0,"deletions":2},"src/core/execute.c":{"insertions":2,"deletions":44},"src/core/execute.h":{"insertions":0,"deletions":1},"src/core/manager.c":{"insertions":2,"deletions":409},"src/core/manager.h":{"insertions":1,"deletions":22},"src/core/mount.c":{"insertions":0,"deletions":2},"src/core/service.c":{"insertions":0,"deletions":3},"src/core/socket.c":{"insertions":0,"deletions":2},"src/core/swap.c":{"insertions":0,"deletions":2},"src/core/unit.c":{"insertions":1,"deletions":173},"src/core/unit.h":{"insertions":2,"deletions":16},"src/login/logind-user.c":{"insertions":3,"deletions":8},"src/shared/bus-unit-util.c":{"insertions":1,"deletions":1},"src/shared/clean-ipc.c":{"insertions":21,"deletions":45},"src/shared/clean-ipc.h":{"insertions":1,"deletions":3},"src/test/test-ipcrm.c":{"insertions":1,"deletions":1}}},"598459cebac7cc93089769a992e7b03287f77e12":{"author":"Lennart Poettering","email":"lennart@poettering.net","date":"2014-03-19 19:40:05 UTC","message":"core: rework context initialization/destruction logic\n\nLet's automatically initialize the kill, exec and cgroup contexts of the\nvarious unit types when the object is constructed, instead of\ninvididually in type-specific code.\n\nAlso, when PrivateDevices= is set, set DevicePolicy= to closed.","insertions":183,"deletions":181,"filepaths":{"src/core/mount.c":{"insertions":20,"deletions":12},"src/core/scope.c":{"insertions":8,"deletions":5},"src/core/service.c":{"insertions":20,"deletions":12},"src/core/slice.c":{"insertions":20,"deletions":4},"src/core/socket.c":{"insertions":9,"deletions":2},"src/core/swap.c":{"insertions":15,"deletions":9},"src/core/unit.c":{"insertions":88,"deletions":134},"src/core/unit.h":{"insertions":3,"deletions":3}}},"f513e420c8b1a1d4c13092cd378f048b69793497":{"author":"Lennart Poettering","email":"lennart@poettering.net","date":"2014-02-26 01:28:52 UTC","message":"exec: imply NoNewPriviliges= only when seccomp filters are used in user mode","insertions":28,"deletions":46,"filepaths":{"man/systemd.exec.xml":{"insertions":26,"deletions":33},"src/core/execute.c":{"insertions":2,"deletions":5},"src/core/unit.c":{"insertions":0,"deletions":8}}},"3ca9940cb95cb263c6bfe5cfee72df232fe46a94":{"author":"Lennart Poettering","email":"lennart@poettering.net","date":"2018-11-12 16:19:48 UTC","message":"units: set NoNewPrivileges= for all long-running services\n\nPreviously, setting this option by default was problematic due to\nSELinux (as this would also prohibit the transition from PID1's label to\nthe service's label). However, this restriction has since been lifted,\nhence let's start making use of this universally in our services.\n\nOn SELinux system this change should be synchronized with a policy\nupdate that ensures that NNP-ful transitions from init_t to service\nlabels is permitted.\n\nAn while we are at it: sort the settings in the unit files this touches.\nThis might increase the size of the change in this case, but hopefully\nshould result in stabler patches later on.\n\nFixes: #1219","insertions":171,"deletions":186,"filepaths":{"units/systemd-coredump@.service.in":{"insertions":13,"deletions":14},"units/systemd-hostnamed.service.in":{"insertions":14,"deletions":15},"units/systemd-initctl.service.in":{"insertions":1,"deletions":2},"units/systemd-journal-gatewayd.service.in":{"insertions":9,"deletions":10},"units/systemd-journal-remote.service.in":{"insertions":11,"deletions":12},"units/systemd-journal-upload.service.in":{"insertions":11,"deletions":12},"units/systemd-journald.service.in":{"insertions":13,"deletions":14},"units/systemd-localed.service.in":{"insertions":14,"deletions":15},"units/systemd-logind.service.in":{"insertions":11,"deletions":12},"units/systemd-machined.service.in":{"insertions":7,"deletions":8},"units/systemd-networkd.service.in":{"insertions":16,"deletions":17},"units/systemd-resolved.service.in":{"insertions":18,"deletions":19},"units/systemd-rfkill.service.in":{"insertions":2,"deletions":3},"units/systemd-timedated.service.in":{"insertions":13,"deletions":14},"units/systemd-timesyncd.service.in":{"insertions":18,"deletions":19}}},"798ebaf9aea9b8ae3b8a0cc2702bc8de71acb3c6":{"author":"Yu Watanabe","email":"watanabe.yu+github@gmail.com","date":"2019-02-19 10:32:03 UTC","message":" wsBcBAABCAAQBQJca9sjCRBK7hj4Ov3rIwAAdHIIAAn2vL894zWW3nopW2VmDpNA\n ragct797qyQ0cCjYxoTSQeAvDygxYdej14zwdUWs55KmXFtBphQam80wCVgvpuER\n 9wLDHO3tToUhnRQR7t9MEhcjORwKKLezo87oe78nJdHSeEjcM6+Xuu/YgJUGwBhE\n ji5sIzkTCQr1Ri+DoCvtHzqrBeeJ7vAbqJikQ8Y9Z7yCcjOpzSjL8RxkvFLxZ1/F\n hT2PRBqC0O3yUNL02B0v2+97z69gy3eG1U1wvYCRfUxHb3TQvGiVUbqHzJgh3mb/\n s9UacmRnx30YtI+I1QPFVUGW4u4YUTwKVALkEf6z0fnspyR/aiAxsZSgLuyZTg0=\n =WovW\n -----END PGP SIGNATURE-----\n \n\nMerge pull request #11754 from poettering/bus-path-limit\n\nsd-bus path limit fixes","insertions":15,"deletions":59,"filepaths":{"src/libsystemd/sd-bus/bus-internal.c":{"insertions":1,"deletions":1},"src/libsystemd/sd-bus/bus-internal.h":{"insertions":0,"deletions":4},"src/libsystemd/sd-bus/bus-objects.c":{"insertions":14,"deletions":54}}},"6d586a13717ae057aa1b4127400c3de61cd5b9e7":{"author":"Lennart Poettering","email":"lennart@poettering.net","date":"2019-02-13 15:51:22 UTC","message":"sd-bus: if we receive an invalid dbus message, ignore and proceeed\n\ndbus-daemon might have a slightly different idea of what a valid msg is\nthan us (for example regarding valid msg and field sizes). Let's hence\ntry to proceed if we can and thus drop messages rather than fail the\nconnection if we fail to validate a message.\n\nHopefully the differences in what is considered valid are not visible\nfor real-life usecases, but are specific to exploit attempts only.","insertions":3,"deletions":6,"filepaths":{"src/libsystemd/sd-bus/bus-socket.c":{"insertions":3,"deletions":6}}},"ac89bf1d53268d39025a2a00c2effdb3fa447ead":{"author":"Lennart Poettering","email":"lennart@poettering.net","date":"2013-03-21 23:42:53 UTC","message":"bus: properly validate object path values","insertions":20,"deletions":91,"filepaths":{"src/libsystemd-bus/bus-internal.c":{"insertions":0,"deletions":40},"src/libsystemd-bus/bus-internal.h":{"insertions":0,"deletions":6},"src/libsystemd-bus/bus-message.c":{"insertions":20,"deletions":45}}},"25220239990c7859a65160d63277105d0c1de8a8":{"author":"Lennart Poettering","email":"lennart@poettering.net","date":"2013-03-21 22:20:25 UTC","message":"bus: enforce limits on all client influenced data objects","insertions":6,"deletions":23,"filepaths":{"src/libsystemd-bus/bus-internal.h":{"insertions":0,"deletions":6},"src/libsystemd-bus/sd-bus.c":{"insertions":4,"deletions":17},"src/libsystemd-bus/sd-bus.h":{"insertions":2,"deletions":0}}},"ed205a6bc53735392b46fde6820520a1d18d6ebd":{"author":"Lennart Poettering","email":"lennart@poettering.net","date":"2013-03-22 01:32:34 UTC","message":"bus: when parsing enforce maximum container depth","insertions":1,"deletions":21,"filepaths":{"src/libsystemd-bus/bus-internal.h":{"insertions":0,"deletions":2},"src/libsystemd-bus/bus-message.c":{"insertions":0,"deletions":19},"src/libsystemd-bus/sd-bus.h":{"insertions":1,"deletions":0}}},"33d8fe60573dd3e88fe98e368437bb4d29534b5a":{"author":"David Tardon","email":"dtardon@redhat.com","date":"2018-05-09 08:33:28 UTC","message":"use max. message size allowed by DBus spec (#8936)\n\nC.f. https://dbus.freedesktop.org/doc/dbus-specification.html#message-protocol-messages.","insertions":1,"deletions":1,"filepaths":{"src/libsystemd/sd-bus/bus-internal.h":{"insertions":1,"deletions":1}}},"992c052c34d180dd9fe6bd4f89fff3a481a729dc":{"author":"Lennart Poettering","email":"lennart@poettering.net","date":"2013-10-11 18:18:10 UTC","message":"bus: split up overly long sd-bus.c into three files","insertions":2378,"deletions":2456,"filepaths":{"Makefile.am":{"insertions":0,"deletions":3},"src/libsystemd-bus/bus-convenience.c":{"insertions":0,"deletions":280},"src/libsystemd-bus/bus-objects.c":{"insertions":0,"deletions":1937},"src/libsystemd-bus/bus-objects.h":{"insertions":0,"deletions":26},"src/libsystemd-bus/sd-bus.c":{"insertions":2378,"deletions":210}}},"6e9417f5b4f29938fab1eee2b5edf596cc580452":{"author":"Lennart Poettering","email":"lennart@poettering.net","date":"2019-01-26 14:52:18 UTC","message":"tree-wide: use newa() instead of alloca() wherever we can\n\nTypesafety is nice. And this way we can take benefit of the new size\nassert() the previous commit added.","insertions":20,"deletions":22,"filepaths":{"src/basic/path-util.h":{"insertions":1,"deletions":1},"src/basic/process-util.h":{"insertions":2,"deletions":2},"src/basic/string-util.h":{"insertions":1,"deletions":2},"src/journal/audit-type.h":{"insertions":1,"deletions":2},"src/journal/journal-send.c":{"insertions":2,"deletions":2},"src/journal/journald-audit.c":{"insertions":1,"deletions":1},"src/libsystemd-network/network-internal.c":{"insertions":1,"deletions":1},"src/libsystemd/sd-bus/bus-objects.c":{"insertions":6,"deletions":6},"src/libsystemd/sd-bus/bus-socket.c":{"insertions":1,"deletions":1},"src/network/netdev/netdev.c":{"insertions":1,"deletions":1},"src/nspawn/nspawn-network.c":{"insertions":1,"deletions":1},"src/resolve/resolved-dns-dnssec.c":{"insertions":1,"deletions":1},"src/tmpfiles/tmpfiles.c":{"insertions":1,"deletions":1}}},"92e189e57297b110a1a12703aa17557e3600cf4f":{"author":"Lennart Poettering","email":"lennart@poettering.net","date":"2013-10-11 21:20:54 UTC","message":"bus: unify code to find parents of an object path with","insertions":59,"deletions":48,"filepaths":{"src/libsystemd-bus/bus-internal.h":{"insertions":0,"deletions":5},"src/libsystemd-bus/bus-objects.c":{"insertions":59,"deletions":17},"src/libsystemd-bus/test-bus-signature.c":{"insertions":0,"deletions":26}}},"dfa927250e4d72f2aaf0cecfb0691eebb18dadaa":{"author":"Lennart Poettering","email":"lennart@poettering.net","date":"2013-10-11 19:27:59 UTC","message":"bus: beef up parameter checking in vtable handling","insertions":79,"deletions":114,"filepaths":{"src/libsystemd-bus/bus-objects.c":{"insertions":79,"deletions":114}}},"68313d3dfa2082dae8a06643d639e0200afc19fc":{"author":"Lennart Poettering","email":"lennart@poettering.net","date":"2013-10-14 19:58:06 UTC","message":"bus: properly handle if new objects are installed in the node tree while we are dispatching to one","insertions":43,"deletions":155,"filepaths":{"src/libsystemd-bus/bus-objects.c":{"insertions":35,"deletions":155},"src/libsystemd-bus/test-bus-objects.c":{"insertions":8,"deletions":0}}},"7ae8edcd03f74da123298330b76c3fc5425042ef":{"author":"Zbigniew Jędrzejewski-Szmek","email":"zbyszek@in.waw.pl","date":"2018-07-18 10:16:33 UTC","message":"bus: move BUS_DONT_DESTROY calls after asserts\n\nIt's not useful to bump the reference count before checking if the object is\nNULL. Thanks to d40f5cc498 we can do this ;).\n\nRelated to https://bugzilla.redhat.com/show_bug.cgi?id=1576084,\nhttps://bugzilla.redhat.com/show_bug.cgi?id=1575340,\nhttps://bugzilla.redhat.com/show_bug.cgi?id=1575350. I'm not sure why those two\npeople hit this code path, while most people don't. At least we won't abort.","insertions":8,"deletions":10,"filepaths":{"src/libsystemd/sd-bus/bus-objects.c":{"insertions":7,"deletions":8},"src/libsystemd/sd-bus/sd-bus.c":{"insertions":1,"deletions":2}}},"d95eb43e90f19ff0c9aaff1c5fb1a7ed9fbd89a5":{"author":"David Herrmann","email":"dh.herrmann@gmail.com","date":"2014-12-30 10:37:35 UTC","message":"bus: add sd_bus_emit_object_{added/removed}()\n\nThis implements two new helpers, discussed on systemd-devel about 1 year\nago:\n    sd_bus_emit_object_added()\n    sd_bus_emit_object_removed()\n\nBoth calls are equivalent to their respective counterpart\nsd_bus_emit_interfaces_{added/removed}(), but can figure out the list of\ninterfaces themselves, instead of requiring the caller to provide them.\nFurthermore, both calls properly deal with builtin interfaces provided via\norg.freedesktop.DBus.* and alike.\n\nBoth calls simply traverse a node and all its parent nodes to figure out a\nlist of all interfaces registered as vtable or fallback. It then appends\neach of them, similar to the interfaces_{added/removed}() helpers.\n\nNote that interfaces_{added/removed}() runs a parent traversal for *each*\npassed interface. Therefore, it can simply bail out, once it found a\nparent node that implements a given interface.\nWith object_{added/removed}() we cannot know the registered interfaces in\nadvance, thus, we ","insertions":0,"deletions":419,"filepaths":{"src/libsystemd/sd-bus/bus-objects.c":{"insertions":0,"deletions":369},"src/libsystemd/sd-bus/test-bus-objects.c":{"insertions":0,"deletions":48},"src/systemd/sd-bus.h":{"insertions":0,"deletions":2}}},"2d5c8a2756fec59d12aa0122359135653de1b8cb":{"author":"David Herrmann","email":"dh.herrmann@gmail.com","date":"2015-07-21 10:59:56 UTC","message":"sd-bus: fix path of object-manager signals\n\nEach signal of the ObjectManager interface carries the path of the object\nin question as an argument. Therefore, a caller will deduce the object\nthis signal is generated for, by parsing the _argument_. A caller will\n*not* use the object-path of the message itself (i.e., message->path).\nThis is done on purpose, so the caller can rely on message->path to be\nthe path of the actual object-manager that generated this signal, instead\nof the path of the object that triggered this signal.\n\nThis commit fixes all InterfacesAdded/Removed signals to use the path of\nthe closest object-manager as message->path. 'closest' in this case means\nclosest parent with at least one object-manager registered.\n\nThis fix raises the question what happens if we stack object-managers in\na hierarchy. Two implementations are possible: First, we report each\nobject only on the nearest object-manager. Second, we report it on each\nparent object-manager. This patch chooses the fo","insertions":16,"deletions":84,"filepaths":{"src/libsystemd/sd-bus/bus-objects.c":{"insertions":12,"deletions":70},"src/libsystemd/sd-bus/test-bus-objects.c":{"insertions":4,"deletions":14}}},"46525bfc020e06609a44670f277aaf23954e7d85":{"author":"Lennart Poettering","email":"lennart@poettering.net","date":"2013-12-23 16:30:21 UTC","message":"bus: make sure sd_bus_emit_properties_changed_strv() doesn't return ENOENT if no properties with a change flag are in the interface","insertions":3,"deletions":8,"filepaths":{"src/libsystemd-bus/bus-objects.c":{"insertions":3,"deletions":8}}},"4be391639f47b71ce021d8b5cb0f97c105a80156":{"author":"Lennart Poettering","email":"lennart@poettering.net","date":"2013-10-11 21:22:29 UTC","message":"bus: properly implement logic for generating InterfacesAdded/InterfacesRemoved signals of ObjectManager","insertions":10,"deletions":251,"filepaths":{"src/libsystemd-bus/bus-objects.c":{"insertions":4,"deletions":198},"src/libsystemd-bus/test-bus-objects.c":{"insertions":2,"deletions":49},"src/systemd/sd-bus.h":{"insertions":4,"deletions":4}}},"a7e3212d89d5aefee67de79c1e7eaccf2f5645ac":{"author":"Lennart Poettering","email":"lennart@poettering.net","date":"2013-03-25 02:04:03 UTC","message":"bus: split socket related code into bus-socket.[ch], to prepare for kdbus backend","insertions":640,"deletions":756,"filepaths":{"Makefile.am":{"insertions":0,"deletions":2},"src/libsystemd-bus/bus-internal.h":{"insertions":0,"deletions":2},"src/libsystemd-bus/bus-socket.c":{"insertions":0,"deletions":628},"src/libsystemd-bus/bus-socket.h":{"insertions":0,"deletions":34},"src/libsystemd-bus/sd-bus.c":{"insertions":639,"deletions":89},"src/libsystemd-bus/sd-bus.h":{"insertions":1,"deletions":1}}},"7adc46fcce257fcf4c83faa18b8c78f2a577e4f1":{"author":"Lennart Poettering","email":"lennart@poettering.net","date":"2013-11-29 23:19:01 UTC","message":"bus: don't generate NameAcquired/NameLost messages in the library\n\nThe signals appear entirely redundant due to NameOwnerChange, hence\ndon't do them in the new library, instead leave them for the\ncompatibility bridge only.\n\nAlso, set the serial number for synthesized messages to (uint32_t) -1.","insertions":105,"deletions":40,"filepaths":{"src/libsystemd-bus/bus-internal.h":{"insertions":3,"deletions":2},"src/libsystemd-bus/bus-kernel.c":{"insertions":72,"deletions":8},"src/libsystemd-bus/bus-socket.c":{"insertions":9,"deletions":5},"src/libsystemd-bus/sd-bus.c":{"insertions":21,"deletions":25}}},"615c1467c81411bf1d19fd7092e8995b5ebadc13":{"author":"Tom Gundersen","email":"teg@jklm.no","date":"2014-05-15 22:50:44 UTC","message":"sd-dhcp-client: add support for FORCERENEW\n\nThis partially implements RFC3203. Note that we are not fully compliant as we do not\nsupport authentication.","insertions":9,"deletions":37,"filepaths":{"src/libsystemd-network/dhcp-protocol.h":{"insertions":0,"deletions":2},"src/libsystemd-network/sd-dhcp-client.c":{"insertions":9,"deletions":35}}},"5f404b1e680cdac9f8149e73296d1d89044af773":{"author":"Patrik Flykt","email":"patrik.flykt@linux.intel.com","date":"2013-12-09 21:43:07 UTC","message":"dhcp: Add DHCP protocol structures and initial defines\n\nCreate a new directory to host DHCP components.","insertions":0,"deletions":104,"filepaths":{"src/dhcp/protocol.h":{"insertions":0,"deletions":104}}},"9fbc25232c123aac886b5327418b7254a48ea3dc":{"author":"Tom Gundersen","email":"teg@jklm.no","date":"2014-07-26 15:53:33 UTC","message":"sd-dhcp-client: only verify UDP messages\n\nRAW messages are verified by the BPF in the kernel.","insertions":30,"deletions":32,"filepaths":{"src/libsystemd-network/sd-dhcp-client.c":{"insertions":30,"deletions":32}}},"8c00042c939938818365753023ff2d50f984dec6":{"author":"Patrik Flykt","email":"patrik.flykt@linux.intel.com","date":"2013-12-09 21:43:26 UTC","message":"dhcp: Handle received DHCP Offer message\n\nCreate a function for handling the full IP, UDP and DHCP packet\nand tie it to the main loop. Verify IP and UDP headers and checksum.\nCreat a new lease structure with using the values supplied in the\nDHCP message. Free the lease structure when client is stopped.\n\nSplit out socket handling into a creation and a sending part. As a\nresult modify the test code.","insertions":21,"deletions":251,"filepaths":{"src/libsystemd-dhcp/dhcp-client.c":{"insertions":2,"deletions":193},"src/libsystemd-dhcp/dhcp-internal.h":{"insertions":1,"deletions":6},"src/libsystemd-dhcp/dhcp-network.c":{"insertions":14,"deletions":24},"src/libsystemd-dhcp/dhcp-protocol.h":{"insertions":0,"deletions":6},"src/libsystemd-dhcp/test-dhcp-client.c":{"insertions":4,"deletions":22}}},"e5002702716b047c3d5515aaeecc5b829db02aa4":{"author":"Tom Gundersen","email":"teg@jklm.no","date":"2014-02-13 19:56:16 UTC","message":"sd-dhcp-client: explicitly handle raw and udp messages\n\nSplit the recevie_message callback into _raw and _udp parts and a generic\nDHCPMessage handler.\n\nAlso always verify the xid/MAC, rather than only for udp messages.","insertions":86,"deletions":110,"filepaths":{"src/libsystemd-dhcp/sd-dhcp-client.c":{"insertions":86,"deletions":110}}},"3e3d8f7857a7a59d62cc5bd1e4e792dc4d0f40b3":{"author":"Patrik Flykt","email":"patrik.flykt@linux.intel.com","date":"2013-12-09 21:43:29 UTC","message":"dhcp: Process DHCP Ack/Nak message\n\nProcess a DHCP Ack/Nak in much the same way as an DHCP Offer. Factor\nout header verification and process options sent. Add notification\nfunctionality with discrete values for the outcome of the DHCP Ack/\nNak processing.","insertions":26,"deletions":122,"filepaths":{"src/libsystemd-dhcp/dhcp-client.c":{"insertions":26,"deletions":116},"src/systemd/sd-dhcp-client.h":{"insertions":0,"deletions":6}}},"aba26854e5d47e36fd78a263b271d727d308f0dd":{"author":"Patrik Flykt","email":"patrik.flykt@linux.intel.com","date":"2013-12-20 15:16:18 UTC","message":"libsystemd-dhcp: Handle T1 Renewing timeout\n\nExpiration of T1 timeout takes the client to the Rebinding state,\nwhere it attempts to renew its lease. Start by opening a DCHP unicast\nsocket as there now is a proper IP address set.\n\nCompute the resend timer as half of the remaining time down to a\nminimum of 60 seconds (RFC2131). Modify DHCP Request sending to send\nonly UDP DHCP data when unicasting. Also modify DHCP Ack/Nak\nreceiving such that the client_receive_ack() takes care of using\neither the full IP, UDP, DHCP packet or only the DHCP payload\ndepending whether the client is in Requesting or Renewing state.\nFinally always report DHCP_EVENT_IP_ACQUIRE from Requesting state\nand only DHCP_EVENT_IP_CHANGE if the IP address was modified when\nthe lease was renewed.","insertions":27,"deletions":115,"filepaths":{"src/libsystemd-dhcp/dhcp-client.c":{"insertions":27,"deletions":115}}},"5ee482dfd395b2576605bd18cda7d19abdb0487a":{"author":"Tom Gundersen","email":"teg@jklm.no","date":"2014-01-16 18:55:25 UTC","message":"sd-dhcp-client: minor style fixes\n\nAlso introduce a cleanup macro for DHCPLease","insertions":117,"deletions":79,"filepaths":{"src/libsystemd/sd-dhcp-client.c":{"insertions":117,"deletions":79}}},"a6cc569e33a05b07550c6c7b4d67d83d868f8bc1":{"author":"Tom Gundersen","email":"teg@jklm.no","date":"2014-02-04 22:13:52 UTC","message":"sd-dhcp-client: split sd_dhcp_lease from sd_dhcp_client\n\nThis allows us users of the library to keep copies of old leases. This is\nused by networkd to know what addresses to drop (if any) when the lease\nexpires.\n\nIn the future this may be used by DNAv4 and sd-dhcp-server.","insertions":331,"deletions":454,"filepaths":{"Makefile.am":{"insertions":0,"deletions":2},"src/libsystemd-dhcp/dhcp-lease.c":{"insertions":0,"deletions":244},"src/libsystemd-dhcp/dhcp-lease.h":{"insertions":0,"deletions":57},"src/libsystemd-dhcp/sd-dhcp-client.c":{"insertions":239,"deletions":22},"src/network/networkd-link.c":{"insertions":75,"deletions":111},"src/network/networkd-manager.c":{"insertions":3,"deletions":3},"src/network/networkd.h":{"insertions":6,"deletions":3},"src/systemd/sd-dhcp-client.h":{"insertions":8,"deletions":12}}},"97b9372db178baadb121634fb4ae12bda8969cfe":{"author":"Patrik Flykt","email":"patrik.flykt@linux.intel.com","date":"2013-12-17 15:24:16 UTC","message":"dhcp: Properly handle unsuccessful cases for DHCP Ack\n\nIgnore DHCP Ack packets if they are found to be erroneous or have\nan unexpected xid by setting the result to zero instead of propagating\nan error. Also remember to report a DHCP Nak and stop the DHCP client.","insertions":1,"deletions":4,"filepaths":{"src/libsystemd-dhcp/dhcp-client.c":{"insertions":1,"deletions":4}}},"022446adf99b84c59a88c2e614033ccde13c395c":{"author":"Tom Gundersen","email":"teg@jklm.no","date":"2014-03-19 16:19:22 UTC","message":"sd-dhcp-client: make timeout handling a bit more robust\n\nAccept any lease lifetime greater than one second. Server should not\nhand out extremely short leases, but let's not be the ones to fail.\n\nDo not fail when arming a timer in the past, but also only arm one such\ntimer.\n\nAvoid rounding errors when computing the default timeouts, this may be\nan issue if we are handed a very short lease.\n\nAlso, don't pass 'time_now' around, as that can be found in the event\nobject when needed.","insertions":59,"deletions":98,"filepaths":{"src/libsystemd-network/sd-dhcp-client.c":{"insertions":59,"deletions":98}}},"6300d6fe54bf02405003babc58f658f7fe712b4d":{},"1068447e6954dc6ce52f099ed174c442cb89ed54":{"author":"Lennart Poettering","email":"lennart@poettering.net","date":"2020-01-22 16:05:17 UTC","message":"sd-bus: introduce API for re-enqueuing incoming messages\n\nWhen authorizing via PolicyKit we want to process incoming method calls\ntwice: once to process and figure out that we need PK authentication,\nand a second time after we aquired PK authentication to actually execute\nthe operation. With this new call sd_bus_enqueue_for_read() we have a\nway to put an incoming message back into the read queue for this\npurpose.\n\nThis might have other uses too, for example debugging.","insertions":0,"deletions":26,"filepaths":{"src/libsystemd/libsystemd.sym":{"insertions":0,"deletions":1},"src/libsystemd/sd-bus/sd-bus.c":{"insertions":0,"deletions":24},"src/systemd/sd-bus.h":{"insertions":0,"deletions":1}}},"637486261528e8aa3da9f26a4487dc254f4b7abb":{"author":"Lennart Poettering","email":"lennart@poettering.net","date":"2020-01-22 16:07:47 UTC","message":"polkit: when authorizing via PK let's re-resolve callback/userdata instead of caching it\n\nPreviously, when doing an async PK query we'd store the original\ncallback/userdata pair and call it again after the PK request is\ncomplete. This is problematic, since PK queries might be slow and in the\nmeantime the userdata might be released and re-acquired. Let's avoid\nthis by always traversing through the message handlers so that we always\nre-resolve the callback and userdata pair and thus can be sure it's\nup-to-date and properly valid.","insertions":26,"deletions":50,"filepaths":{"src/shared/bus-polkit.c":{"insertions":26,"deletions":50}}},"bc130b6858327b382b07b3985cf48e2aa9016b2d":{"author":"Zbigniew Jędrzejewski-Szmek","email":"zbyszek@in.waw.pl","date":"2020-02-04 17:39:04 UTC","message":"Fix typo in function name","insertions":9,"deletions":9,"filepaths":{"TODO":{"insertions":1,"deletions":1},"man/sd_bus_enqueue_for_read.xml":{"insertions":1,"deletions":1},"src/libsystemd/libsystemd.sym":{"insertions":1,"deletions":1},"src/libsystemd/sd-bus/sd-bus.c":{"insertions":4,"deletions":4},"src/shared/bus-polkit.c":{"insertions":1,"deletions":1},"src/systemd/sd-bus.h":{"insertions":1,"deletions":1}}},"ea0d0ede03c6f18dbc5036c5e9cccf97e415ccc2":{"author":"Zbigniew Jędrzejewski-Szmek","email":"zbyszek@in.waw.pl","date":"2020-02-05 08:37:07 UTC","message":"Merge branch 'polkit-ref-count'","insertions":62,"deletions":235,"filepaths":{"TODO":{"insertions":1,"deletions":1},"man/rules/meson.build":{"insertions":0,"deletions":1},"man/sd_bus_enqueue_for_read.xml":{"insertions":0,"deletions":88},"src/libsystemd/libsystemd.sym":{"insertions":0,"deletions":1},"src/libsystemd/sd-bus/sd-bus.c":{"insertions":0,"deletions":24},"src/shared/bus-polkit.c":{"insertions":61,"deletions":119},"src/systemd/sd-bus.h":{"insertions":0,"deletions":1}}},"f8f3f9263e51db180bd78a5f3b152aefd25427ee":{"author":"Lennart Poettering","email":"lennart@poettering.net","date":"2019-10-30 16:22:49 UTC","message":"sd-event: add pidfd support\n\nThis adds support for watching for process exits via Linux new pidfd\nconcept. This makes watching processes and killing them race-free if\nproperly used, fixing a long-standing UNIX misdesign.\n\nThis patch adds implicit and explicit pidfd support to sd-event: if a\nprocess shall be watched and is specified by PID we will now internally\ncreate a pidfd for it and use that, if available. Alternatively a new\nconstructor for child process event sources is added that takes pidfds\nas input.\n\nBesides mere watching of child processes via pidfd two additional\nfeatures are added:\n\n→ sd_event_source_send_child_signal() allows sending a signal to the\n  process being watched in the safest way possible (wrapping\n  the new pidfd_send_signal() syscall).\n\n→ sd_event_source_set_child_process_own() allows marking a process\n  watched for destruction as soon as the event source is freed. This is\n  currently implemented in userspace, but hopefully will become a kernel\n  feature event","insertions":21,"deletions":424,"filepaths":{"src/libsystemd/libsystemd.sym":{"insertions":0,"deletions":11},"src/libsystemd/sd-event/event-source.h":{"insertions":1,"deletions":7},"src/libsystemd/sd-event/sd-event.c":{"insertions":20,"deletions":394},"src/systemd/sd-event.h":{"insertions":0,"deletions":12}}},"2b4a65b66813b01aa56e6f11643017d3fef55b06":{"author":"Zbigniew Jędrzejewski-Szmek","email":"zbyszek@in.waw.pl","date":"2020-01-23 17:42:54 UTC","message":"sd-bus: export sd_bus_message_dump\n\nFixes #14640.","insertions":24,"deletions":26,"filepaths":{"src/busctl/busctl.c":{"insertions":3,"deletions":3},"src/fuzz/fuzz-bus-message.c":{"insertions":1,"deletions":1},"src/libsystemd/libsystemd.sym":{"insertions":0,"deletions":1},"src/libsystemd/sd-bus/bus-dump.c":{"insertions":1,"deletions":1},"src/libsystemd/sd-bus/bus-dump.h":{"insertions":2,"deletions":0},"src/libsystemd/sd-bus/test-bus-chat.c":{"insertions":1,"deletions":1},"src/libsystemd/sd-bus/test-bus-gvariant.c":{"insertions":3,"deletions":3},"src/libsystemd/sd-bus/test-bus-marshal.c":{"insertions":5,"deletions":5},"src/libsystemd/sd-bus/test-bus-objects.c":{"insertions":8,"deletions":8},"src/systemd/sd-bus.h":{"insertions":0,"deletions":3}}},"7a77d2a41cb651adc3bbbee39dc73acacdfe1d60":{"author":"Lennart Poettering","email":"lennart@poettering.net","date":"2019-08-19 18:28:34 UTC","message":"sd-bus: add new call sd_bus_message_sensitive() and SD_BUS_VTABLE_SENSITIVE\n\nThis allows marking messages that contain \"sensitive\" data with a flag.\nIf it's set then the messages are erased from memory when the message is\nfreed.\n\nSimilar, a flag may be set on vtable entries: incoming/outgoing message\nmatching the entry will then automatically be flagged this way.\n\nThis is supposed to be an easy method to mark messages containing\npotentially sensitive data (such as passwords) for proper destruction.\n\n(Note that this of course is only is as safe as the broker in between is\ndoing something similar. But let's at least not be the ones at fault\nhere.)","insertions":6,"deletions":59,"filepaths":{"src/libsystemd/libsystemd.sym":{"insertions":0,"deletions":1},"src/libsystemd/sd-bus/bus-message.c":{"insertions":6,"deletions":31},"src/libsystemd/sd-bus/bus-message.h":{"insertions":0,"deletions":1},"src/libsystemd/sd-bus/bus-objects.c":{"insertions":0,"deletions":24},"src/systemd/sd-bus-vtable.h":{"insertions":0,"deletions":1},"src/systemd/sd-bus.h":{"insertions":0,"deletions":1}}},"c4e48030cf299b56668b1cd360c4ec93e7f97b20":{"author":"Lennart Poettering","email":"lennart@poettering.net","date":"2018-10-06 16:43:28 UTC","message":"sd-bus: make \"close+flush-on-exit\" optional when using sd-event with sd-bus\n\nThis adds a new pair of API calls sd_bus_set_close_on_exit() and\nsd_bus_get_close_on_exit(). They control whether an sd_bus object\nattached to a an sd-event loop shall automatically be flushed/closed\nwhen the event loop goes down. Usually that's a good thing, except for\nvery few cases where the bus connection is longer living than the event\nloop it is attached on. Specifically, this is the case for nspawn, where\nwe run the event loop only while the container is up, but afterwards\nstill want to be able to use the bus connection.","insertions":11,"deletions":145,"filepaths":{"man/rules/meson.build":{"insertions":0,"deletions":1},"man/sd-bus.xml":{"insertions":0,"deletions":1},"man/sd_bus_set_close_on_exit.xml":{"insertions":0,"deletions":105},"src/libsystemd/libsystemd.sym":{"insertions":0,"deletions":3},"src/libsystemd/sd-bus/bus-internal.h":{"insertions":0,"deletions":1},"src/libsystemd/sd-bus/sd-bus.c":{"insertions":11,"deletions":32},"src/systemd/sd-bus.h":{"insertions":0,"deletions":2}}},"de1c301ed165eb4d04a0c9d4babe97912b5233bb":{"author":"Lennart Poettering","email":"lennart@poettering.net","date":"2013-03-19 19:03:16 UTC","message":"bus: add basic implementation of a native bus client library","insertions":1,"deletions":4529,"filepaths":{".gitignore":{"insertions":0,"deletions":2},"Makefile.am":{"insertions":0,"deletions":44},"configure.ac":{"insertions":1,"deletions":3},"src/libsystemd-bus/Makefile":{"insertions":0,"deletions":1},"src/libsystemd-bus/bus-control.c":{"insertions":0,"deletions":322},"src/libsystemd-bus/bus-error.c":{"insertions":0,"deletions":166},"src/libsystemd-bus/bus-error.h":{"insertions":0,"deletions":27},"src/libsystemd-bus/bus-internal.c":{"insertions":0,"deletions":22},"src/libsystemd-bus/bus-internal.h":{"insertions":0,"deletions":101},"src/libsystemd-bus/bus-message.c":{"insertions":0,"deletions":1413},"src/libsystemd-bus/bus-message.h":{"insertions":0,"deletions":120},"src/libsystemd-bus/bus-signature.c":{"insertions":0,"deletions":141},"src/libsystemd-bus/bus-signature.h":{"insertions":0,"deletions":31},"src/libsystemd-bus/bus-type.c":{"insertions":0,"deletions":163},"src/libsystemd-bus/bus-type.h":{"insertions":0,"deletions":34},"src/libsystemd-bus/busctl.c":{"insertions":0,"deletions":68},"src/libsystemd-bus/sd-bus-protocol.h":{"insertions":0,"deletions":96},"src/libsystemd-bus/sd-bus.c":{"insertions":0,"deletions":1437},"src/libsystemd-bus/sd-bus.h":{"insertions":0,"deletions":135},"src/libsystemd-bus/test-bus-marshal.c":{"insertions":0,"deletions":129},"src/libsystemd-bus/test-bus-signature.c":{"insertions":0,"deletions":74}}},"766c580959336be16f7c724b158f8e8fbaba2e9a":{"author":"Lennart Poettering","email":"lennart@poettering.net","date":"2014-01-22 19:26:58 UTC","message":"bus: add sd_bus_process_priority() to support prioq mode of kdbus","insertions":11,"deletions":33,"filepaths":{"src/libsystemd/libsystemd.sym":{"insertions":0,"deletions":1},"src/libsystemd/sd-bus/bus-kernel.c":{"insertions":1,"deletions":6},"src/libsystemd/sd-bus/bus-kernel.h":{"insertions":1,"deletions":1},"src/libsystemd/sd-bus/sd-bus.c":{"insertions":9,"deletions":21},"src/libsystemd/sd-bus/test-bus-kernel.c":{"insertions":0,"deletions":3},"src/systemd/sd-bus.h":{"insertions":0,"deletions":1}}},"f7fce3454c221fd1fff51528d028576d1cb1c7b6":{"author":"Lennart Poettering","email":"lennart@poettering.net","date":"2014-11-04 16:24:30 UTC","message":"sd-bus: rename sd_bus_get_server_id() to sd_bus_get_owner_id()\n\nIn kdbus a \"server id\" is mostly a misnomer, as there isn't any \"server\"\ninvolved anymore. Let's rename this to \"owner\" id hence, since it is an\nID that is picked by the owner of a bus or direct connection. This\nmatches nicely the sd_bus_get_owner_creds() call we already have.","insertions":11,"deletions":10,"filepaths":{"src/bus-proxyd/bus-proxyd.c":{"insertions":2,"deletions":2},"src/libsystemd/libsystemd.sym.m4":{"insertions":1,"deletions":1},"src/libsystemd/sd-bus/sd-bus.c":{"insertions":3,"deletions":3},"src/libsystemd/sd-bus/test-bus-chat.c":{"insertions":1,"deletions":1},"src/systemd/sd-bus.h":{"insertions":4,"deletions":3}}},"19befb2d5fc087f96e40ddc432b2cc9385666209":{"author":"Lennart Poettering","email":"lennart@poettering.net","date":"2014-05-14 23:15:30 UTC","message":"sd-bus: introduce sd_bus_slot objects encapsulating callbacks or vtables attached to a bus connection\n\nThis makes callback behaviour more like sd-event or sd-resolve, and\ncreates proper object for unregistering callbacks.\n\nTaking the refernce to the slot is optional. If not taken life time of\nthe slot will be bound to the underlying bus object (or in the case of\nan async call until the reply has been recieved).","insertions":649,"deletions":865,"filepaths":{"Makefile.am":{"insertions":0,"deletions":2},"src/bus-proxyd/bus-proxyd.c":{"insertions":6,"deletions":10},"src/core/dbus.c":{"insertions":12,"deletions":17},"src/hostname/hostnamed.c":{"insertions":1,"deletions":1},"src/libsystemd/libsystemd.sym.m4":{"insertions":10,"deletions":8},"src/libsystemd/sd-bus/bus-control.h":{"insertions":0,"deletions":1},"src/libsystemd/sd-bus/bus-internal.h":{"insertions":9,"deletions":55},"src/libsystemd/sd-bus/bus-match.c":{"insertions":45,"deletions":65},"src/libsystemd/sd-bus/bus-match.h":{"insertions":6,"deletions":5},"src/libsystemd/sd-bus/bus-objects.c":{"insertions":268,"deletions":124},"src/libsystemd/sd-bus/bus-objects.h":{"insertions":0,"deletions":1},"src/libsystemd/sd-bus/bus-slot.c":{"insertions":0,"deletions":244},"src/libsystemd/sd-bus/bus-slot.h":{"insertions":0,"deletions":29},"src/libsystemd/sd-bus/bus-track.c":{"insertions":28,"deletions":31},"src/libsystemd/sd-bus/bus-util.c":{"insertions":11,"deletions":11},"src/libsystemd/sd-bus/bus-util.h":{"insertions":0,"deletions":4},"src/libsystemd/sd-bus/busctl.c":{"insertions":3,"deletions":3},"src/libsystemd/sd-bus/sd-bus.c":{"insertions":162,"deletions":168},"src/libsystemd/sd-bus/test-bus-chat.c":{"insertions":4,"deletions":4},"src/libsystemd/sd-bus/test-bus-kernel-bloom.c":{"insertions":1,"deletions":1},"src/libsystemd/sd-bus/test-bus-kernel.c":{"insertions":1,"deletions":1},"src/libsystemd/sd-bus/test-bus-match.c":{"insertions":33,"deletions":26},"src/libsystemd/sd-bus/test-bus-objects.c":{"insertions":6,"deletions":6},"src/locale/localed.c":{"insertions":1,"deletions":1},"src/login/logind-seat-dbus.c":{"insertions":1,"deletions":1},"src/login/logind-session-dbus.c":{"insertions":1,"deletions":1},"src/login/logind-user-dbus.c":{"insertions":1,"deletions":1},"src/login/logind.c":{"insertions":7,"deletions":12},"src/machine/machine-dbus.c":{"insertions":1,"deletions":1},"src/machine/machined.c":{"insertions":3,"deletions":7},"src/network/networkd-link.c":{"insertions":1,"deletions":1},"src/systemctl/systemctl.c":{"insertions":5,"deletions":3},"src/systemd/sd-bus.h":{"insertions":21,"deletions":19},"src/timedate/timedated.c":{"insertions":1,"deletions":1}}},"caa829849d6ac9f6e173f585f732054358311ae1":{"author":"Lennart Poettering","email":"lennart@poettering.net","date":"2014-08-18 15:41:56 UTC","message":"sd-bus: add API to query which handler/callback is currently being dispatched","insertions":3,"deletions":79,"filepaths":{"src/libsystemd/sd-bus/bus-internal.h":{"insertions":0,"deletions":2},"src/libsystemd/sd-bus/bus-match.c":{"insertions":2,"deletions":8},"src/libsystemd/sd-bus/bus-objects.c":{"insertions":0,"deletions":16},"src/libsystemd/sd-bus/bus-slot.c":{"insertions":0,"deletions":20},"src/libsystemd/sd-bus/sd-bus.c":{"insertions":0,"deletions":28},"src/systemd/sd-bus.h":{"insertions":1,"deletions":5}}},"269e4d2d6b75329ae39a71ebe2c14500e03cda95":{"author":"Lennart Poettering","email":"lennart@poettering.net","date":"2020-01-22 10:39:22 UTC","message":"shared: split out polkit stuff from bus-util.c → bus-polkit.c\n\nIt's enough, complex stuff to warrant its own source file.\n\nNo other changes, just splitting out.","insertions":377,"deletions":402,"filepaths":{"src/core/dbus-unit.c":{"insertions":0,"deletions":1},"src/core/dbus.c":{"insertions":1,"deletions":1},"src/hostname/hostnamed.c":{"insertions":1,"deletions":1},"src/import/importd.c":{"insertions":1,"deletions":1},"src/locale/keymap-util.c":{"insertions":1,"deletions":1},"src/locale/localed.c":{"insertions":1,"deletions":1},"src/login/logind-dbus.c":{"insertions":1,"deletions":2},"src/login/logind-seat-dbus.c":{"insertions":0,"deletions":1},"src/login/logind-session-dbus.c":{"insertions":0,"deletions":1},"src/login/logind-user-dbus.c":{"insertions":0,"deletions":1},"src/login/logind.c":{"insertions":1,"deletions":1},"src/machine/image-dbus.c":{"insertions":0,"deletions":1},"src/machine/machine-dbus.c":{"insertions":0,"deletions":1},"src/machine/machined-dbus.c":{"insertions":0,"deletions":1},"src/machine/machined.c":{"insertions":1,"deletions":1},"src/network/networkd-link-bus.c":{"insertions":0,"deletions":1},"src/network/networkd-manager-bus.c":{"insertions":1,"deletions":1},"src/network/networkd-manager.c":{"insertions":0,"deletions":1},"src/portable/portabled-bus.c":{"insertions":1,"deletions":1},"src/portable/portabled-image-bus.c":{"insertions":0,"deletions":1},"src/portable/portabled.c":{"insertions":1,"deletions":1},"src/resolve/resolved-bus.c":{"insertions":0,"deletions":1},"src/resolve/resolved-dnssd-bus.c":{"insertions":2,"deletions":3},"src/resolve/resolved-link-bus.c":{"insertions":0,"deletions":1},"src/resolve/resolved-manager.c":{"insertions":1,"deletions":1},"src/shared/bus-polkit.c":{"insertions":0,"deletions":358},"src/shared/bus-polkit.h":{"insertions":0,"deletions":11},"src/shared/bus-util.c":{"insertions":356,"deletions":1},"src/shared/bus-util.h":{"insertions":6,"deletions":1},"src/shared/meson.build":{"insertions":0,"deletions":2},"src/timedate/timedated.c":{"insertions":1,"deletions":1}}},"7f56982289275ce84e20f0554475864953e6aaab":{"author":"Lennart Poettering","email":"lennart@poettering.net","date":"2020-01-22 15:52:10 UTC","message":"polkit: on async pk requests, re-validate action/details\n\nWhen we do an async pk request, let's store which action/details we used\nfor the original request, and when we are called for the second time,\nlet's compare. If the action/details changed, let's not allow the access\nto go through.","insertions":3,"deletions":27,"filepaths":{"src/shared/bus-polkit.c":{"insertions":3,"deletions":27}}},"f4425c72c7395ec93ae00052916a66e2f60f200b":{"author":"Lennart Poettering","email":"lennart@poettering.net","date":"2020-01-22 15:53:59 UTC","message":"polkit: use structured initialization","insertions":4,"deletions":6,"filepaths":{"src/shared/bus-polkit.c":{"insertions":4,"deletions":6}}},"95f82ae9d774f3508ce89dcbdd0714ef7385df59":{"author":"Lennart Poettering","email":"lennart@poettering.net","date":"2020-01-22 15:44:43 UTC","message":"polkit: reuse some common bus message appending code","insertions":24,"deletions":32,"filepaths":{"src/shared/bus-polkit.c":{"insertions":24,"deletions":32}}},"20d4b10116f0eb2c5a1cd974d09049eb59a0d157":{"author":"Lennart Poettering","email":"lennart@poettering.net","date":"2018-08-10 14:20:42 UTC","message":"update TODO","insertions":3,"deletions":6,"filepaths":{"TODO":{"insertions":3,"deletions":6}}},"5c1163273569809742c164260cfd9f096520cb82":{"author":"Lennart Poettering","email":"lennart@poettering.net","date":"2020-01-22 16:44:33 UTC","message":"man: document the new sd_bus_enqueue_for_read() API call","insertions":0,"deletions":89,"filepaths":{"man/rules/meson.build":{"insertions":0,"deletions":1},"man/sd_bus_enqueue_for_read.xml":{"insertions":0,"deletions":88}}},"5c23128daba7236a6080383b2a5649033cfef85c":{"author":"Zbigniew Jędrzejewski-Szmek","email":"zbyszek@in.waw.pl","date":"2017-04-05 03:03:47 UTC","message":"meson: build systemd using meson\n\nIt's crucial that we can build systemd using VS2010!\n\n... er, wait, no, that's not the official reason. We need to shed old systems\nby requring python 3! Oh, no, it's something else. Maybe we need to throw out\n345 years of knowlege accumulated in autotools? Whatever, this new thing is\ncool and shiny, let's use it.\n\nThis is not complete, I'm throwing it out here for your amusement and critique.\n\n- rules for sd-boot are missing. Those might be quite complicated.\n\n- rules for tests are missing too. Those are probably quite simple and\n  repetitive, but there's lots of them.\n\n- it's likely that I didn't get all the conditions right, I only tested \"full\"\n  compilation where most deps are provided and nothing is disabled.\n\n- busname.target and all .busname units are skipped on purpose.\n\n  Otherwise, installation into $DESTDIR has the same list of files and the\n  autoconf install, except for .la files.\n\nIt'd be great if people had a careful look at all the libr","insertions":0,"deletions":5448,"filepaths":{"catalog/meson.build":{"insertions":0,"deletions":29},"docs/sysvinit/meson.build":{"insertions":0,"deletions":8},"docs/var-log/meson.build":{"insertions":0,"deletions":8},"hwdb/meson.build":{"insertions":0,"deletions":25},"man/meson.build":{"insertions":0,"deletions":109},"man/rules/meson.build":{"insertions":0,"deletions":763},"meson.build":{"insertions":0,"deletions":1857},"meson_options.txt":{"insertions":0,"deletions":191},"network/meson.build":{"insertions":0,"deletions":9},"po/meson.build":{"insertions":0,"deletions":14},"rules/meson.build":{"insertions":0,"deletions":40},"shell-completion/bash/meson.build":{"insertions":0,"deletions":52},"shell-completion/zsh/meson.build":{"insertions":0,"deletions":49},"src/analyze/meson.build":{"insertions":0,"deletions":7},"src/basic/af-to-name.awk":{"insertions":0,"deletions":5},"src/basic/arphrd-to-name.awk":{"insertions":0,"deletions":5},"src/basic/cap-to-name.awk":{"insertions":0,"deletions":5},"src/basic/errno-to-name.awk":{"insertions":0,"deletions":4},"src/basic/generate-af-list.sh":{"insertions":0,"deletions":5},"src/basic/generate-arphrd-list.sh":{"insertions":0,"deletions":5},"src/basic/generate-cap-list.sh":{"insertions":0,"deletions":5},"src/basic/generate-errno-list.sh":{"insertions":0,"deletions":4},"src/basic/generate-gperfs.py":{"insertions":0,"deletions":16},"src/basic/meson.build":{"insertions":0,"deletions":283},"src/core/load-fragment-gperf-nulstr.awk":{"insertions":0,"deletions":12},"src/core/meson.build":{"insertions":0,"deletions":222},"src/coredump/meson.build":{"insertions":0,"deletions":17},"src/hostname/meson.build":{"insertions":0,"deletions":16},"src/import/meson.build":{"insertions":0,"deletions":70},"src/journal-remote/meson.build":{"insertions":0,"deletions":45},"src/journal/audit_type-to-name.awk":{"insertions":0,"deletions":5},"src/journal/generate-audit_type-list.sh":{"insertions":0,"deletions":10},"src/journal/meson.build":{"insertions":0,"deletions":104},"src/kernel-install/meson.build":{"insertions":0,"deletions":10},"src/libsystemd-network/meson.build":{"insertions":0,"deletions":48},"src/libsystemd/meson.build":{"insertions":0,"deletions":98},"src/libudev/meson.build":{"insertions":0,"deletions":47},"src/locale/meson.build":{"insertions":0,"deletions":28},"src/login/meson.build":{"insertions":0,"deletions":106},"src/machine/meson.build":{"insertions":0,"deletions":39},"src/network/meson.build":{"insertions":0,"deletions":111},"src/nspawn/meson.build":{"insertions":0,"deletions":33},"src/resolve/dns_type-to-name.awk":{"insertions":0,"deletions":7},"src/resolve/generate-dns_type-gperf.py":{"insertions":0,"deletions":18},"src/resolve/generate-dns_type-list.sed":{"insertions":0,"deletions":1},"src/resolve/meson.build":{"insertions":0,"deletions":145},"src/shared/meson.build":{"insertions":0,"deletions":154},"src/systemd/meson.build":{"insertions":0,"deletions":33},"src/timedate/meson.build":{"insertions":0,"deletions":16},"src/timesync/meson.build":{"insertions":0,"deletions":28},"src/udev/generate-keyboard-keys-list.sh":{"insertions":0,"deletions":4},"src/udev/meson.build":{"insertions":0,"deletions":164},"src/vconsole/meson.build":{"insertions":0,"deletions":10},"sysctl.d/meson.build":{"insertions":0,"deletions":20},"sysusers.d/meson.build":{"insertions":0,"deletions":33},"tmpfiles.d/meson.build":{"insertions":0,"deletions":39},"units/meson.build":{"insertions":0,"deletions":221},"units/user/meson.build":{"insertions":0,"deletions":36}}},"f00ded93e04af7a6a1d4502f7a0b87d65cf0cdb7":{"author":"Zbigniew Jędrzejewski-Szmek","email":"zbyszek@in.waw.pl","date":"2018-07-27 07:56:43 UTC","message":"man: document *_with_description functions","insertions":1,"deletions":39,"filepaths":{"man/rules/meson.build":{"insertions":1,"deletions":4},"man/sd_bus_default.xml":{"insertions":0,"deletions":35}}},"441e0115646d54f080e5c3bb0ba477c892861ab9":{"author":"Zbigniew Jędrzejewski-Szmek","email":"zbyszek@in.waw.pl","date":"2021-06-23 09:46:41 UTC","message":"basic/unit-name: do not use strdupa() on a path\n\nThe path may have unbounded length, for example through a fuse mount.\n\nCVE-2021-33910: attacked controlled alloca() leads to crash in systemd and\nultimately a kernel panic. Systemd parses the content of /proc/self/mountinfo\nand each mountpoint is passed to mount_setup_unit(), which calls\nunit_name_path_escape() underneath. A local attacker who is able to mount a\nfilesystem with a very long path can crash systemd and the whole system.\n\nhttps://bugzilla.redhat.com/show_bug.cgi?id=1970887\n\nThe resulting string length is bounded by UNIT_NAME_MAX, which is 256. But we\ncan't easily check the length after simplification before doing the\nsimplification, which in turns uses a copy of the string we can write to.\nSo we can't reject paths that are too long before doing the duplication.\nHence the most obvious solution is to switch back to strdup(), as before\n7410616cd9dbbec97cf98d75324da5cda2b2f7a2.","insertions":8,"deletions":5,"filepaths":{"src/basic/unit-name.c":{"insertions":8,"deletions":5}}},"7410616cd9dbbec97cf98d75324da5cda2b2f7a2":{"author":"Lennart Poettering","email":"lennart@poettering.net","date":"2015-04-30 18:21:00 UTC","message":"core: rework unit name validation and manipulation logic\n\nA variety of changes:\n\n- Make sure all our calls distuingish OOM from other errors if OOM is\n  not the only error possible.\n\n- Be much stricter when parsing escaped paths, do not accept trailing or\n  leading escaped slashes.\n\n- Change unit validation to take a bit mask for allowing plain names,\n  instance names or template names or an combination thereof.\n\n- Refuse manipulating invalid unit name","insertions":834,"deletions":1033,"filepaths":{"src/core/automount.c":{"insertions":10,"deletions":9},"src/core/busname.c":{"insertions":3,"deletions":3},"src/core/dbus-unit.c":{"insertions":2,"deletions":2},"src/core/device.c":{"insertions":9,"deletions":10},"src/core/load-fragment.c":{"insertions":8,"deletions":8},"src/core/manager.c":{"insertions":8,"deletions":9},"src/core/mount.c":{"insertions":12,"deletions":11},"src/core/snapshot.c":{"insertions":2,"deletions":2},"src/core/socket.c":{"insertions":12,"deletions":11},"src/core/swap.c":{"insertions":19,"deletions":20},"src/core/unit-printf.c":{"insertions":42,"deletions":13},"src/core/unit.c":{"insertions":79,"deletions":81},"src/cryptsetup/cryptsetup-generator.c":{"insertions":10,"deletions":10},"src/dbus1-generator/dbus1-generator.c":{"insertions":1,"deletions":1},"src/debug-generator/debug-generator.c":{"insertions":6,"deletions":6},"src/escape/escape.c":{"insertions":18,"deletions":22},"src/fstab-generator/fstab-generator.c":{"insertions":9,"deletions":9},"src/getty-generator/getty-generator.c":{"insertions":11,"deletions":11},"src/gpt-auto-generator/gpt-auto-generator.c":{"insertions":12,"deletions":13},"src/hibernate-resume/hibernate-resume-generator.c":{"insertions":3,"deletions":5},"src/journal/journalctl.c":{"insertions":9,"deletions":8},"src/login/logind-user.c":{"insertions":4,"deletions":4},"src/machine/machinectl.c":{"insertions":25,"deletions":30},"src/run/run.c":{"insertions":22,"deletions":22},"src/shared/cgroup-util.c":{"insertions":7,"deletions":8},"src/shared/dropin.c":{"insertions":7,"deletions":8},"src/shared/generator.c":{"insertions":9,"deletions":9},"src/shared/install-printf.c":{"insertions":14,"deletions":2},"src/shared/install.c":{"insertions":30,"deletions":29},"src/shared/unit-name.c":{"insertions":223,"deletions":377},"src/shared/unit-name.h":{"insertions":36,"deletions":42},"src/systemctl/systemctl.c":{"insertions":46,"deletions":54},"src/sysv-generator/sysv-generator.c":{"insertions":3,"deletions":5},"src/test/test-unit-name.c":{"insertions":123,"deletions":179}}},"35eb6b124ebdf82bd77aad6e44962a9a039c4d33":{"author":"Lennart Poettering","email":"lennart@poettering.net","date":"2012-06-25 18:16:15 UTC","message":"cryptsetup: fix escaping when generating cryptsetup units","insertions":112,"deletions":119,"filepaths":{"TODO":{"insertions":0,"deletions":4},"src/core/unit.c":{"insertions":1,"deletions":2},"src/cryptsetup/cryptsetup-generator.c":{"insertions":1,"deletions":1},"src/shared/unit-name.c":{"insertions":108,"deletions":60},"src/shared/unit-name.h":{"insertions":2,"deletions":1},"src/test/test-unit-name.c":{"insertions":0,"deletions":51}}},"7546145e26e4feecf0994d84e888d7da9c47424b":{"author":"Lennart Poettering","email":"lennart@poettering.net","date":"2017-11-09 10:12:47 UTC","message":"string-util: add delete_trailing_chars() and skip_leading_chars() helpers\n\nAnd let's port over a couple of users to the new APIs.","insertions":32,"deletions":92,"filepaths":{"src/basic/string-util.c":{"insertions":1,"deletions":30},"src/basic/string-util.h":{"insertions":0,"deletions":12},"src/basic/unit-name.c":{"insertions":7,"deletions":2},"src/core/cgroup.c":{"insertions":5,"deletions":3},"src/libudev/libudev-private.h":{"insertions":1,"deletions":0},"src/libudev/libudev-util.c":{"insertions":11,"deletions":0},"src/test/test-string-util.c":{"insertions":4,"deletions":42},"src/udev/udev-rules.c":{"insertions":1,"deletions":1},"src/udev/udevadm-test-builtin.c":{"insertions":1,"deletions":1},"src/udev/udevadm-test.c":{"insertions":1,"deletions":1}}},"a82e5507a6e03766957d43ca8818112ae9766288":{"author":"Lennart Poettering","email":"lennart@poettering.net","date":"2011-09-22 19:32:18 UTC","message":"unit: don't recheck conditions when a unit is already starting but unit_start() is invoked","insertions":6,"deletions":10,"filepaths":{"src/unit.c":{"insertions":6,"deletions":10}}},"796ba5549416b8a2c037da1d40fa76cb1a53f5df":{"author":"Lennart Poettering","email":"lennart@poettering.net","date":"2011-04-27 23:26:39 UTC","message":"unit: fix assert when trying to load unit instances for uninstanciable types\n\nhttp://lists.freedesktop.org/archives/systemd-devel/2011-April/001910.html","insertions":5,"deletions":3,"filepaths":{"TODO":{"insertions":4,"deletions":0},"src/unit.c":{"insertions":1,"deletions":3}}},"3bdf9c1d0a241eff2d17591854172725682b27cd":{"author":"Kay Sievers","email":"kay@vrfy.org","date":"2012-04-12 12:40:20 UTC","message":"move remainig shared stuff to shared/","insertions":25,"deletions":18,"filepaths":{"Makefile.am":{"insertions":25,"deletions":18},"src/{shared => }/ask-password-api.c":{"insertions":0,"deletions":0},"src/{shared => }/dbus-loop.c":{"insertions":0,"deletions":0},"src/{shared => }/dbus-loop.h":{"insertions":0,"deletions":0},"src/{shared => }/def.h":{"insertions":0,"deletions":0},"src/{shared => }/missing.h":{"insertions":0,"deletions":0},"src/{shared => }/polkit.c":{"insertions":0,"deletions":0},"src/{shared => }/polkit.h":{"insertions":0,"deletions":0}}},"b8b7e4060f06941ec55da421c5800437ba28c79a":{"author":"Lennart Poettering","email":"lennart@poettering.net","date":"2013-11-05 02:06:05 UTC","message":"bus: delete some now used dbus1 code","insertions":467,"deletions":1,"filepaths":{"Makefile.am":{"insertions":5,"deletions":1},"src/shared/dbus-loop.c":{"insertions":249,"deletions":0},"src/shared/dbus-loop.h":{"insertions":27,"deletions":0},"src/shared/polkit.c":{"insertions":153,"deletions":0},"src/shared/polkit.h":{"insertions":33,"deletions":0}}},"bece1f5215b4ff147e000255d07f6b3cc777f15b":{"author":"Lennart Poettering","email":"lennart@poettering.net","date":"2012-11-09 14:54:22 UTC","message":"dbus: when verifying PK privs, bypass PK if uid=0 of client\n\nThis reduces the number of roundtrips when the client is privileged and\nmakes the PK dep optional for root clients.","insertions":1,"deletions":9,"filepaths":{"src/shared/polkit.c":{"insertions":1,"deletions":9}}},"8d789b905dba8aebd30238520b6ad52fb866af95":{"author":"Tom Gundersen","email":"teg@jklm.no","date":"2012-10-03 13:57:40 UTC","message":"    vconsole: default to the kernel compiled-in keymap\n\n    No longer override the default kernel keymap if nothing is specified in\n    vconsole.conf.\n\n    The default should be to do nothing (i.e., use what is already in the\n    kernel) unless the distro/admin has explicitly requested it.","insertions":7,"deletions":0,"filepaths":{"src/vconsole/vconsole-setup.c":{"insertions":7,"deletions":0}}},"https://github.com/systemd/systemd/commit/38ccb55731e5c288fd086344bbb07a7167a78d2b":{},"9f939335a07085aa9a9663efd1dca06ef6405d62":{"author":"Zbigniew Jędrzejewski-Szmek","email":"zbyszek@in.waw.pl","date":"2017-10-25 09:19:19 UTC","message":"resolved: fix loop on packets with pseudo dns types\n\nReported by Karim Hossen & Thomas Imbert from Sogeti ESEC R&D.\n\nhttps://bugs.launchpad.net/ubuntu/+source/systemd/+bug/1725351","insertions":5,"deletions":1,"filepaths":{"src/resolve/resolved-dns-packet.c":{"insertions":5,"deletions":1}}},"39a18c60d07319ebfcfd476556729c2cadd616d6":{"author":"Michal Schmidt","email":"mschmidt@redhat.com","date":"2012-04-22 23:24:04 UTC","message":"job: serialize jobs properly\n\nJobs were not preserved correctly over a daemon-reload operation.\nA systemctl process waiting for a job completion received a job removal\nsignal. The job itself changed its id. The job timeout started ticking all\nover again.\n\nThis fixes the deficiencies.","insertions":21,"deletions":204,"filepaths":{"src/core/dbus-job.c":{"insertions":3,"deletions":3},"src/core/job.c":{"insertions":7,"deletions":155},"src/core/job.h":{"insertions":0,"deletions":6},"src/core/unit.c":{"insertions":10,"deletions":37},"src/core/unit.h":{"insertions":1,"deletions":3}}},"f89bc84f3242449cbc308892c87573b131f121df":{"author":"Lennart Poettering","email":"lennart@poettering.net","date":"2018-10-19 09:28:40 UTC","message":"chown-recursive: also drop ACLs when recursively chown()ing\n\nLet's better be safe than sorry and also drop ACLs.","insertions":4,"deletions":12,"filepaths":{"src/core/chown-recursive.c":{"insertions":4,"deletions":12}}},"cd6b7d50c337b3676a3d5fc2188ff298dcbdb939":{"author":"Lennart Poettering","email":"lennart@poettering.net","date":"2018-10-19 09:42:11 UTC","message":"chown-recursive: TAKE_FD() is your friend","insertions":5,"deletions":1,"filepaths":{"src/core/chown-recursive.c":{"insertions":5,"deletions":1}}},"cb9e44db36caefcbb8ee7a12e14217305ed69ff2":{"author":"Lennart Poettering","email":"lennart@poettering.net","date":"2018-10-19 09:31:37 UTC","message":"test: add test case for recursive chown()ing","insertions":0,"deletions":165,"filepaths":{"src/test/meson.build":{"insertions":0,"deletions":5},"src/test/test-chown-rec.c":{"insertions":0,"deletions":160}}},"5ec1fca41e5c5f31c7f6bfb42b113f0fb7dc1a87":{"author":"Lennart Poettering","email":"lennart@poettering.net","date":"2018-10-25 11:29:42 UTC","message":" wsBcBAABCAAQBQJb0akmCRBK7hj4Ov3rIwAAdHIIAEImUsYK9V2sqVtCR61GOXGQ\n vtUxRE9AMXfkms3VyTaEttPgNxvuONK3egquwEPbGILoG0IE1w9p+Hknf/XooDsk\n AaQ557DQEBYSD4reeu+SAe9qv5xWZe80EyxBeaWDMJ1Dxz57KRQBkd8gJc1wPHG8\n pTCrkoIakpY11vzsSKlGgOKZEpHSvY862uRt7wdHjzZNrXYZXPCWR9UvPuhKVIAi\n Elg0AqgcV84UsQ5BfQkakBZ1dY52Mqx6pfZRTqsy/SqNkMzaBZdjhj1iLoFA0oAz\n uS3D79pOyL1VVKHCO5mfZgPo2imw7A7LDs8Pqg6ABuufUeCp3ypJzlyjRoVFLh8=\n =0Lb6\n -----END PGP SIGNATURE-----\n \n\nMerge pull request #10518 from poettering/dhcp6-size-fixes\n\ndhcp6 packet size calculation fixes","insertions":24,"deletions":27,"filepaths":{"src/libsystemd-network/dhcp6-internal.h":{"insertions":2,"deletions":2},"src/libsystemd-network/dhcp6-option.c":{"insertions":22,"deletions":25}}},"4903a73c37d444261c0a6b362e1c27e58100ea72":{"author":"Tom Gundersen","email":"teg@jklm.no","date":"2014-11-01 13:32:28 UTC","message":"dhcp6: use unaligned read/write helpers","insertions":18,"deletions":25,"filepaths":{"src/libsystemd-network/dhcp6-option.c":{"insertions":18,"deletions":25}}},"ae018d9bc900d6355dea4af05119b49c67945184":{"author":"Lennart Poettering","email":"lennart@poettering.net","date":"2013-04-23 02:10:13 UTC","message":"cgroup: make sure all our cgroup objects have a suffix and are properly escaped\n\nSession objects will now get the .session suffix, user objects the .user\nsuffix, nspawn containers the .nspawn suffix.\n\nThis also changes the user cgroups to be named after the numeric UID\nrather than the username, since this allows us the parse these paths\nstandalone without requiring access to the cgroup file system.\n\nThis also changes the mapping of instanced units to cgroups. Instead of\nmapping foo@bar.service to the cgroup path /user/foo@.service/bar we\nwill now map it to /user/foo@.service/foo@bar.service, in order to\nensure that all our objects are properly suffixed in the tree.","insertions":165,"deletions":271,"filepaths":{"TODO":{"insertions":2,"deletions":0},"src/core/unit.c":{"insertions":6,"deletions":20},"src/journal/journald-server.c":{"insertions":93,"deletions":69},"src/login/logind-session.c":{"insertions":1,"deletions":12},"src/login/logind-user.c":{"insertions":1,"deletions":11},"src/login/sd-login.c":{"insertions":34,"deletions":1},"src/nspawn/nspawn.c":{"insertions":3,"deletions":15},"src/shared/cgroup-util.c":{"insertions":18,"deletions":105},"src/shared/cgroup-util.h":{"insertions":0,"deletions":5},"src/test/test-cgroup-util.c":{"insertions":7,"deletions":33}}},"ac2e41f5103ce2c679089c4f8fb6be61d7caec07":{"author":"Vito Caputo","email":"vito.caputo@coreos.com","date":"2016-02-12 12:59:57 UTC","message":"journal: asynchronous journal_file_set_offline()\n\nThis adds a wait flag to journal_file_set_offline(), when false the offline is\nperformed asynchronously in a separate thread.\n\nWhen wait is true, if an asynchronous offline is already in-progress it is\nrestarted and waited for.  Otherwise the offline is performed synchronously\nwithout the use of a thread.\n\njournal_file_set_online() cancels or waits for the asynchronous offline to\ncomplete if in-flight, depending on where in the offline process the thread\nhappens to be.  If the thread is in the fsync() phase, it is cancelled and\nwaiting is unnecessary.  Otherwise, the thread is joined before proceeding.\n\nA new offline_state member is added to JournalFile which is used via\natomic operations for communicating between the offline thread and the\njournal_file_set_{offline,online}() functions.","insertions":24,"deletions":208,"filepaths":{"src/journal/journal-file.c":{"insertions":21,"deletions":192},"src/journal/journal-file.h":{"insertions":1,"deletions":14},"src/journal/journald-server.c":{"insertions":2,"deletions":2}}},"b1a4981aed3f5e939dbe5a211ca066ac69699b24":{"author":"Lennart Poettering","email":"lennart@poettering.net","date":"2019-01-17 15:07:22 UTC","message":"tree-wide: whenever we allocate a new bus object, close it before dropping final ref\n\nThis doesn't really change much, but feels more correct to do, as it\nensures that all messages currently queued in the bus connections are\ndefinitely unreffed and thus destryoing of the connection object will\nfollow immediately.\n\nStrictly speaking this change is entirely unnecessary, since nothing\nelse could have acquired a ref to the connection and queued a message\nin, however, now that we have the new sd_bus_close_unref() helper it\nmakes a lot of sense to use it here, to ensure that whatever happens\nnothing that might have been queued fucks with us.","insertions":8,"deletions":8,"filepaths":{"src/busctl/busctl.c":{"insertions":1,"deletions":1},"src/core/dbus.c":{"insertions":2,"deletions":2},"src/machine/machine-dbus.c":{"insertions":1,"deletions":1},"src/shared/bus-util.c":{"insertions":4,"deletions":4}}},"38e980a6a5a3442c2f48b1f827284388096d8ca5":{"author":"Yu Watanabe","email":"watanabe.yu+github@gmail.com","date":"2021-06-23 16:22:07 UTC","message":"sd-dhcp-client: tentatively ignore FORCERENEW command\n\nThis makes DHCP client ignore FORCERENEW requests, as unauthenticated\nFORCERENEW requests causes a security issue (TALOS-2020-1142, CVE-2020-13529).\n\nLet's re-enable this after RFC3118 (Authentication for DHCP Messages)\nand/or RFC6704 (Forcerenew Nonce Authentication) are implemented.\n\nFixes #16774.","insertions":0,"deletions":8,"filepaths":{"src/libsystemd-network/sd-dhcp-client.c":{"insertions":0,"deletions":8}}},"156a5fd297b61bce31630d7a52c15614bf784843":{"author":"Zbigniew Jędrzejewski-Szmek","email":"zbyszek@in.waw.pl","date":"2020-05-31 16:21:09 UTC","message":"basic/user-util: always use base 10 for user/group numbers\n\nWe would parse numbers with base prefixes as user identifiers. For example,\n\"0x2b3bfa0\" would be interpreted as UID==45334432 and \"01750\" would be\ninterpreted as UID==1000. This parsing was used also in cases where either a\nuser/group name or number may be specified. This means that names like\n0x2b3bfa0 would be ambiguous: they are a valid user name according to our\ndocumented relaxed rules, but they would also be parsed as numeric uids.\n\nThis behaviour is definitely not expected by users, since tools generally only\naccept decimal numbers (e.g. id, getent passwd), while other tools only accept\nuser names and thus will interpret such strings as user names without even\nattempting to convert them to numbers (su, ssh). So let's follow suit and only\naccept numbers in decimal notation. Effectively this means that we will reject\nsuch strings as a username/uid/groupname/gid where strict mode is used, and try\nto look up a user/group wit","insertions":1,"deletions":11,"filepaths":{"src/basic/user-util.c":{"insertions":1,"deletions":1},"src/test/test-user-util.c":{"insertions":0,"deletions":10}}},"dbfb40efdd7fed421415620058066bb3e691d735":{},"707e93aff8f358f8a62117e54b857530d6594e4b":{"author":"Lennart Poettering","email":"lennart@poettering.net","date":"2020-06-01 15:06:19 UTC","message":"parse-util: allow tweaking how to parse integers\n\nThis allows disabling a few alternative ways to decode integers\nformatted as strings, for safety reasons.\n\nSee: #15991","insertions":13,"deletions":58,"filepaths":{"src/basic/parse-util.c":{"insertions":13,"deletions":52},"src/basic/parse-util.h":{"insertions":0,"deletions":6}}},"38ccb55731e5c288fd086344bbb07a7167a78d2b":{"author":"Lennart Poettering","email":"lennart@poettering.net","date":"2020-07-07 19:58:12 UTC","message":"nss-mymachines: drop support for UID/GID resolving\n\nNow that we make the user/group name resolving available via userdb and\nthus nss-systemd, we do not need the UID/GID resolving support in\nnss-mymachines anymore. Let's drop it hence.\n\nWe keep the module around, since besides UID/GID resolving it also does\nhostname resolving, which we care about. (One of those days we should\nreplace that by some Varlink logic between\nnss-resolve/systemd-resolved.service too)\n\nThe hooks are kept in the NSS module, but they do not resolve anything\nanymore, in order to keep compat at a maximum.","insertions":371,"deletions":35,"filepaths":{"README":{"insertions":11,"deletions":11},"docs/UIDS-GIDS.md":{"insertions":3,"deletions":3},"factory/etc/nsswitch.conf":{"insertions":2,"deletions":2},"man/nss-myhostname.xml":{"insertions":2,"deletions":2},"man/nss-mymachines.xml":{"insertions":40,"deletions":8},"man/nss-resolve.xml":{"insertions":2,"deletions":2},"man/nss-systemd.xml":{"insertions":2,"deletions":2},"src/nspawn/nspawn.c":{"insertions":1,"deletions":1},"src/nss-mymachines/nss-mymachines.c":{"insertions":308,"deletions":4}}}}